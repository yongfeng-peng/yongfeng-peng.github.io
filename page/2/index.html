<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="(å¥³è‹±">
<meta property="og:type" content="website">
<meta property="og:title" content="Shero.">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Shero.">
<meta property="og:description" content="(å¥³è‹±">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Shero.">
<meta name="twitter:description" content="(å¥³è‹±">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/">





  <title>Shero.</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"></canvas>
  <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
  <script type="text/javascript" src="/js/src/fireworks.js"></script>
  

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Shero.</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">ç”Ÿæ´»ç™¾èˆ¬æ»‹å‘³ï¼Œä½ è¦ç¬‘ç€é¢å¯¹ğŸ˜Š</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/14/dva-umi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/01/14/dva-umi/" itemprop="url">dva+umi</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-01-14T14:28:46+08:00">
                2021-01-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/å‰ç«¯æ¡†æ¶/" itemprop="url" rel="index">
                    <span itemprop="name">å‰ç«¯æ¡†æ¶</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="dva-umiç†è§£"><a href="#dva-umiç†è§£" class="headerlink" title="dva+umiç†è§£"></a>dva+umiç†è§£</h3><h4 id="dva"><a href="#dva" class="headerlink" title="dva"></a><a href="https://dvajs.com/" target="_blank" rel="noopener">dva</a></h4><ul>
<li><a href="https://github.com/dvajs/dva/issues/1" target="_blank" rel="noopener">why dvaï¼Ÿ</a></li>
<li>reduxæ•°æ®æµçš„æ§åˆ¶å¯ä»¥è®©åº”ç”¨æ›´æ§ï¼Œè®©é€»è¾‘æ›´æ¸…æ™°</li>
<li>reduxåŒæ—¶ä¼šæœ‰çš„ç–‘é—®ï¼Ÿæ¦‚å¿µå¤ªå¤šï¼Œå¹¶ä¸”reducerã€sagaã€actionéƒ½æ˜¯åˆ†ç¦»çš„ï¼ˆæ–‡ä»¶åˆ†ç¦»<ul>
<li>ç¼–è¾‘æˆæœ¬é«˜ï¼Œéœ€è¦åœ¨reducerã€sagaã€actionä¹‹é—´æ¥å›åˆ‡æ¢</li>
<li>ä¸ä¾¿äºç»„ç»‡ä¹‰åŠ¡æ¨¡å‹ï¼ˆdomain modelsï¼‰ï¼Œå¦‚ï¼šæ¯ä¸ªæ¨¡å—åŠŸèƒ½ï¼Œéœ€è¦å¤åˆ¶å¾ˆå¤šæ–‡ä»¶</li>
<li>sagaä¹¦å†™å¤æ‚ï¼Œæ¯ç›‘å¬ä¸€ä¸ªactionéƒ½è¦èµ°fork -&gt; watcher -&gt; workeræµç¨‹</li>
<li>entryä¹¦å†™éº»çƒ¦</li>
</ul>
</li>
<li><p><a href="https://github.com/dvajs/dva/issues/1" target="_blank" rel="noopener">whatâ€™s dva?</a></p>
<ul>
<li>dvaæ˜¯åŸºäºç°æœ‰åº”ç”¨æ¡†æ¶(redux + redux-saga + react-routerç­‰)çš„è½»é‡å°è£…ï¼Œæ²¡æœ‰å¼•å…¥ä»»ä½•æ–°çš„æ¦‚å¿µ</li>
<li>dvaæ˜¯frameworkï¼Œä¸æ˜¯libraryï¼Œç±»ä¼¼emberjsï¼Œä¼šæ˜ç¡®çš„å‘Šè¯‰ä½ æ¯ä¸ªéƒ¨ä»¶åº”è¯¥æ€ä¹ˆå†™ï¼Œå¯¹äºå›¢é˜Ÿè€Œè¨€ï¼Œä¼šæ›´å¯æ§ã€‚é™¤äº†reactå’Œrect-domæ˜¯peerDependenciesä»¥å¤–ï¼Œdvaå°è£…äº†æ‰€æœ‰å…¶å®ƒä¾èµ–</li>
<li>dvaå®ç°ä¸Šå°½é‡ä¸åˆ›å»ºæ–°è¯­æ³•ï¼Œè€Œæ˜¯ä¾èµ–åº“æœ¬èº«çš„è¯­æ³•</li>
<li><p>dvaçš„æ ¸å¿ƒæ˜¯æä¾›äº†app.modelæ–¹æ³•ï¼Œç”¨äºæŠŠreducerã€initialStateã€sagaã€actionå°è£…åˆ°ä¸€èµ·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">app.model(&#123;</span><br><span class="line">  namespace: &apos;products&apos;,</span><br><span class="line">  state: &#123;</span><br><span class="line">    list: [],</span><br><span class="line">    loading: false,</span><br><span class="line">  &#125;,</span><br><span class="line">  subscriptions: [</span><br><span class="line">    function(dispatch) &#123;</span><br><span class="line">      dispatch(&#123;type: &apos;products/query&apos;&#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  effects: &#123;</span><br><span class="line">    [&apos;products/query&apos;]: function*() &#123;</span><br><span class="line">      yield call(delay(800));</span><br><span class="line">      yield put(&#123;</span><br><span class="line">        type: &apos;products/query/success&apos;,</span><br><span class="line">        payload: [&apos;ant-tool&apos;, &apos;roof&apos;],</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  reducers: &#123;</span><br><span class="line">    [&apos;products/query&apos;](state) &#123;</span><br><span class="line">      return &#123; ...state, loading: true, &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    [&apos;products/query/success&apos;](state, &#123; payload &#125;) &#123;</span><br><span class="line">      return &#123; ...state, loading: false, list: payload &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç»´æŠ¤ç®€å•ã€æé«˜å¼€å‘æ•ˆç‡</p>
</li>
<li>å¯¹åŸæœ‰çŸ¥è¯†ç‚¹ç»„åˆï¼Œå¯¹APIå¯¹ä½¿ç”¨</li>
</ul>
</li>
</ul>
<h4 id="umi"><a href="#umi" class="headerlink" title="umi"></a><a href="https://umijs.org/zh-CN/docs" target="_blank" rel="noopener">umi</a></h4><ul>
<li>dva+umiå…³ç³»<br><img src="https://raw.githubusercontent.com/yongfeng-peng/yongfeng-peng.github.io/dev/source/images/dva.png" alt="Image text"></li>
<li><a href="https://github.com/yongfeng-peng/dva-umi-ts-antd.git" target="_blank" rel="noopener">dva+umiæ•°æ®å…±äº«</a><br><img src="https://raw.githubusercontent.com/yongfeng-peng/yongfeng-peng.github.io/dev/source/images/dva-lc.png" alt="Image text"></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/14/typescript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/01/14/typescript/" itemprop="url">typescript</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-01-14T10:14:12+08:00">
                2021-01-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JS/" itemprop="url" rel="index">
                    <span itemprop="name">JS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="typeScript"><a href="#typeScript" class="headerlink" title="typeScript"></a>typeScript</h3><h4 id="å‘å±•"><a href="#å‘å±•" class="headerlink" title="å‘å±•"></a>å‘å±•</h4><ul>
<li>ä»»ä½•èƒ½æœ‰jså®ç°çš„åº”ç”¨æœ€ç»ˆéƒ½ä¼šä½¿ç”¨jså®ç°</li>
<li>ä»ç§»åŠ¨ç»ˆç«¯åˆ°åç«¯æœåŠ¡</li>
<li>ä»IOTåˆ°ç¥ç»ç½‘ç»œï¼Œå®ƒå‡ ä¹æ— å¤„ä¸åœ¨ï¼Œå¦‚æ­¤å¹¿é˜”çš„åº”ç”¨é¢†åŸŸï¼Œè‡ªç„¶å¯¹è¯­è¨€çš„å®‰å…¨æ€§ã€å¥å£®è¡Œã€å¯ç»´æŠ¤æ€§æœ‰æ›´é«˜çš„è¦æ±‚ï¼Œå°½ç®¡ESæ ‡å‡†åœ¨è¿‘å‡ å¹´æœ‰é•¿è¶³çš„è¿›æ­¥ï¼Œä½†åœ¨ç±»å‹æ£€æŸ¥æ–¹é¢ä¾ç„¶æ— æ‰€å»ºæ ‘</li>
<li>ä½ æ˜¯å¦ç»å¸¸é‡åˆ°è¿™æ ·ä½†åœºæ™¯<ul>
<li>è°ƒç”¨ä¸€ä¸ªåˆ«äººå†™ä½†å‡½æ•°ï¼Œå¾ˆä¸å¹¸ï¼Œæ²¡æœ‰ç•™ä¸‹ä»»ä½•æ³¨é‡Šï¼Œä¸ºäº†ææ¸…æ¥šå‚æ•°ç±»å‹ï¼Œç¡¬ç€å¤´çš®çœ‹é€»è¾‘</li>
<li>ä¸ºäº†ä¿è¯ä»£ç çš„å¥å£®æ€§ï¼Œå¯¹ä¸€ä¸ªå‡½æ•°çš„è¾“å…¥å‚æ•°è¿›è¡Œå„ç§å‡è®¾</li>
<li>é¢†å¯¼çœ‹å¥½ä½ ï¼Œç»´æŠ¤ä¸€ä¸ªé‡è¦çš„åº•å±‚ç±»åº“ï¼Œä½ æ®šç²¾ç«­è™‘ä¼˜åŒ–äº†ä¸€ä¸ªå‚æ•°ç±»å‹ï¼Œä½†ä¸çŸ¥é“æœ‰å¤šå°‘å¤„å¼•ç”¨ï¼Œæ˜¯å¦åœ¨æäº¤ä»£ç å‰ï¼Œæ„Ÿåˆ°è„ŠèƒŒå‘å‡‰</li>
<li>æ˜æ˜å®šä¹‰å¥½æ¥å£ï¼Œå¯ä¸€è”è°ƒå°±æŠ¥é”™äº†ï¼Œä¸èƒ½é˜…è¯»åˆ°length</li>
</ul>
</li>
<li>ä»¥ä¸Šå½’æ ¹ç»“åº•ï¼Œjsæ˜¯ä¸€é—¨åŠ¨æ€å¼±ç±»å‹è¯­è¨€ï¼Œå¯¹å˜é‡çš„ç±»å‹éå¸¸å®½å®¹ï¼Œä¸ä¼šåœ¨è¿™äº›å˜é‡å’Œä»–ä»¬çš„è°ƒç”¨è€…ä¹‹é—´å»ºç«‹ç»“æ„åŒ–çš„å¥‘çº¦ï¼Œå¦‚æœé•¿æœŸåœ¨æ²¡æœ‰ç±»å‹çº¦æŸçš„ç¯å¢ƒä¸‹å¼€å‘ï¼Œé€ æˆç±»å‹æ€ç»´çš„ç¼ºå¤±</li>
</ul>
<h4 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><ul>
<li>å®˜æ–¹å®šä¹‰ï¼šæ‹¥æœ‰ç±»å‹ç³»ç»Ÿçš„JavaScriptçš„è¶…é›†ï¼Œå¯ä»¥ç¼–è¯‘æˆçº¯çš„JavaScript</li>
<li>ç±»å‹æ£€æŸ¥ï¼šç¼–è¯‘ä»£ç æ—¶ï¼Œè¿›è¡Œä¸¥æ ¼çš„é™æ€ç±»å‹æ£€æŸ¥ï¼Œå³ç¼–ç é˜¶æ®µå‘ç°ä¸€äº›å¯é¿å…çš„éšæ‚£ï¼Œä¸å¿…å¸¦åˆ°ç”Ÿäº§</li>
<li>è¯­è¨€æ‰©å±•ï¼šåŒ…æ‹¬ES6ã€æœªæ¥ææ¡ˆä¸­çš„ç‰¹æ€§ï¼Œå¦‚å¼‚æ­¥æ“ä½œã€è£…é¥°å™¨ï¼Œä¹Ÿä¼šä»å…¶å®ƒè¯­è¨€å€Ÿé‰´æŸäº›ç‰¹æ€§ï¼Œå¦‚æ¥å£ã€æŠ½è±¡ç±»</li>
<li>å·¥å…·å±æ€§ï¼štså¯ä»¥ç¼–è¯‘æˆæ ‡å‡†çš„jsï¼Œå¯ä»¥åœ¨ä»»ä½•æµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œï¼Œæ— éœ€ä»»ä½•è¿è¡Œæ—¶çš„é¢å¤–å¼€é”€ï¼Œä»è¿™ä¸ªè§’åº¦è®²ï¼Œtsæ›´åƒä¸€ä¸ªå·¥å…·è€Œéè¯­è¨€<h4 id="ä½¿ç”¨tså¥½å¤„"><a href="#ä½¿ç”¨tså¥½å¤„" class="headerlink" title="ä½¿ç”¨tså¥½å¤„"></a>ä½¿ç”¨tså¥½å¤„</h4></li>
<li>vs codeå…·æœ‰å¼ºå¤§çš„è‡ªåŠ¨è¡¥å…¨ã€å¯¼èˆªã€é‡æ„åŠŸèƒ½ï¼Œä½¿å¾—æ¥å£å®šä¹‰å¯ä»¥ç›´æ¥ä»£æ›¿æ–‡æ¡£ï¼ŒåŒæ—¶å¯ä»¥æé«˜å¼€å‘æ•ˆç‡ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ï¼Œæ›´é‡è¦çš„æ˜¯tså¯ä»¥å¸®åŠ©å›¢é˜Ÿï¼Œé‡å¡‘<strong>ç±»å‹æ€ç»´</strong>ï¼Œæ¥å£çš„æä¾›æ–¹å°†è¢«è¿«å»æ€è€ƒAPIçš„è¾¹ç•Œï¼Œå°†ä»ä»£ç çš„ç¼–å†™è€…èœ•å˜ä¸ºä»£ç çš„è®¾è®¡è€…</li>
<li>å¦‚æœjsæ˜¯é‡é©¬ï¼Œtså°±æ˜¯æŸç¼šè¿™åŒ¹é‡é©¬çš„ç¼°ç»³ï¼Œä½œä¸ºéª‘å£«çš„ä½ ï¼Œè‡ªç„¶å¯ä»¥å¼ å¼€åŒè‡‚ã€æ”¾é£è‡ªæˆ‘ï¼Œä½†å¦‚æœä¸æ˜¯æŠ€è‰ºè¶…ç¾¤ï¼Œææ€•ä¼šæ‘”å¾—å¾ˆæƒ¨ï¼Œç„¶è€Œå¦‚æœæŠ“ä½ç¼°ç»³ï¼Œä½ å³å¯é—²åº­ä¿¡æ­¥ï¼Œäº¦å¯ç­–é©¬æ‰¬é­ï¼Œè¿™å°±æ˜¯tsçš„ä»·å€¼ï¼Œå®ƒå¯è®©ä½ åœ¨å‰ç«¯å¼€å‘è·¯ä¸Šèµ°å¾—æ›´ç¨³ï¼Œæ›´è¿œ</li>
</ul>
<h4 id="å®‰è£…-TypeScript-å¹¶è¿è¡Œ-ts-æ–‡ä»¶"><a href="#å®‰è£…-TypeScript-å¹¶è¿è¡Œ-ts-æ–‡ä»¶" class="headerlink" title="å®‰è£… TypeScript å¹¶è¿è¡Œ ts æ–‡ä»¶"></a>å®‰è£… TypeScript å¹¶è¿è¡Œ ts æ–‡ä»¶</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* npm install typescript -g</span><br><span class="line">* yarn global add typescript</span><br><span class="line">* ä½¿ç”¨ tsc å‘½ä»¤è½¬æˆ js æ–‡ä»¶</span><br><span class="line">  * tsc xx.ts</span><br><span class="line">  * node xx.js</span><br><span class="line">* ç›´æ¥è¿è¡Œtsæ–‡ä»¶å¯ä»¥ä½¿ç”¨ts-node</span><br><span class="line">  * å®‰è£…ts-node</span><br><span class="line">  * npm install ts-node -g</span><br><span class="line">  * ä½¿ç”¨</span><br><span class="line">  * ts-node xx.ts</span><br></pre></td></tr></table></figure>
<h4 id="TSåŸºç¡€æ•°æ®ç±»å‹"><a href="#TSåŸºç¡€æ•°æ®ç±»å‹" class="headerlink" title="TSåŸºç¡€æ•°æ®ç±»å‹"></a>TSåŸºç¡€æ•°æ®ç±»å‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">// string</span><br><span class="line">let s: string = &apos;aaa&apos;;</span><br><span class="line">console.log(s)</span><br><span class="line"></span><br><span class="line">// number</span><br><span class="line">let num: number = 123;</span><br><span class="line">console.log(num)</span><br><span class="line"></span><br><span class="line">// ä¸å£°æ˜å…·ä½“æ•°æ®ç±»å‹ï¼Œç”±ä»£ç æ¨æ–­å‡ºæ•°æ®ç±»å‹</span><br><span class="line">let a = &apos;122&apos;;</span><br><span class="line">console.log(a)</span><br><span class="line"></span><br><span class="line">// å¸ƒå°”</span><br><span class="line">let b: boolean = false;</span><br><span class="line">console.log(b)</span><br><span class="line"></span><br><span class="line">// æ•°ç»„ æ•°æ®ç±»å‹[]</span><br><span class="line">let arr: string[] = [&apos;11&apos;, &apos;22&apos;];</span><br><span class="line">console.log(arr)</span><br><span class="line"></span><br><span class="line">// void</span><br><span class="line">function funA(): void &#123;</span><br><span class="line">  console.log(&apos;å®šä¹‰äº†ä¸€ä¸ªæ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°&apos;)</span><br><span class="line">&#125;</span><br><span class="line">funA();</span><br><span class="line"></span><br><span class="line">// function funNum(): number &#123;</span><br><span class="line">//   console.log(&apos;å®šä¹‰äº†ä¸€ä¸ªæœ‰è¿”å›å€¼çš„å‡½æ•°&apos;)</span><br><span class="line">//   return 1;</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">// null</span><br><span class="line">// undefined</span><br></pre></td></tr></table></figure>
<h4 id="TSæ¥å£"><a href="#TSæ¥å£" class="headerlink" title="TSæ¥å£"></a>TSæ¥å£</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// æ¥å£çš„å£°æ˜</span><br><span class="line">interface inf &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ¥å£å¿…é¡»çš„æˆå‘˜å˜é‡</span><br><span class="line">interface inf &#123;</span><br><span class="line">  name: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ¥å£å¯é€‰çš„æˆå‘˜å˜é‡ï¼Œå¯ä»¥æœ‰ï¼Œå¯ä»¥æ²¡æœ‰</span><br><span class="line">interface inf &#123;</span><br><span class="line">  age?: number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¤æ‚çš„æ¥å£å®šä¹‰</span><br><span class="line">interface inf &#123;</span><br><span class="line">  name: string</span><br><span class="line">  age?: number</span><br><span class="line">  say: () =&gt; void</span><br><span class="line">  userList: string[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ¥å£çš„ç»§æ‰¿</span><br><span class="line">interface child extends inf &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="TSæ³›å‹"><a href="#TSæ³›å‹" class="headerlink" title="TSæ³›å‹"></a>TSæ³›å‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">class fx &#123;</span><br><span class="line">  name: string</span><br><span class="line">  age: number</span><br><span class="line">  say() &#123;</span><br><span class="line">    console.log(`$&#123;this.name&#125;---$&#123;this.age&#125;å²`)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let f = new fx();</span><br><span class="line">f.name = &apos;heihei&apos;;</span><br><span class="line">f.age = 18;</span><br><span class="line">f.say();</span><br><span class="line"></span><br><span class="line">class fx1&lt;IProps = &#123;&#125;&gt; &#123;</span><br><span class="line">  user: IProps</span><br><span class="line">  say() &#123;</span><br><span class="line">    console.log(this.user);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface IUser &#123;</span><br><span class="line">  name: string</span><br><span class="line">  age: number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ³›å‹åªå…³æ³¨ä¸ºéœ€è¦çš„æ•°æ®ï¼Œä¸å…³æ³¨å…·ä½“çš„æ•°æ®æ ¼å¼</span><br><span class="line">let f1 = new fx1&lt;IUser&gt;();</span><br><span class="line">f1.user = &#123;age: 18, name: &apos;aa&apos;&#125;;</span><br><span class="line">f1.say();</span><br></pre></td></tr></table></figure>
<h4 id="TSæšä¸¾"><a href="#TSæšä¸¾" class="headerlink" title="TSæšä¸¾"></a>TSæšä¸¾</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">enum Direction &#123;</span><br><span class="line">  UP = &apos;up&apos;,</span><br><span class="line">  DOWN = &apos;down&apos;,</span><br><span class="line">  LEFT = &apos;left&apos;,</span><br><span class="line">  RIght = &apos;right&apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">enum User &#123;</span><br><span class="line">  UP = &apos;up&apos;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(Direction.UP)</span><br><span class="line">// ç®€å•ç†è§£ æœ‰è‡ªå·±çš„ç‹¬ç«‹ä½œç”¨åŸŸ</span><br><span class="line">// console.log(Direction.UP === User.UP)</span><br><span class="line"></span><br><span class="line">const a = 1;</span><br><span class="line">const b = 1;</span><br><span class="line">console.log(a == b)</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/05/vueè‡ªå®šä¹‰æŒ‡ä»¤/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/01/05/vueè‡ªå®šä¹‰æŒ‡ä»¤/" itemprop="url">vueè‡ªå®šä¹‰æŒ‡ä»¤</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-01-05T11:49:15+08:00">
                2021-01-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/å‰ç«¯æ¡†æ¶/" itemprop="url" rel="index">
                    <span itemprop="name">å‰ç«¯æ¡†æ¶</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="vueè‡ªå®šä¹‰æŒ‡ä»¤"><a href="#vueè‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="vueè‡ªå®šä¹‰æŒ‡ä»¤"></a><a href="https://cn.vuejs.org/v2/guide/custom-directive.html" target="_blank" rel="noopener">vueè‡ªå®šä¹‰æŒ‡ä»¤</a></h3><h4 id="vueè‡ªå®šä¹‰æŒ‡ä»¤æœ‰å…¨å±€æ³¨å†Œå’Œå±€éƒ¨æ³¨å†Œä¸¤ç§æ–¹å¼"><a href="#vueè‡ªå®šä¹‰æŒ‡ä»¤æœ‰å…¨å±€æ³¨å†Œå’Œå±€éƒ¨æ³¨å†Œä¸¤ç§æ–¹å¼" class="headerlink" title="vueè‡ªå®šä¹‰æŒ‡ä»¤æœ‰å…¨å±€æ³¨å†Œå’Œå±€éƒ¨æ³¨å†Œä¸¤ç§æ–¹å¼"></a>vueè‡ªå®šä¹‰æŒ‡ä»¤æœ‰å…¨å±€æ³¨å†Œå’Œå±€éƒ¨æ³¨å†Œä¸¤ç§æ–¹å¼</h4><ul>
<li><p>å…¨å±€æ³¨å†Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vue.directive(id, [definition])</span><br></pre></td></tr></table></figure>
</li>
<li><p>å±€éƒ¨æ³¨å†Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- æ‰¹é‡æ³¨å†Œ --&gt;</span><br><span class="line">import copy from &apos;./copy&apos;</span><br><span class="line">import longpress from &apos;./longpress&apos;</span><br><span class="line">// è‡ªå®šä¹‰æŒ‡ä»¤</span><br><span class="line">const directives = &#123;</span><br><span class="line">  copy,</span><br><span class="line">  longpress,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  install(Vue) &#123;</span><br><span class="line">    Object.keys(directives).forEach((key) =&gt; &#123;</span><br><span class="line">      Vue.directive(key, directives[key])</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ³¨å†Œä¹‹åä½¿ç”¨åœ¨main.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- main.jsä½¿ç”¨ --&gt;</span><br><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import Directives from &apos;./directives/index&apos;</span><br><span class="line">Vue.use(Directives)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="æŒ‡ä»¤å‡½æ•°ä¸­æä¾›çš„å‡ ä¸ªé’©å­å‡½æ•°ï¼ˆå¯é€‰ï¼‰ï¼š"><a href="#æŒ‡ä»¤å‡½æ•°ä¸­æä¾›çš„å‡ ä¸ªé’©å­å‡½æ•°ï¼ˆå¯é€‰ï¼‰ï¼š" class="headerlink" title="æŒ‡ä»¤å‡½æ•°ä¸­æä¾›çš„å‡ ä¸ªé’©å­å‡½æ•°ï¼ˆå¯é€‰ï¼‰ï¼š"></a>æŒ‡ä»¤å‡½æ•°ä¸­æä¾›çš„å‡ ä¸ªé’©å­å‡½æ•°ï¼ˆå¯é€‰ï¼‰ï¼š</h4><ul>
<li>bind: åªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªåœ¨ç»‘å®šæ—¶æ‰§è¡Œä¸€æ¬¡çš„åˆå§‹åŒ–åŠ¨ä½œ</li>
<li>inserted: è¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ï¼ˆçˆ¶èŠ‚ç‚¹å­˜åœ¨å³å¯è°ƒç”¨ï¼Œä¸å¿…å­˜åœ¨äº document ä¸­ï¼‰</li>
<li>update: è¢«ç»‘å®šå…ƒç´ æ‰€åœ¨çš„æ¨¡æ¿æ›´æ–°æ—¶è°ƒç”¨ï¼Œè€Œä¸è®ºç»‘å®šå€¼æ˜¯å¦å˜åŒ–ã€‚é€šè¿‡æ¯”è¾ƒæ›´æ–°å‰åçš„ç»‘å®šå€¼</li>
<li>componentUpdated: è¢«ç»‘å®šå…ƒç´ æ‰€åœ¨æ¨¡æ¿å®Œæˆä¸€æ¬¡æ›´æ–°å‘¨æœŸæ—¶è°ƒç”¨</li>
<li>unbind: åªè°ƒç”¨ä¸€æ¬¡ï¼Œ æŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨</li>
</ul>
<h4 id="å¸¸ä½¿ç”¨çš„è‡ªå®šä¹‰æŒ‡ä»¤"><a href="#å¸¸ä½¿ç”¨çš„è‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="å¸¸ä½¿ç”¨çš„è‡ªå®šä¹‰æŒ‡ä»¤"></a>å¸¸ä½¿ç”¨çš„è‡ªå®šä¹‰æŒ‡ä»¤</h4><ul>
<li><p>é˜²æŠ–æŒ‡ä»¤ v-debounce</p>
<ul>
<li>é˜²æ­¢æŒ‰é’®åœ¨çŸ­æ—¶é—´å†…è¢«å¤šæ¬¡ç‚¹å‡»ï¼Œä½¿ç”¨é˜²æŠ–å‡½æ•°é™åˆ¶è§„å®šæ—¶é—´å†…åªèƒ½ç‚¹å‡»ä¸€æ¬¡<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">const debounce = &#123;</span><br><span class="line">  inserted: function (el, binding) &#123;</span><br><span class="line">    let timer;</span><br><span class="line">    &lt;!-- keyup --&gt;</span><br><span class="line">    el.addEventListener(&apos;click&apos;, () =&gt; &#123;</span><br><span class="line">      if (timer) &#123;</span><br><span class="line">        clearTimeout(timer)</span><br><span class="line">      &#125;</span><br><span class="line">      timer = setTimeout(() =&gt; &#123;</span><br><span class="line">        binding.value()</span><br><span class="line">      &#125;, 1000)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">export default debounce;</span><br><span class="line"></span><br><span class="line">&lt;!-- domä¸­ä½¿ç”¨ --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button v-debounce=&quot;debounceClick&quot;&gt;é˜²æŠ–&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt; </span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    debounceClick () &#123;</span><br><span class="line">      console.log(&apos;åªè§¦å‘ä¸€æ¬¡&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>å®ç°ä¸€ä¸ªå›¾ç‰‡æ‡’åŠ è½½æŒ‡ä»¤ï¼ŒåªåŠ è½½æµè§ˆå™¨å¯è§åŒºåŸŸçš„å›¾ç‰‡</p>
<ul>
<li>å®ç°ä¸€ä¸ªå›¾ç‰‡æ‡’åŠ è½½æŒ‡ä»¤ï¼ŒåªåŠ è½½æµè§ˆå™¨å¯è§åŒºåŸŸçš„å›¾ç‰‡ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">const LazyLoad = &#123;</span><br><span class="line">  // installæ–¹æ³•</span><br><span class="line">  install(Vue, options) &#123;</span><br><span class="line">    const defaultSrc = options.default</span><br><span class="line">    Vue.directive(&apos;lazy&apos;, &#123;</span><br><span class="line">      bind(el, binding) &#123;</span><br><span class="line">        LazyLoad.init(el, binding.value, defaultSrc)</span><br><span class="line">      &#125;,</span><br><span class="line">      inserted(el) &#123;</span><br><span class="line">        if (IntersectionObserver) &#123;</span><br><span class="line">          LazyLoad.observe(el)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          LazyLoad.listenerScroll(el)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  // åˆå§‹åŒ–</span><br><span class="line">  init(el, val, def) &#123;</span><br><span class="line">    el.setAttribute(&apos;src&apos;, val)</span><br><span class="line">    el.setAttribute(&apos;src&apos;, def)</span><br><span class="line">  &#125;,</span><br><span class="line">  // åˆ©ç”¨IntersectionObserverç›‘å¬el</span><br><span class="line">  observe(el) &#123;</span><br><span class="line">    var io = new IntersectionObserver((entries) =&gt; &#123;</span><br><span class="line">      const realSrc = el.dataset.src</span><br><span class="line">      if (entries[0].isIntersecting) &#123;</span><br><span class="line">        if (realSrc) &#123;</span><br><span class="line">          el.src = realSrc</span><br><span class="line">          el.removeAttribute(&apos;src&apos;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    io.observe(el)</span><br><span class="line">  &#125;,</span><br><span class="line">  // ç›‘å¬scrolläº‹ä»¶</span><br><span class="line">  listenerScroll(el) &#123;</span><br><span class="line">    const handler = LazyLoad.throttle(LazyLoad.load, 300)</span><br><span class="line">    LazyLoad.load(el)</span><br><span class="line">    window.addEventListener(&apos;scroll&apos;, () =&gt; &#123;</span><br><span class="line">      handler(el)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  // åŠ è½½çœŸå®å›¾ç‰‡</span><br><span class="line">  load(el) &#123;</span><br><span class="line">    const windowHeight = document.documentElement.clientHeight</span><br><span class="line">    const elTop = el.getBoundingClientRect().top</span><br><span class="line">    const elBtm = el.getBoundingClientRect().bottom</span><br><span class="line">    const realSrc = el.dataset.src</span><br><span class="line">    if (elTop - windowHeight &lt; 0 &amp;&amp; elBtm &gt; 0) &#123;</span><br><span class="line">      if (realSrc) &#123;</span><br><span class="line">        el.src = realSrc</span><br><span class="line">        el.removeAttribute(&apos;src&apos;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  // èŠ‚æµ</span><br><span class="line">  throttle(fn, delay) &#123;</span><br><span class="line">    let timer</span><br><span class="line">    let prevTime</span><br><span class="line">    return function (...args) &#123;</span><br><span class="line">      const currTime = Date.now()</span><br><span class="line">      const context = this</span><br><span class="line">      if (!prevTime) prevTime = currTime</span><br><span class="line">      clearTimeout(timer)</span><br><span class="line"></span><br><span class="line">      if (currTime - prevTime &gt; delay) &#123;</span><br><span class="line">        prevTime = currTime</span><br><span class="line">        fn.apply(context, args)</span><br><span class="line">        clearTimeout(timer)</span><br><span class="line">        return</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      timer = setTimeout(function () &#123;</span><br><span class="line">        prevTime = Date.now()</span><br><span class="line">        timer = null</span><br><span class="line">        fn.apply(context, args)</span><br><span class="line">      &#125;, delay)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default LazyLoad;</span><br><span class="line">&lt;!-- domä¸­ä½¿ç”¨ --&gt;</span><br><span class="line">&lt;img v-LazyLoad=&quot;xxx.jpg&quot; /&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p><a href="https://mp.weixin.qq.com/s/DwmUqgD-y3qXKZ87-RdEDA" target="_blank" rel="noopener">åˆ†äº«8ä¸ªéå¸¸å®ç”¨çš„Vueè‡ªå®šä¹‰æŒ‡ä»¤</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/28/reacté’©å­/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/12/28/reacté’©å­/" itemprop="url">reacté’©å­</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2020-12-28T15:23:21+08:00">
                2020-12-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/å‰ç«¯æ¡†æ¶/" itemprop="url" rel="index">
                    <span itemprop="name">å‰ç«¯æ¡†æ¶</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="reacté’©å­ï¼ˆhooksï¼‰"><a href="#reacté’©å­ï¼ˆhooksï¼‰" class="headerlink" title="reacté’©å­ï¼ˆhooksï¼‰"></a>reacté’©å­ï¼ˆhooksï¼‰</h3><h4 id="reactç»„ä»¶"><a href="#reactç»„ä»¶" class="headerlink" title="reactç»„ä»¶"></a>reactç»„ä»¶</h4><ul>
<li>React çš„æ ¸å¿ƒæ˜¯ç»„ä»¶ã€‚v16.8 ç‰ˆæœ¬ä¹‹å‰ï¼Œç»„ä»¶çš„æ ‡å‡†å†™æ³•æ˜¯ç±»ï¼ˆclassï¼‰</li>
<li>Hook æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§</li>
<li>ä»»ä½•ä¸€ä¸ªç»„ä»¶éƒ½å¯ä»¥ç”¨ç±»å’Œé’©å­æ¥å†™</li>
<li><p>ç±»</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class Welcome extends React.Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;h1&gt;Hello, &#123;this.props.name&#125;&lt;/h1&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>é’©å­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function Welcome(props) &#123;</span><br><span class="line">  return &lt;h1&gt;Hello, &#123;props.name&#125;&lt;/h1&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¤§éƒ¨åˆ†çœ‹åˆ°ä¸Šé¢ä¸¤æ®µä»£ç éƒ½ä¼šé€‰æ‹©ä½¿ç”¨é’©å­ï¼Œæ›´ç®€æ´ã€ä»£ç é‡å°‘ã€ç”¨èµ·æ¥ä¹Ÿè¾ƒè½»ï¼Œä¹Ÿæ›´ç¬¦åˆreact<em>å‡½æ•°å¼éƒ½æœ¬è´¨</em></p>
<ul>
<li>ç±»æœ‰å¾ˆå¤šå¼ºåˆ¶æ€§çš„è¯­æ³•çº¦æŸã€ä¸æ˜“æ··ä¹±ï¼Œæ›´é€‚åˆåˆå­¦è€…</li>
<li>çœŸå®çš„ React App ç”±å¤šä¸ªç±»æŒ‰ç…§å±‚çº§ï¼Œä¸€å±‚å±‚æ„æˆï¼Œå¤æ‚åº¦æˆå€å¢é•¿ã€‚å†åŠ å…¥ Reduxï¼Œå°±å˜å¾—æ›´å¤æ‚</li>
</ul>
</li>
<li>è€Œç±»å°±æ¯”è¾ƒé‡ï¼Œå®˜æ–¹ä¹Ÿæ¨èä½¿ç”¨é’©å­ï¼ˆå‡½æ•°ï¼‰ï¼Œè€Œä¸æ˜¯ç±»<ul>
<li>é’©å­çš„çµæ´»æ€§æ¯”è¾ƒå¤§</li>
<li>react å›¢é˜Ÿå¸Œæœ›ï¼Œç»„ä»¶ä¸è¦å˜æˆå¤æ‚çš„å®¹å™¨ï¼Œæœ€å¥½åªæ˜¯æ•°æ®æµçš„ç®¡é“ã€‚å¼€å‘è€…æ ¹æ®éœ€è¦ï¼Œç»„åˆç®¡é“å³å¯ã€‚ ç»„ä»¶çš„æœ€ä½³å†™æ³•åº”è¯¥æ˜¯å‡½æ•°ï¼Œè€Œä¸æ˜¯ç±»</li>
</ul>
</li>
</ul>
<h4 id="ç±»ã€å‡½æ•°çš„å·®å¼‚"><a href="#ç±»ã€å‡½æ•°çš„å·®å¼‚" class="headerlink" title="ç±»ã€å‡½æ•°çš„å·®å¼‚"></a>ç±»ã€å‡½æ•°çš„å·®å¼‚</h4><ul>
<li>æ¯•ç«Ÿå†™æ³•ä¸åŒï¼Œè¿˜æ˜¯å­˜åœ¨ä¸åŒçš„ç¼–ç¨‹æ–¹æ³•è®º</li>
<li>ç±»æ˜¯<strong>æ•°æ®å’Œé€»è¾‘çš„å°è£…</strong>ï¼Œå³ç»„ä»¶çš„çŠ¶æ€å’Œæ“ä½œæ–¹æ³•æ˜¯å°è£…åœ¨ä¸€èµ·çš„</li>
<li>å‡½æ•°ä¸€èˆ¬æ¥è¯´ï¼Œåªåº”è¯¥åšä¸€ä»¶äº‹ï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªå€¼ï¼Œå¦‚ï¼šreact çš„å‡½æ•°ç»„ä»¶åªåº”è¯¥åšä¸€ä»¶äº‹æƒ…=ã€‹è¿”å›ç»„ä»¶çš„ HTML ä»£ç ï¼Œè€Œæ²¡æœ‰å…¶ä»–çš„åŠŸèƒ½</li>
<li>è¿™ç§åªè¿›è¡Œå•çº¯çš„æ•°æ®è®¡ç®—ï¼ˆæ¢ç®—ï¼‰çš„å‡½æ•°ï¼Œåœ¨å‡½æ•°å¼ç¼–ç¨‹é‡Œé¢ç§°ä¸º â€œçº¯å‡½æ•°â€ï¼ˆpure functionï¼‰</li>
</ul>
<h4 id="å‰¯æ•ˆåº”"><a href="#å‰¯æ•ˆåº”" class="headerlink" title="å‰¯æ•ˆåº”"></a>å‰¯æ•ˆåº”</h4><ul>
<li>å‡½æ•°å¼ç¼–ç¨‹å°†é‚£äº›è·Ÿæ•°æ®è®¡ç®—æ— å…³çš„æ“ä½œï¼Œéƒ½ç§°ä¸º â€œå‰¯æ•ˆåº”â€ ï¼ˆside effectï¼‰ ï¼Œ</li>
<li>å¦‚æœå‡½æ•°å†…éƒ¨ç›´æ¥åŒ…å«äº§ç”Ÿå‰¯æ•ˆåº”çš„æ“ä½œï¼Œå°±ä¸å†æ˜¯çº¯å‡½æ•°äº†ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºä¸çº¯çš„å‡½æ•°ï¼Œå¦‚ï¼ˆç”Ÿæˆæ—¥å¿—ã€å‚¨å­˜æ•°æ®ã€æ”¹å˜åº”ç”¨çŠ¶æ€ç­‰ç­‰ï¼‰</li>
<li>çº¯å‡½æ•°å†…éƒ¨åªæœ‰é€šè¿‡é—´æ¥çš„æ‰‹æ®µï¼ˆå³é€šè¿‡å…¶ä»–å‡½æ•°è°ƒç”¨ï¼‰ï¼Œæ‰èƒ½åŒ…å«å‰¯æ•ˆåº”ï¼Œå¦‚ï¼ˆé’©å­ï¼‰</li>
</ul>
<h4 id="é’©å­ï¼ˆhookï¼‰"><a href="#é’©å­ï¼ˆhookï¼‰" class="headerlink" title="é’©å­ï¼ˆhookï¼‰"></a>é’©å­ï¼ˆhookï¼‰</h4><ul>
<li><strong>reactå‡½æ•°ç»„ä»¶çš„å‰¯æ•ˆåº”è§£å†³æ–¹æ¡ˆï¼Œç”¨æ¥ä¸ºå‡½æ•°ç»„ä»¶å¼•å…¥å‰¯æ•ˆåº”</strong>. å‡½æ•°ç»„ä»¶çš„ä¸»ä½“åªåº”è¯¥ç”¨æ¥è¿”å›ç»„ä»¶çš„ HTML ä»£ç ï¼Œæ‰€æœ‰çš„å…¶ä»–æ“ä½œï¼ˆå‰¯æ•ˆåº”ï¼‰éƒ½å¿…é¡»é€šè¿‡é’©å­å¼•å…¥</li>
<li><p>React ä¸ºè®¸å¤šå¸¸è§çš„æ“ä½œï¼ˆå‰¯æ•ˆåº”ï¼‰ï¼Œéƒ½æä¾›äº†ä¸“ç”¨çš„é’©å­ã€‚</p>
<ul>
<li>useState()ï¼šä¿å­˜çŠ¶æ€</li>
<li><p>useContext()ï¼šä¿å­˜ä¸Šä¸‹æ–‡ï¼ˆå…±äº«çŠ¶æ€é’©å­ï¼‰</p>
<ul>
<li>ç»„ä»¶ä¹‹é—´å…±äº«çŠ¶æ€ï¼Œå¯ä»¥ä½¿ç”¨useContext()</li>
<li><p>ä½¿ç”¨ React Context APIï¼Œåœ¨ç»„ä»¶å¤–éƒ¨å»ºç«‹ä¸€ä¸ª Context</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const AppContext = React.createContext(&#123;&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>AppContext.Provideræä¾›äº†ä¸€ä¸ª Context å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å¯ä»¥è¢«å­ç»„ä»¶å…±äº«</p>
</li>
<li>useContext()é’©å­å‡½æ•°ç”¨æ¥å¼•å…¥ Context å¯¹è±¡ï¼Œä»ä¸­è·å–usernameå±æ€§</li>
</ul>
</li>
<li>useRef()ï¼šä¿å­˜å¼•ç”¨</li>
<li><p>useReducer()ï¼šaction é’©å­</p>
<ul>
<li>React æœ¬èº«ä¸æä¾›çŠ¶æ€ç®¡ç†åŠŸèƒ½ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨å¤–éƒ¨åº“ã€‚è¿™æ–¹é¢æœ€å¸¸ç”¨çš„åº“æ˜¯ Redux</li>
<li>Redux çš„æ ¸å¿ƒæ¦‚å¿µæ˜¯ï¼Œç»„ä»¶å‘å‡º action ä¸çŠ¶æ€ç®¡ç†å™¨é€šä¿¡ã€‚çŠ¶æ€ç®¡ç†å™¨æ”¶åˆ° action ä»¥åï¼Œä½¿ç”¨ Reducer å‡½æ•°ç®—å‡ºæ–°çš„çŠ¶æ€ï¼ŒReducer å‡½æ•°çš„å½¢å¼æ˜¯(state, action) =&gt; newState</li>
<li><p>useReducer()çš„åŸºæœ¬ç”¨æ³•ï¼Œå®ƒæ¥å— Reducer å‡½æ•°å’ŒçŠ¶æ€çš„åˆå§‹å€¼ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ã€‚æ•°ç»„çš„ç¬¬ä¸€ä¸ªå€¼æ˜¯çŠ¶æ€çš„å½“å‰å€¼ï¼Œç¬¬äºŒä¸ªå€¼æ˜¯å‘é€ action çš„dispatchå‡½æ•°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; useContext &#125; from &apos;react&apos;;</span><br><span class="line">import ReactDOM from &apos;react-dom&apos;;</span><br><span class="line">const [state, dispatch] = useReducer(reducer, initialState);</span><br><span class="line">const myReducer = (state, action) =&gt; &#123;</span><br><span class="line">  switch(action.type)  &#123;</span><br><span class="line">    case(&apos;countUp&apos;):</span><br><span class="line">      return  &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        count: state.count + 1</span><br><span class="line">      &#125;</span><br><span class="line">    default:</span><br><span class="line">      return  state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">function App() &#123;</span><br><span class="line">  const [state, dispatch] = useReducer(myReducer, &#123; count:   0 &#125;);</span><br><span class="line">  return  (</span><br><span class="line">    &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">      &lt;button onClick=&#123;() =&gt; dispatch(&#123; type: &apos;countUp&apos; &#125;)&#125;&gt;</span><br><span class="line">        +1</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">      &lt;p&gt;Count: &#123;state.count&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Hooks å¯ä»¥æä¾›å…±äº«çŠ¶æ€å’Œ Reducer å‡½æ•°ï¼Œæ‰€ä»¥å®ƒåœ¨è¿™äº›æ–¹é¢å¯ä»¥å–ä»£ Reduxã€‚ä½†æ˜¯ï¼Œå®ƒæ²¡æ³•æä¾›ä¸­é—´ä»¶ï¼ˆmiddlewareï¼‰å’Œæ—¶é—´æ—…è¡Œï¼ˆtime travelï¼‰ï¼Œå¦‚æœä½ éœ€è¦è¿™ä¸¤ä¸ªåŠŸèƒ½ï¼Œè¿˜æ˜¯è¦ç”¨ Redux</p>
</li>
</ul>
</li>
<li>ä»¥ä¸Šé’©å­éƒ½æ˜¯å¼•å…¥æŸç§ç‰¹å®šçš„å‰¯æ•ˆåº”ï¼Œè€Œ useEffect()æ˜¯é€šç”¨çš„å‰¯æ•ˆåº”é’©</li>
<li><a href="https://react.docschina.org/docs/hooks-reference.html" target="_blank" rel="noopener">â€¦â€¦</a></li>
</ul>
</li>
</ul>
<h4 id="useEffect-çš„ç”¨æ³•"><a href="#useEffect-çš„ç”¨æ³•" class="headerlink" title="useEffect() çš„ç”¨æ³•"></a>useEffect() çš„ç”¨æ³•</h4><ul>
<li>useEffect Hook çœ‹åš componentDidMountï¼ŒcomponentDidUpdate å’Œ componentWillUnmount è¿™ä¸‰ä¸ªå‡½æ•°çš„ç»„åˆ</li>
<li>useEffect()æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”± React æ¡†æ¶æä¾›ï¼Œåœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨è°ƒç”¨å³å¯</li>
<li><p>useEffect()çš„ä½œç”¨å°±æ˜¯æŒ‡å®šä¸€ä¸ªå‰¯æ•ˆåº”å‡½æ•°ï¼Œç»„ä»¶æ¯æ¸²æŸ“ä¸€æ¬¡ï¼Œè¯¥å‡½æ•°å°±è‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡ã€‚ç»„ä»¶é¦–æ¬¡åœ¨ç½‘é¡µ DOM åŠ è½½åï¼Œå‰¯æ•ˆåº”å‡½æ•°ä¹Ÿä¼šæ‰§è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; useEffect &#125; from &apos;react&apos;;</span><br><span class="line"></span><br><span class="line">function Welcome(props) &#123;</span><br><span class="line">  let [count, setCount] = useState(1); // æ•°ç»„è§£æ„</span><br><span class="line">  // ä»¥ä¸Šä»£ç ç­‰ä»·äº</span><br><span class="line">  // let countStateVariable = React.useState(1); // è¿”å›ä¸€ä¸ªæœ‰ä¸¤ä¸ªå…ƒç´ çš„æ•°ç»„</span><br><span class="line">  // let count = countStateVariable[0]; // æ•°ç»„é‡Œçš„ç¬¬ä¸€ä¸ªå€¼ å½“å‰çš„state</span><br><span class="line">  // let setCount = countStateVariable[1]; // æ•°ç»„é‡Œçš„ç¬¬äºŒä¸ªå€¼ æ›´æ–°stateçš„å‡½æ•°</span><br><span class="line">  // ä½¿ç”¨ [0] å’Œ [1] æ¥è®¿é—®æœ‰ç‚¹ä»¤äººå›°æƒ‘ï¼Œå› ä¸ºå®ƒä»¬æœ‰ç‰¹å®šçš„å«ä¹‰ã€‚è¿™å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨æ•°ç»„è§£æ„çš„åŸå› ã€‚</span><br><span class="line"></span><br><span class="line">  useEffect(() =&gt; &#123;</span><br><span class="line">    document.title = `you click $&#123;count&#125; times`;</span><br><span class="line">  &#125;,)</span><br><span class="line">  return &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;hello, &#123; props.title &#125;,&#123;count&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;ç´¯åŠ &lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>useEffect() çš„ç¬¬äºŒä¸ªå‚æ•°,ä¸å¸Œæœ›useEffect()æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨å®ƒçš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½¿ç”¨ä¸€ä¸ªæ•°ç»„æŒ‡å®šå‰¯æ•ˆåº”å‡½æ•°çš„ä¾èµ–é¡¹ï¼Œåªæœ‰ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–ï¼Œæ‰ä¼šé‡æ–°æ¸²æŸ“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function Welcome(props) &#123;</span><br><span class="line">  useEffect(() =&gt; &#123;</span><br><span class="line">    document.title = `Hello, $&#123;props.name&#125;`;</span><br><span class="line">  &#125;, [props.name]);</span><br><span class="line">  return &lt;h1&gt;Hello, &#123;props.name&#125;&lt;/h1&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="useEffect-çš„ç”¨é€”"><a href="#useEffect-çš„ç”¨é€”" class="headerlink" title="useEffect() çš„ç”¨é€”"></a>useEffect() çš„ç”¨é€”</h3><ul>
<li>åªè¦æ˜¯å‰¯æ•ˆåº”ï¼Œéƒ½å¯ä»¥ä½¿ç”¨useEffect()å¼•å…¥ã€‚å®ƒçš„å¸¸è§ç”¨é€”æœ‰ä¸‹é¢å‡ ç§ã€‚<ul>
<li>è·å–æ•°æ®ï¼ˆdata fetchingï¼‰</li>
<li>äº‹ä»¶ç›‘å¬æˆ–è®¢é˜…ï¼ˆsetting up a subscriptionï¼‰</li>
<li>æ”¹å˜ DOMï¼ˆchanging the DOMï¼‰</li>
<li>è¾“å‡ºæ—¥å¿—ï¼ˆloggingï¼‰</li>
</ul>
</li>
</ul>
<h4 id="useEffect-çš„è¿”å›å€¼"><a href="#useEffect-çš„è¿”å›å€¼" class="headerlink" title="useEffect() çš„è¿”å›å€¼"></a>useEffect() çš„è¿”å›å€¼</h4><ul>
<li>å‰¯æ•ˆåº”æ˜¯éšç€ç»„ä»¶åŠ è½½è€Œå‘ç”Ÿçš„ï¼Œé‚£ä¹ˆç»„ä»¶å¸è½½æ—¶ï¼Œå¯èƒ½éœ€è¦æ¸…ç†è¿™äº›å‰¯æ•ˆåº”</li>
<li>useEffect()å…è®¸è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶ï¼Œæ‰§è¡Œè¯¥å‡½æ•°ï¼Œæ¸…ç†å‰¯æ•ˆåº”ã€‚å¦‚æœä¸éœ€è¦æ¸…ç†å‰¯æ•ˆåº”ï¼ŒuseEffect()å°±ä¸ç”¨è¿”å›ä»»ä½•å€¼</li>
<li>useEffect()åœ¨ç»„ä»¶åŠ è½½æ—¶è®¢é˜…äº†ä¸€ä¸ªäº‹ä»¶ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•°ï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶å–æ¶ˆè®¢é˜…ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">useEffect(() =&gt; &#123;</span><br><span class="line">  const subscription = props.source.subscribe();</span><br><span class="line">  return () =&gt; &#123;</span><br><span class="line">    subscription.unsubscribe();</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, [props.source]);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="useEffect-çš„æ³¨æ„ç‚¹"><a href="#useEffect-çš„æ³¨æ„ç‚¹" class="headerlink" title="useEffect() çš„æ³¨æ„ç‚¹"></a>useEffect() çš„æ³¨æ„ç‚¹</h4><ul>
<li><a href="https://react.docschina.org/docs/hooks-rules.html" target="_blank" rel="noopener">äº†è§£Hookè§„åˆ™</a></li>
<li>ä½¿ç”¨useEffect()æ—¶ï¼Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ã€‚å¦‚æœæœ‰å¤šä¸ªå‰¯æ•ˆåº”ï¼Œåº”è¯¥è°ƒç”¨å¤šä¸ªuseEffect()ï¼Œè€Œä¸åº”è¯¥åˆå¹¶å†™åœ¨ä¸€èµ·<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function App() &#123;</span><br><span class="line">  const [varA, setVarA] = useState(0);</span><br><span class="line">  const [varB, setVarB] = useState(0);</span><br><span class="line"></span><br><span class="line">  useEffect(() =&gt; &#123;</span><br><span class="line">    const timeout = setTimeout(() =&gt; setVarA(varA + 1), 1000);</span><br><span class="line">    return () =&gt; clearTimeout(timeout);</span><br><span class="line">  &#125;, [varA]);</span><br><span class="line"></span><br><span class="line">  useEffect(() =&gt; &#123;</span><br><span class="line">    const timeout = setTimeout(() =&gt; setVarB(varB + 2), 2000);</span><br><span class="line"></span><br><span class="line">    return () =&gt; clearTimeout(timeout);</span><br><span class="line">  &#125;, [varB]);</span><br><span class="line"></span><br><span class="line">  return &lt;span&gt;&#123;varA&#125;, &#123;varB&#125;&lt;/span&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="learn-moreâ€¦"><a href="#learn-moreâ€¦" class="headerlink" title="learn moreâ€¦"></a><a href="http://www.ruanyifeng.com/blog/2020/09/react-hooks-useeffect-tutorial.html" target="_blank" rel="noopener">learn moreâ€¦</a></h4><h4 id="learn-moreâ€¦-1"><a href="#learn-moreâ€¦-1" class="headerlink" title="learn moreâ€¦"></a><a href="http://www.ruanyifeng.com/blog/2019/09/react-hooks.html" target="_blank" rel="noopener">learn moreâ€¦</a></h4><h3 id="code"><a href="#code" class="headerlink" title="code"></a><a href="https://github.com/yongfeng-peng/react-simple-sCode" target="_blank" rel="noopener">code</a></h3>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/23/reactåŸç†/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/12/23/reactåŸç†/" itemprop="url">reactåŸç†</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2020-12-23T14:25:09+08:00">
                2020-12-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/å‰ç«¯æ¡†æ¶/" itemprop="url" rel="index">
                    <span itemprop="name">å‰ç«¯æ¡†æ¶</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="reactåŸç†å‰–æ"><a href="#reactåŸç†å‰–æ" class="headerlink" title="reactåŸç†å‰–æ"></a>reactåŸç†å‰–æ</h3><h4 id="æ ¸å¿ƒAPI"><a href="#æ ¸å¿ƒAPI" class="headerlink" title="æ ¸å¿ƒAPI"></a><a href="https://github.com/facebook/react/blob/master/packages/react/src/React.js" target="_blank" rel="noopener">æ ¸å¿ƒAPI</a></h4><ul>
<li>React.createElementï¼šåˆ›å»ºè™šæ‹Ÿçš„DOM</li>
<li>React.Component: å®ç°è‡ªå®šä¹‰ç»„ä»¶</li>
<li>ReactDOM.render: æ¸²æŸ“çœŸå®DOM</li>
</ul>
<ul>
<li><a href="https://github.com/facebook/react/blob/master/packages/react-dom/src/client/ReactDOM.js" target="_blank" rel="noopener">react-dom</a>ï¼šä¸»è¦æ˜¯renderé€»è¾‘</li>
</ul>
<h4 id="JSXæ˜¯ä»€ä¹ˆ"><a href="#JSXæ˜¯ä»€ä¹ˆ" class="headerlink" title="JSXæ˜¯ä»€ä¹ˆ"></a>JSXæ˜¯ä»€ä¹ˆ</h4><ul>
<li><a href="https://reactjs.org/" target="_blank" rel="noopener">åœ¨çº¿JSXé¢„ç¼–è¯‘</a></li>
<li>reactä½¿ç”¨JSXæ¥æ›¿ä»£å¸¸è§„çš„JavaScriptï¼ŒJSXæ˜¯ä¸€ä¸ªçœ‹èµ·æ¥å¾ˆåƒXMLçš„JavaScriptè¯­æ³•æ‰©å±•<h4 id="ä¸ºä»€ä¹ˆéœ€è¦JXS"><a href="#ä¸ºä»€ä¹ˆéœ€è¦JXS" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦JXS"></a>ä¸ºä»€ä¹ˆéœ€è¦JXS</h4></li>
<li>JSXæ‰§è¡Œæ›´å¿«ï¼Œå› ä¸ºå®ƒåœ¨ç¼–è¯‘ä¸ºJavaScriptä»£ç åè¿›è¡Œäº†ä¼˜åŒ–ï¼ˆåœ¨reacté‡Œé¢å¯ä»¥ç”¨å®ƒæè¿°è§†å›¾ï¼‰</li>
<li>å®ƒæ˜¯<strong>ç±»å‹å®‰å…¨</strong>çš„ï¼Œåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å°±èƒ½å‘ç°é”™è¯¯ï¼ˆç¼–è¯‘å™¨å¯ä»¥å¯¹å®ƒè¿›è¡Œè§„èŒƒå¤„ç†ã€ä¸€ç³»åˆ—ä¸¥è°¨è½¬æ¢ã€ç±»å‹æ£€æµ‹ï¼‰</li>
<li>ä½¿ç”¨JSXç¼–å†™æ¨¡ç‰ˆæ›´åŠ ç®€å•å¿«æ·ï¼ˆå¼€å‘æ•ˆç‡ï¼‰<h4 id="JXSæ€ä¹ˆç”¨"><a href="#JXSæ€ä¹ˆç”¨" class="headerlink" title="JXSæ€ä¹ˆç”¨"></a>JXSæ€ä¹ˆç”¨</h4></li>
<li>åŸç†ï¼šbabel-loaderä¼šé¢„ç¼–è¯‘JSXä¸ºReact.createElement(â€¦)</li>
</ul>
<h4 id="setState"><a href="#setState" class="headerlink" title="setState"></a>setState</h4><ul>
<li>classç»„ä»¶çš„ç‰¹ç‚¹ï¼Œå°±æ˜¯æ‹¥æœ‰ç‰¹æ®ŠçŠ¶æ€å¹¶ä¸”å¯ä»¥é€šè¿‡setStateæ›´æ–°çŠ¶æ€ï¼Œä»è€Œé‡æ–°æ¸²æŸ“è§†å›¾ï¼Œæ˜¯å­¦ä¹ Reactä¸­æœ€é‡è¦çš„api</li>
<li>setStateå¹¶æ²¡æœ‰ç›´æ¥æ“ä½œå»æ¸²æŸ“ï¼Œè€Œæ˜¯æ‰§è¡Œäº†ä¸€ä¸ªå¼‚æ­¥çš„updateré˜Ÿåˆ—,ä½¿ç”¨ä¸€ä¸ªç±»æ¥ä¸“é—¨ç®¡ç†</li>
</ul>
<h4 id="è™šæ‹Ÿdom"><a href="#è™šæ‹Ÿdom" class="headerlink" title="è™šæ‹Ÿdom"></a>è™šæ‹Ÿdom</h4><ul>
<li>ç”¨JavaScriptå¯¹è±¡è¡¨ç¤ºDOMä¿¡æ¯å’Œç»“æ„ï¼Œå½“çŠ¶æ€å˜æ›´çš„æ—¶å€™ï¼Œé‡æ–°æ¸²æŸ“è¿™ä¸ªJavaScriptçš„å¯¹è±¡ç»“æ„ã€‚è¿™ä¸ªJavaScriptå¯¹è±¡ç§°ä¸ºvirtual dom</li>
<li>ç®€å•çš„è¯´è™šæ‹Ÿdomå°±æ˜¯jså¯¹è±¡ï¼Œå¯ä»¥æè¿°dom<br><img src="https://raw.githubusercontent.com/yongfeng-peng/yongfeng-peng.github.io/dev/source/images/vdom.jpg" alt="Image text"><!-- * ![Image text](/../images/vdom.jpg) -->
</li>
</ul>
<h4 id="diffç®—æ³•"><a href="#diffç®—æ³•" class="headerlink" title="diffç®—æ³•"></a>diffç®—æ³•</h4><ul>
<li>diffç­–ç•¥<ul>
<li>åŒçº§æ¯”è¾ƒï¼ŒWeb UI ä¸­ DOM èŠ‚ç‚¹è·¨å±‚çº§çš„ç§»åŠ¨æ“ä½œç‰¹åˆ«å°‘ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡</li>
<li>æ‹¥æœ‰ç›¸åŒç±»çš„ä¸¤ä¸ªç»„ä»¶å°†ä¼šç”Ÿæˆç›¸ä¼¼çš„æ ‘å½¢ç»“æ„ï¼Œæ‹¥æœ‰ä¸åŒç±»çš„ä¸¤ä¸ªç»„ä»¶å°†ä¼šç”Ÿæˆä¸åŒçš„æ ‘å½¢ç»“æ„ã€‚ä¾‹å¦‚ï¼šdiv-&gt;p, CompA-&gt;CompB</li>
<li>å¯¹äºåŒä¸€å±‚çº§çš„ä¸€ç»„å­èŠ‚ç‚¹ï¼Œé€šè¿‡å”¯ä¸€çš„keyè¿›è¡ŒåŒºåˆ†</li>
</ul>
</li>
<li>åŸºäºä»¥ä¸Šä¸‰ä¸ªå‰æç­–ç•¥ï¼ŒReact åˆ†åˆ«å¯¹ tree diffã€component diff ä»¥åŠ element diff è¿›è¡Œç®—æ³•ä¼˜åŒ–ï¼Œäº‹å®ä¹Ÿè¯æ˜ï¼Œè¿™ä¸‰ä¸ªå‰æç­–ç•¥æ˜¯åˆç†ä¸”å‡†ç¡®çš„ï¼Œå®ƒä¿è¯äº†æ•´ä½“ç•Œé¢æ„å»ºçš„æ€§èƒ½</li>
<li>element diff å·®å¼‚ç±»å‹ï¼š<ul>
<li>æ›¿æ¢åŸæ¥çš„èŠ‚ç‚¹ï¼Œä¾‹å¦‚æŠŠdivæ¢æˆäº†pï¼ŒComp1æ¢æˆComp2</li>
<li>ç§»åŠ¨ã€åˆ é™¤ã€æ–°å¢å­èŠ‚ç‚¹ï¼Œ ä¾‹å¦‚ulä¸­çš„å¤šä¸ªå­èŠ‚ç‚¹liä¸­å‡ºç°äº†é¡ºåºäº’æ¢</li>
<li>ä¿®æ”¹äº†èŠ‚ç‚¹çš„å±æ€§ï¼Œä¾‹å¦‚èŠ‚ç‚¹ç±»åå‘ç”Ÿäº†å˜åŒ–</li>
<li>å¯¹äºæ–‡æœ¬èŠ‚ç‚¹ï¼Œæ–‡æœ¬å†…å®¹å¯èƒ½ä¼šæ”¹å˜</li>
</ul>
</li>
<li>é‡æ’ï¼ˆreorderï¼‰æ“ä½œï¼šINSERT_MARKUPï¼ˆæ’å…¥ï¼‰ã€MOVE_EXISTINGï¼ˆç§»åŠ¨ï¼‰å’Œ REMOVE_NODEï¼ˆåˆ é™¤ï¼‰<ul>
<li>INSERT_MARKUPï¼Œæ–°çš„ component ç±»å‹ä¸åœ¨è€é›†åˆé‡Œï¼Œ å³æ˜¯å…¨æ–°çš„èŠ‚ç‚¹ï¼Œéœ€è¦å¯¹æ–°èŠ‚ç‚¹æ‰§è¡Œæ’å…¥æ“ä½œ</li>
<li>MOVE_EXISTINGï¼Œåœ¨è€é›†åˆæœ‰æ–° component ç±»å‹ï¼Œä¸” element æ˜¯å¯æ›´æ–°çš„ç±»å‹ï¼ŒgenerateComponentChildren å·²è°ƒç”¨ receiveComponentï¼Œè¿™ç§æƒ…å†µä¸‹ prevChild=nextChildï¼Œå°±éœ€è¦åšç§»åŠ¨æ“ä½œï¼Œå¯ä»¥å¤ç”¨ä»¥å‰çš„   DOM èŠ‚ç‚¹</li>
<li>REMOVE_NODEï¼Œè€ component ç±»å‹ï¼Œåœ¨æ–°é›†åˆé‡Œä¹Ÿæœ‰ï¼Œä½†å¯¹åº”çš„ element ä¸åŒåˆ™ä¸èƒ½ç›´æ¥å¤ç”¨å’Œæ›´æ–°ï¼Œéœ€è¦æ‰§è¡Œåˆ é™¤æ“ä½œï¼Œæˆ–è€…è€ component ä¸åœ¨æ–°é›†åˆé‡Œçš„ï¼Œä¹Ÿéœ€è¦æ‰§è¡Œåˆ é™¤æ“ä½œ</li>
</ul>
</li>
<li>ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿdomå’Œå¯¹diffç®—æ³•ç†è§£<ul>
<li>æŠ½è±¡å‡ºè™šæ‹Ÿdomå±‚ï¼Œå‡å°‘é‡å¸ƒå±€ã€é‡æ’ã€é‡ç»˜æ¬¡æ•°ï¼Œä¸ç›´æ¥æ›´æ–°çœŸå®dom</li>
<li>æ¯”è¾ƒå‡ºåº”ä¸åº”è¯¥æ›´æ–°domï¼Œå³ä½¿æ›´æ–°ï¼Œå°½å¯èƒ½çš„ä¸€æ¬¡æ€§ã€æ‰¹é‡çš„æ›´æ–°</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/22/reactç”Ÿå‘½å‘¨æœŸ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/12/22/reactç”Ÿå‘½å‘¨æœŸ/" itemprop="url">reactç”Ÿå‘½å‘¨æœŸ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2020-12-22T09:52:44+08:00">
                2020-12-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/å‰ç«¯æ¡†æ¶/" itemprop="url" rel="index">
                    <span itemprop="name">å‰ç«¯æ¡†æ¶</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="reactç”Ÿå‘½å‘¨æœŸ-å›¾è°±"><a href="#reactç”Ÿå‘½å‘¨æœŸ-å›¾è°±" class="headerlink" title="reactç”Ÿå‘½å‘¨æœŸ å›¾è°±"></a>reactç”Ÿå‘½å‘¨æœŸ <a href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" target="_blank" rel="noopener">å›¾è°±</a></h3><h4 id="react-v16-0å‰çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#react-v16-0å‰çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="react v16.0å‰çš„ç”Ÿå‘½å‘¨æœŸ"></a>react v16.0å‰çš„ç”Ÿå‘½å‘¨æœŸ</h4><ul>
<li>å¤§éƒ¨åˆ†å›¢é˜Ÿä¸è§å¾—ä¼šè·Ÿè¿›å‡åˆ°16ç‰ˆæœ¬ï¼Œæ‰€ä»¥16å‰çš„ç”Ÿå‘½å‘¨æœŸè¿˜æ˜¯å¾ˆæœ‰å¿…è¦æŒæ¡çš„ï¼Œä½•å†µ16ä¹Ÿæ˜¯åŸºäºä¹‹å‰çš„ä¿®æ”¹</li>
<li><p>ç¬¬ä¸€ç»„ä»¶åˆå§‹åŒ–(initialization)é˜¶æ®µ</p>
<ul>
<li>ç±»çš„æ„é€ æ–¹æ³•( constructor() ),Testç±»ç»§æ‰¿äº†react Componentè¿™ä¸ªåŸºç±»ï¼Œå³ç»§æ‰¿è¿™ä¸ª<strong>reactçš„åŸºç±»</strong>ï¼Œæ‰èƒ½æœ‰render(),ç”Ÿå‘½å‘¨æœŸç­‰æ–¹æ³•å¯ä»¥ä½¿ç”¨ï¼Œ ä¹Ÿæ˜¯å‡½æ•°ç»„ä»¶ä¸èƒ½ä½¿ç”¨è¿™äº›æ–¹æ³•çš„åŸå› ã€‚</li>
<li>super(props) ç”¨æ¥è°ƒç”¨åŸºç±»çš„æ„é€ æ–¹æ³•( constructor() ), ä¹Ÿå°†çˆ¶ç»„ä»¶çš„propsæ³¨å…¥ç»™å­ç»„ä»¶ï¼Œä¾›å­ç»„ä»¶è¯»å–(ç»„ä»¶ä¸­propsåªè¯»ä¸å¯å˜ï¼Œstateå¯å˜)ã€‚ è€Œ constructor() ç”¨æ¥åšä¸€äº›ç»„ä»¶çš„åˆå§‹åŒ–å·¥ä½œï¼Œå¦‚å®šä¹‰this.stateçš„åˆå§‹å†…å®¹<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;;</span><br><span class="line">class Test extends Component &#123; </span><br><span class="line">  constructor(props) &#123; </span><br><span class="line">    super(props); </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>ç¬¬äºŒç»„ä»¶çš„æŒ‚è½½(Mounting)é˜¶æ®µ</p>
<ul>
<li>æ­¤é˜¶æ®µåˆ†ä¸ºcomponentWillMountï¼Œrenderï¼ŒcomponentDidMountä¸‰ä¸ªæ—¶æœŸ</li>
<li>componentWillMount<ul>
<li>åœ¨ç»„ä»¶æŒ‚è½½åˆ°DOMå‰è°ƒç”¨ï¼Œä¸”åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œåœ¨è¿™è¾¹è°ƒç”¨<strong>this.setStateä¸ä¼šå¼•èµ·ç»„ä»¶é‡æ–°æ¸²æŸ“</strong>ï¼Œå¯æŠŠè¿™é‡Œçš„å†…å®¹æå‰åˆ°constructor()ä¸­ï¼Œæ‰€ä»¥é¡¹ç›®ä¸­å¾ˆå°‘ç”¨</li>
</ul>
</li>
<li>render<ul>
<li>æ ¹æ®ç»„ä»¶çš„propså’Œstateï¼ˆæ— ä¸¤è€…çš„é‡ä¼ é€’å’Œé‡èµ‹å€¼ï¼Œè®ºå€¼æ˜¯å¦æœ‰å˜åŒ–ï¼Œéƒ½å¯ä»¥å¼•èµ·ç»„ä»¶é‡æ–°renderï¼‰ ï¼Œreturnä¸€ä¸ªReactå…ƒç´ ï¼ˆæè¿°ç»„ä»¶ï¼Œå³UIï¼‰ï¼Œä¸è´Ÿè´£ç»„ä»¶å®é™…æ¸²æŸ“å·¥ä½œï¼Œä¹‹åç”±Reactè‡ªèº«æ ¹æ®æ­¤å…ƒç´ å»æ¸²æŸ“å‡ºé¡µé¢<br>DOMã€‚renderæ˜¯çº¯å‡½æ•°ï¼ˆPure functionï¼šå‡½æ•°çš„è¿”å›ç»“æœåªä¾èµ–äºå®ƒçš„å‚æ•°ï¼›å‡½æ•°æ‰§è¡Œè¿‡ç¨‹é‡Œé¢æ²¡æœ‰å‰¯ä½œç”¨ï¼‰ï¼Œä¸èƒ½åœ¨é‡Œé¢æ‰§è¡Œthis.setStateï¼Œä¼šæœ‰æ”¹å˜ç»„ä»¶çŠ¶æ€çš„å‰¯ä½œç”¨</li>
</ul>
</li>
<li>componentDidMount<ul>
<li>ç»„ä»¶æŒ‚è½½åˆ°DOMåè°ƒç”¨ï¼Œä¸”åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡</li>
</ul>
</li>
</ul>
</li>
<li><p>ç¬¬ä¸‰ç»„ä»¶çš„æ›´æ–°(update)é˜¶æ®µ</p>
<ul>
<li>æ­¤é˜¶æ®µåˆ†ä¸ºcomponentWillReceivePropsï¼ŒshouldComponentUpdateï¼ŒcomponentWillUpdateï¼Œrenderï¼ŒcomponentDidUpdate</li>
<li>componentWillReceiveProps(nextProps)<ul>
<li>åªè°ƒç”¨äºpropså¼•èµ·çš„ç»„ä»¶æ›´æ–°è¿‡ç¨‹ä¸­ï¼Œå‚æ•°nextPropsæ˜¯çˆ¶ç»„ä»¶ä¼ ç»™å½“å‰ç»„ä»¶çš„æ–°propsã€‚ä½†çˆ¶ç»„ä»¶renderæ–¹æ³•çš„è°ƒç”¨ä¸èƒ½ä¿è¯é‡ä¼ ç»™å½“å‰ç»„ä»¶çš„propsæ˜¯æœ‰å˜åŒ–çš„ï¼Œæ‰€ä»¥åœ¨æ­¤æ–¹æ³•ä¸­æ ¹æ®nextPropså’Œthis.propsæ¥æŸ¥æ˜é‡ä¼ çš„propsæ˜¯å¦æ”¹å˜ï¼Œä»¥åŠå¦‚æœæ”¹å˜äº†è¦æ‰§è¡Œå•¥ï¼Œæ¯”å¦‚æ ¹æ®æ–°çš„propsè°ƒç”¨this.setStateå‡ºå‘å½“å‰ç»„ä»¶çš„é‡æ–°render</li>
</ul>
</li>
<li>shouldComponentUpdate(nextProps, nextState)<ul>
<li>é€šè¿‡æ¯”è¾ƒnextPropsï¼ŒnextStateåŠå½“å‰ç»„ä»¶çš„this.propsï¼Œthis.stateï¼Œè¿”å›trueæ—¶å½“å‰ç»„ä»¶å°†ç»§ç»­æ‰§è¡Œæ›´æ–°è¿‡ç¨‹ï¼Œè¿”å›falseåˆ™å½“å‰ç»„ä»¶æ›´æ–°åœæ­¢ï¼Œä»¥æ­¤å¯ç”¨æ¥å‡å°‘ç»„ä»¶çš„ä¸å¿…è¦æ¸²æŸ“ï¼Œä¼˜åŒ–ç»„ä»¶æ€§èƒ½</li>
<li>psï¼šè¿™è¾¹ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå°±ç®—componentWillReceiveProps()ä¸­æ‰§è¡Œäº†this.setStateï¼Œæ›´æ–°äº†stateï¼Œä½†åœ¨renderå‰ï¼ˆå¦‚shouldComponentUpdateï¼ŒcomponentWillUpdateï¼‰ï¼Œthis.stateä¾ç„¶æŒ‡å‘æ›´æ–°å‰çš„stateï¼Œä¸ç„¶nextStateåŠå½“å‰ç»„ä»¶çš„this.stateçš„å¯¹æ¯”å°±ä¸€ç›´æ˜¯trueäº†</li>
</ul>
</li>
<li>componentWillUpdate(nextProps, nextState)<ul>
<li>åœ¨è°ƒç”¨renderæ–¹æ³•å‰æ‰§è¡Œï¼Œåœ¨è¿™è¾¹å¯æ‰§è¡Œä¸€äº›ç»„ä»¶æ›´æ–°å‘ç”Ÿå‰çš„å·¥ä½œï¼Œä¸€èˆ¬è¾ƒå°‘ç”¨</li>
</ul>
</li>
<li>render<ul>
<li>renderæ–¹æ³•åœ¨ä¸Šæ–‡è®²è¿‡ï¼Œè¿™è¾¹åªæ˜¯é‡æ–°è°ƒç”¨</li>
</ul>
</li>
<li>componentDidUpdate(prevProps, prevState)<ul>
<li>åœ¨ç»„ä»¶æ›´æ–°åè¢«è°ƒç”¨ï¼Œå¯ä»¥æ“ä½œç»„ä»¶æ›´æ–°çš„DOMï¼ŒprevPropså’ŒprevStateè¿™ä¸¤ä¸ªå‚æ•°æŒ‡çš„æ˜¯ç»„ä»¶æ›´æ–°å‰çš„propså’Œstate</li>
</ul>
</li>
<li><p>äº†è§£æ­¤é˜¶æ®µå‰éœ€è¦å…ˆæ˜ç¡®ä¸‹reactç»„ä»¶æ›´æ–°æœºåˆ¶ã€‚setStateå¼•èµ·çš„stateæ›´æ–°æˆ–çˆ¶ç»„ä»¶é‡æ–°renderå¼•èµ·çš„propsæ›´æ–°ï¼Œæ›´æ–°åçš„stateå’Œpropsç›¸å¯¹ä¹‹å‰æ— è®ºæ˜¯å¦æœ‰å˜åŒ–ï¼Œéƒ½å°†å¼•èµ·å­ç»„ä»¶çš„é‡æ–°renderã€‚è¯¦ç»†å¯çœ‹<a href="https://www.cnblogs.com/penghuwan/p/6707254.html&#39;" target="_blank" rel="noopener">è¿™ç¯‡æ–‡ç« </a>é€ æˆç»„ä»¶æ›´æ–°æœ‰ä¸¤ç±»ï¼ˆä¸‰ç§ï¼‰æƒ…å†µï¼š<br>1.çˆ¶ç»„ä»¶é‡æ–°renderï¼ˆçˆ¶ç»„ä»¶é‡æ–°renderå¼•èµ·å­ç»„ä»¶é‡æ–°renderçš„æƒ…å†µæœ‰ä¸¤ç§ï¼‰<br>a. ç›´æ¥ä½¿ç”¨,æ¯å½“çˆ¶ç»„ä»¶é‡æ–°renderå¯¼è‡´çš„é‡ä¼ propsï¼Œå­ç»„ä»¶å°†ç›´æ¥è·Ÿç€é‡æ–°æ¸²æŸ“ï¼Œæ— è®ºpropsæ˜¯å¦æœ‰å˜åŒ–ã€‚å¯é€šè¿‡shouldComponentUpdateæ–¹æ³•ä¼˜åŒ–</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class Child extends Component &#123; </span><br><span class="line">  shouldComponentUpdate(nextProps)&#123; // åº”è¯¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¦åˆ™æ— è®ºpropsæ˜¯å¦æœ‰å˜åŒ–éƒ½å°†ä¼šå¯¼è‡´ç»„ä»¶ è·Ÿç€é‡æ–°æ¸²æŸ“</span><br><span class="line">    if(nextProps.someThings === this.props.someThings) &#123; </span><br><span class="line">      return false;</span><br><span class="line">    &#125; </span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123; </span><br><span class="line">    return &lt;div&gt;&#123;this.props.someThings&#125;&lt;/div&gt; </span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>b.åœ¨componentWillReceivePropsæ–¹æ³•ä¸­ï¼Œå°†propsè½¬æ¢æˆè‡ªå·±çš„state</p>
<ul>
<li>å‡½æ•°(componentWillReceiveProps)ä¸­è°ƒç”¨ this.setState() å°†ä¸ä¼šå¼•èµ·ç¬¬äºŒæ¬¡æ¸²æŸ“</li>
<li>componentWillReceivePropsä¸­åˆ¤æ–­propsæ˜¯å¦å˜åŒ–äº†ï¼Œè‹¥å˜åŒ–äº†ï¼Œthis.setStateå°†å¼•èµ·stateå˜åŒ–ï¼Œä»è€Œå¼•èµ·renderï¼Œæ­¤æ—¶å°±æ²¡å¿…è¦å†åšç¬¬äºŒæ¬¡å› é‡ä¼ propså¼•èµ·çš„renderäº†ï¼Œä¸ç„¶é‡å¤åšä¸€æ ·çš„æ¸²æŸ“äº†<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class Child extends Component &#123; </span><br><span class="line">  constructor(props) &#123; </span><br><span class="line">    super(props); </span><br><span class="line">    this.state = &#123; </span><br><span class="line">      someThings: props.someThings </span><br><span class="line">    &#125;; </span><br><span class="line">  &#125;</span><br><span class="line">  componentWillReceiveProps(nextProps) &#123; // çˆ¶ç»„ä»¶é‡ä¼ propsæ—¶å°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³• </span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      someThings: nextProps.someThings</span><br><span class="line">    &#125;); </span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123; </span><br><span class="line">    return &lt;div&gt;&#123;this.state.someThings&#125;&lt;/div&gt; </span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>2.ç»„ä»¶æœ¬èº«è°ƒç”¨setStateï¼Œæ— è®ºstateæœ‰æ²¡æœ‰å˜åŒ–ã€‚å¯é€šè¿‡shouldComponentUpdateæ–¹æ³•ä¼˜åŒ–</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">class Child extends Component &#123; </span><br><span class="line">  constructor(props) &#123; </span><br><span class="line">    super(props); </span><br><span class="line">    this.state = &#123; </span><br><span class="line">      someThings:1 </span><br><span class="line">    &#125; </span><br><span class="line">  &#125;</span><br><span class="line">  shouldComponentUpdate(nextStates) &#123; // åº”è¯¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¦åˆ™æ— è®ºstateæ˜¯å¦æœ‰å˜åŒ–éƒ½å°†ä¼šå¯¼è‡´ç»„ ä»¶é‡æ–°æ¸²æŸ“</span><br><span class="line">    if(nextStates.someThings === this.state.someThings) &#123; </span><br><span class="line">      return false;</span><br><span class="line">    &#125; </span><br><span class="line">  &#125;</span><br><span class="line">  handleClick = () =&gt; &#123; // è™½ç„¶è°ƒç”¨äº†setState ï¼Œä½†stateå¹¶æ— å˜åŒ– </span><br><span class="line">    const preSomeThings = this.state.someThings;</span><br><span class="line">    this.setState(&#123; </span><br><span class="line">      someThings: preSomeThings </span><br><span class="line">    &#125;) </span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123; </span><br><span class="line">    return &lt;div onClick = &#123;this.handleClick&#125;&gt;&#123;this.state.someThings&#125;&lt;/div&gt; </span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>ç¬¬å››å¸è½½é˜¶æ®µ</p>
<ul>
<li>åªæœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼šcomponentWillUnmount</li>
<li>componentWillUnmount<ul>
<li>åœ¨ç»„ä»¶è¢«å¸è½½å‰è°ƒç”¨ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œï¼Œæ¯”å¦‚æ¸…é™¤ç»„ä»¶ä¸­ä½¿ç”¨çš„å®šæ—¶å™¨ï¼Œæ¸…é™¤componentDidMountä¸­æ‰‹åŠ¨åˆ›å»ºçš„DOMå…ƒç´ ç­‰ï¼Œä»¥é¿å…å¼•èµ·å†…å­˜æ³„æ¼</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="react-v16-4-çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#react-v16-4-çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="react v16.4 çš„ç”Ÿå‘½å‘¨æœŸ"></a>react v16.4 çš„ç”Ÿå‘½å‘¨æœŸ</h4><ul>
<li>å˜æ›´ç¼˜ç”±<ul>
<li>åŸæ¥ï¼ˆReact v16.0å‰ï¼‰çš„ç”Ÿå‘½å‘¨æœŸåœ¨React v16æ¨å‡ºçš„<a href="https://zhuanlan.zhihu.com/p/26027085" target="_blank" rel="noopener">Fiber</a>ä¹‹åå°±ä¸åˆé€‚äº†ï¼Œå› ä¸ºå¦‚æœè¦å¼€å¯async renderingï¼Œ åœ¨renderå‡½æ•°ä¹‹å‰çš„æ‰€æœ‰å‡½æ•°ï¼Œéƒ½æœ‰å¯èƒ½è¢«æ‰§è¡Œå¤šæ¬¡</li>
</ul>
</li>
<li>åŸæ¥ï¼ˆReact v16.0å‰ï¼‰çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›æ˜¯åœ¨renderå‰æ‰§è¡Œçš„å‘¢ï¼Ÿ<ul>
<li>componentWillMount</li>
<li>componentWillReceiveProps</li>
<li>shouldComponentUpdate</li>
<li>componentWillUpdate</li>
</ul>
</li>
<li>å¦‚æœå¼€å‘è€…å¼€äº†async renderingï¼Œè€Œä¸”åˆåœ¨ä»¥ä¸Šè¿™äº›renderå‰æ‰§è¡Œçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•åšAJAXè¯·æ±‚çš„è¯ï¼Œé‚£AJAXå°†è¢«æ— è°“åœ°å¤šæ¬¡è°ƒç”¨ã€‚æ˜æ˜¾ä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„ç»“æœã€‚è€Œä¸”åœ¨componentWillMounté‡Œå‘èµ·AJAXï¼Œä¸ç®¡å¤šå¿«å¾—åˆ°ç»“æœä¹Ÿèµ¶ä¸ä¸Šé¦–æ¬¡renderï¼Œè€Œä¸”componentWillMountåœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“ä¹Ÿä¼šè¢«è°ƒç”¨åˆ°ï¼ˆå½“ç„¶ï¼Œä¹Ÿè®¸è¿™æ˜¯é¢„æœŸçš„ç»“æœï¼‰ï¼Œè¿™æ ·çš„IOæ“ä½œæ”¾åœ¨componentDidMounté‡Œæ›´åˆé€‚ã€‚ç¦æ­¢ä¸èƒ½ç”¨æ¯”åŠå¯¼å¼€å‘è€…ä¸è¦è¿™æ ·ç”¨çš„æ•ˆæœæ›´å¥½ï¼Œæ‰€ä»¥é™¤äº†shouldComponentUpdateï¼Œå…¶ä»–åœ¨renderå‡½æ•°ä¹‹å‰çš„æ‰€æœ‰å‡½æ•°(componentWillMountï¼ŒcomponentWillReceivePropsï¼ŒcomponentWillUpdate)éƒ½è¢«getDerivedStateFromPropsæ›¿ä»£ã€‚ä¹Ÿå°±æ˜¯ç”¨ä¸€ä¸ªé™æ€å‡½æ•°getDerivedStateFromPropsæ¥å–ä»£è¢«deprecateçš„å‡ ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå°±æ˜¯å¼ºåˆ¶å¼€å‘è€…åœ¨renderä¹‹å‰åªåšæ— å‰¯ä½œç”¨çš„æ“ä½œï¼Œè€Œä¸”èƒ½åšçš„æ“ä½œå±€é™åœ¨æ ¹æ®propså’Œstateå†³å®šæ–°çš„stateReact v16.0åˆšæ¨å‡ºçš„æ—¶å€™ï¼Œæ˜¯å¢åŠ äº†ä¸€ä¸ªcomponentDidCatchç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå¢é‡å¼ä¿®æ”¹ï¼Œå®Œå…¨ä¸å½±å“åŸæœ‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼›ä½†æ˜¯ï¼Œåˆ°äº†React v16.3ï¼Œå¤§æ”¹åŠ¨æ¥äº†ï¼Œå¼•å…¥äº†ä¸¤ä¸ªæ–°çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°</li>
<li>æ–°å¼•å…¥äº†ä¸¤ä¸ªæ–°çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š getDerivedStateFromProps ï¼Œ getSnapshotBeforeUpdate<ul>
<li>getDerivedStateFromProps<ul>
<li>getDerivedStateFromProps æœ¬æ¥ï¼ˆReact v16.3ä¸­ï¼‰æ˜¯åªåœ¨åˆ›å»ºå’Œæ›´æ–°ï¼ˆç”±çˆ¶ç»„ä»¶å¼•å‘éƒ¨åˆ†ï¼‰ï¼Œä¹Ÿå°±æ˜¯ä¸æ˜¯ä¸ç”±çˆ¶ç»„ä»¶å¼•å‘ï¼Œé‚£ä¹ˆgetDerivedStateFromPropsä¹Ÿä¸ä¼šè¢«è°ƒç”¨ï¼Œå¦‚è‡ªèº«setStateå¼•å‘æˆ–è€…forceUpdateå¼•å‘</li>
</ul>
</li>
</ul>
</li>
<li>React v16.3 è¿™æ ·çš„è¯ç†è§£èµ·æ¥æœ‰ç‚¹ä¹±ï¼Œåœ¨React v16.4ä¸­æ”¹æ­£äº†è¿™ä¸€ç‚¹ï¼Œè®©getDerivedStateFromPropsæ— è®ºæ˜¯Mountingè¿˜æ˜¯Updatingï¼Œä¹Ÿæ— è®ºæ˜¯å› ä¸ºä»€ä¹ˆå¼•èµ·çš„Updatingï¼Œå…¨éƒ¨éƒ½ä¼šè¢«è°ƒç”¨ï¼Œå…·ä½“å¯çœ‹React v16.4 çš„ç”Ÿå‘½å‘¨æœŸå›¾</li>
<li>React v16.4åçš„getDerivedStateFromProps<ul>
<li>static getDerivedStateFromProps(props, state) åœ¨ç»„ä»¶åˆ›å»ºæ—¶å’Œæ›´æ–°æ—¶çš„renderæ–¹æ³•ä¹‹å‰è°ƒç”¨ï¼Œå®ƒåº”è¯¥è¿”å›ä¸€ä¸ªå¯¹è±¡æ¥æ›´æ–°çŠ¶æ€ï¼Œæˆ–è€…è¿”å›nullæ¥ä¸æ›´æ–°ä»»ä½•å†…å®¹</li>
</ul>
</li>
<li>getSnapshotBeforeUpdate<ul>
<li>getSnapshotBeforeUpdate() è¢«è°ƒç”¨äºrenderä¹‹åï¼Œå¯ä»¥è¯»å–ä½†æ— æ³•ä½¿ç”¨DOMçš„æ—¶å€™ã€‚å®ƒä½¿æ‚¨çš„ç»„ä»¶å¯ä»¥åœ¨å¯èƒ½æ›´æ”¹ä¹‹å‰ä»DOMæ•è·ä¸€äº›ä¿¡æ¯ï¼ˆä¾‹å¦‚æ»šåŠ¨ä½ç½®ï¼‰ã€‚æ­¤ç”Ÿå‘½å‘¨æœŸè¿”å›çš„ä»»ä½•å€¼éƒ½å°†ä½œä¸ºå‚æ•°ä¼ é€’ç»™componentDidUpdateï¼ˆï¼‰<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">class ScrollingList extends React.Component &#123; </span><br><span class="line">  constructor(props) &#123; </span><br><span class="line">    super(props); </span><br><span class="line">    this.listRef = React.createRef(); </span><br><span class="line">  &#125;</span><br><span class="line">  getSnapshotBeforeUpdate(prevProps, prevState) &#123; //æˆ‘ä»¬æ˜¯å¦è¦æ·»åŠ æ–°çš„ items åˆ°åˆ—è¡¨? // æ•æ‰æ»šåŠ¨ä½ç½®ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ç¨åè°ƒæ•´æ»šåŠ¨</span><br><span class="line">    if (prevProps.list.length &lt; this.props.list.length) &#123; </span><br><span class="line">      const list = this.listRef.current; </span><br><span class="line">      return list.scrollHeight - list.scrollTop; </span><br><span class="line">    &#125;</span><br><span class="line">    return null;</span><br><span class="line">  &#125;</span><br><span class="line">  componentDidUpdate(prevProps, prevState, snapshot) &#123; </span><br><span class="line">    //å¦‚æœæˆ‘ä»¬æœ‰snapshotå€¼, æˆ‘ä»¬å·²ç»æ·»åŠ äº† æ–°çš„items </span><br><span class="line">    // è°ƒæ•´æ»šåŠ¨ä»¥è‡³äºè¿™äº›æ–°çš„items ä¸ä¼šå°†æ—§itemsæ¨å‡ºè§†å›¾</span><br><span class="line">    // (è¿™è¾¹çš„snapshotæ˜¯ getSnapshotBeforeUpdateæ–¹æ³•çš„è¿”å›å€¼) </span><br><span class="line">    if (snapshot !== null) &#123; </span><br><span class="line">      const list = this.listRef.current; </span><br><span class="line">      list.scrollTop = list.scrollHeight - snapshot; </span><br><span class="line">    &#125; </span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123; </span><br><span class="line">    return ( &lt;div ref=&#123;this.listRef&#125;&gt;&#123;/* ...contents... */&#125;&lt;/div&gt; ); </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/21/reactç»„ä»¶åŒ–/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/12/21/reactç»„ä»¶åŒ–/" itemprop="url">reactç»„ä»¶åŒ–</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2020-12-21T10:46:03+08:00">
                2020-12-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/å‰ç«¯æ¡†æ¶/" itemprop="url" rel="index">
                    <span itemprop="name">å‰ç«¯æ¡†æ¶</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="reactç»„ä»¶åŒ–"><a href="#reactç»„ä»¶åŒ–" class="headerlink" title="reactç»„ä»¶åŒ–"></a>reactç»„ä»¶åŒ–</h3><h4 id="ä½¿ç”¨antdçš„yarn-create-react-app-antd-demoåˆ›å»ºçš„é¡¹ç›®ï¼Œä½¿ç”¨ç»„ä»¶é…ç½®æŒ‰éœ€åŠ è½½"><a href="#ä½¿ç”¨antdçš„yarn-create-react-app-antd-demoåˆ›å»ºçš„é¡¹ç›®ï¼Œä½¿ç”¨ç»„ä»¶é…ç½®æŒ‰éœ€åŠ è½½" class="headerlink" title="ä½¿ç”¨antdçš„yarn create react-app antd-demoåˆ›å»ºçš„é¡¹ç›®ï¼Œä½¿ç”¨ç»„ä»¶é…ç½®æŒ‰éœ€åŠ è½½"></a>ä½¿ç”¨antdçš„yarn create react-app antd-demoåˆ›å»ºçš„é¡¹ç›®ï¼Œä½¿ç”¨ç»„ä»¶é…ç½®æŒ‰éœ€åŠ è½½</h4><ul>
<li>å®‰è£…react-app-rewiredå–ä»£react-scripts(package.json)ï¼Œå¯ä»¥æ‰©å±•webpackçš„é…ç½® ï¼Œç±»ä¼¼vue.config.js</li>
<li><p>é¡¹ç›®æ ¹ç›®å½•åˆ›å»º config-overrides.jsï¼Œé…ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const &#123; injectBabelPlugin &#125; = require(&quot;react-app-rewired&quot;);</span><br><span class="line">module.exports = function override(config, env) &#123;</span><br><span class="line">  config = injectBabelPlugin(</span><br><span class="line">    // åœ¨é»˜è®¤é…ç½®åŸºç¡€ä¸Šæ³¨å…¥</span><br><span class="line">    // æ’ä»¶åï¼Œæ’ä»¶é…ç½®</span><br><span class="line">    [&quot;import&quot;, &#123; libraryName: &quot;antd&quot;, libraryDirectory: &quot;es&quot;, style: &quot;css&quot; &#125;],</span><br><span class="line">    config</span><br><span class="line">  );</span><br><span class="line">  // é«˜çº§ç»„ä»¶ã€å¯ä½¿ç”¨è£…é¥°å™¨é…ç½® ES7 -&gt; ES5</span><br><span class="line">  config = injectBabelPlugin(</span><br><span class="line">    [&quot;@babel/plugin-proposal-decorators&quot;, &#123; legacy: true &#125;],</span><br><span class="line">    config</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  return config;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨Buttonå®ä¾‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;</span><br><span class="line">// antd.csséƒ½åŠ è½½</span><br><span class="line">// import Button from &apos;antd/lib/button&apos;</span><br><span class="line">// import &apos;antd/dist/antd.css&apos;</span><br><span class="line">// æŒ‰éœ€åŠ è½½</span><br><span class="line">import &#123;Button&#125; from &apos;antd&apos;</span><br><span class="line"></span><br><span class="line">export default class AntdTest extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Button type=&quot;primary&quot;&gt;æŒ‰é’®&lt;/Button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="å®¹å™¨ç»„ä»¶ã€å‡½æ•°ç»„ä»¶ï¼Œreactæ¸²æŸ“æ•°æ®çš„æ·±æµ…æ¯”è¾ƒ"><a href="#å®¹å™¨ç»„ä»¶ã€å‡½æ•°ç»„ä»¶ï¼Œreactæ¸²æŸ“æ•°æ®çš„æ·±æµ…æ¯”è¾ƒ" class="headerlink" title="å®¹å™¨ç»„ä»¶ã€å‡½æ•°ç»„ä»¶ï¼Œreactæ¸²æŸ“æ•°æ®çš„æ·±æµ…æ¯”è¾ƒ"></a>å®¹å™¨ç»„ä»¶ã€å‡½æ•°ç»„ä»¶ï¼Œreactæ¸²æŸ“æ•°æ®çš„æ·±æµ…æ¯”è¾ƒ</h4><ul>
<li>å®¹å™¨ç»„ä»¶è´Ÿè´£æ•°æ®è·å–ï¼Œå±•ç¤ºç»„ä»¶è´Ÿè´£æ ¹æ®propsæ˜¾ç¤ºä¿¡æ¯</li>
<li>shouldComponentUpdate</li>
<li><p>PureComponent (å®šåˆ¶äº†shouldComponentUpdateåçš„Componentï¼ˆæµ…æ¯”è¾ƒï¼‰)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">class Comp extends React.PureComponent &#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>memoé«˜é˜¶ç»„ä»¶(React v16.6.0 ä¹‹åçš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ React.memo è®©å‡½æ•°å¼çš„ç»„ä»¶ä¹Ÿæœ‰PureComponentçš„åŠŸèƒ½)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const Demo = React.memo(() =&gt; ( &lt;div&gt;&#123;this.props.value || &apos;loading...&apos; &#125; &lt;/div&gt; ));</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®ä¾‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &quot;react&quot;;</span><br><span class="line">import &#123; func &#125; from &quot;prop-types&quot;;</span><br><span class="line"></span><br><span class="line">// å®¹å™¨ç»„ä»¶</span><br><span class="line">export default class CommentList extends Component &#123;</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.state = &#123;</span><br><span class="line">      comments: []</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    // ä¸æ–­è½®è¯¢æ¯”è¾ƒã€è€—è´¹ğŸ†“</span><br><span class="line">    // setInterval(() =&gt; &#123; // æ¯æ¬¡ç”Ÿæˆçš„æ˜¯å…¨æ–°æ•°ç»„</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      this.setState(&#123;</span><br><span class="line">        comments: [</span><br><span class="line">          &#123; body: &quot;react is very good&quot;, author: &quot;facebook&quot; &#125;,</span><br><span class="line">          &#123; body: &quot;vue is very good&quot;, author: &quot;youyuxi&quot; &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;, 1000);</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;this.state.comments.map((c, i) =&gt; (</span><br><span class="line">          &lt;Comment key=&#123;i&#125; data=&#123;c&#125; /&gt;</span><br><span class="line">          // &lt;Comment key=&#123;i&#125; body=&#123;c.body&#125; author=&#123;c.author&#125; /&gt;</span><br><span class="line">          // &lt;Comment key=&#123;i&#125; &#123;...c&#125; /&gt;</span><br><span class="line">        ))&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// å±•ç¤ºç»„ä»¶</span><br><span class="line">// memoé«˜é˜¶ç»„ä»¶ï¼ˆä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªç»„ä»¶ã€è¿”å›ä¸€ä¸ªå…¨æ–°çš„ç»„ä»¶ï¼‰,ä¹Ÿæ˜¯æµ…æ¯”è¾ƒï¼ˆå®ç°åŸç†å’Œä½¿ç”¨PureComponentä¸€æ ·ï¼Œè§£å†³äº†ä»¥å‰å‡½æ•°ç»„ä»¶ä¸èƒ½ä½¿ç”¨PureComponentï¼‰</span><br><span class="line">// React v16.6.0 ä¹‹åçš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ React.memo è®©å‡½æ•°å¼çš„ç»„ä»¶ä¹Ÿæœ‰PureComponentçš„åŠŸèƒ½</span><br><span class="line">// const Comment = React.memo(function(props) &#123;</span><br><span class="line">//   console.log(&quot;render Comment&quot;); // æ‰§è¡Œä¸¤æ¬¡</span><br><span class="line">//   return (</span><br><span class="line">//     &lt;div&gt;</span><br><span class="line">//       &lt;p&gt;&#123;props.body&#125;&lt;/p&gt;</span><br><span class="line">//       &lt;p&gt; --- &#123;props.author&#125;&lt;/p&gt;</span><br><span class="line">//     &lt;/div&gt;</span><br><span class="line">//   );</span><br><span class="line">// &#125;);</span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨PureComponent ï¼ˆ15.3 ç‰ˆæœ¬ï¼‰ æµ…æ¯”è¾ƒï¼Œé¿å…å¯¹è±¡æ¯”è¾ƒï¼ˆå¼•ç”¨ç±»å‹ï¼‰ï¼ŒæŒ–æ˜å¤ªæ·±ï¼Œä¹Ÿæ²¡æœ‰è¾¾åˆ°æ•ˆæœ</span><br><span class="line">// è§£å†³ æ•°æ®æ²¡æœ‰å˜ renderå‡½æ•°ä¸æ‰§è¡Œ</span><br><span class="line">// ä¼ å€¼ç±»å‹ã€æˆ–è€…é¿å…å¼•ç”¨ç±»å‹çš„åœ°å€ä¸å˜ï¼ˆå°½é‡ä¸€å±‚ï¼‰</span><br><span class="line">// class Comment extends React.PureComponent&#123;</span><br><span class="line">//   render() &#123;</span><br><span class="line">//     console.log(&quot;render comment&quot;);</span><br><span class="line">//     return (</span><br><span class="line">//       &lt;div&gt;</span><br><span class="line">//         &lt;p&gt;&#123;this.props.body&#125;&lt;/p&gt;</span><br><span class="line">//         &lt;p&gt; --- &#123;this.props.author&#125;&lt;/p&gt;</span><br><span class="line">//       &lt;/div&gt;</span><br><span class="line">//     );</span><br><span class="line">//   &#125;</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">// class Comment extends React.Component&#123;</span><br><span class="line">//   // ç”Ÿå‘½å‘¨æœŸè¿›è¡Œæ¯”è¾ƒ æ–°çŠ¶æ€nextProps ä¸ dataæ¯”è¾ƒ</span><br><span class="line">//   // å¼Šç«¯ï¼š æ¯”è¾ƒç´¯èµ˜</span><br><span class="line">//   shouldComponentUpdate(nextProps)&#123;</span><br><span class="line">//       if (nextProps.data.body === this.props.data.body &amp;&amp;</span><br><span class="line">//         nextProps.data.author === this.props.data.author) &#123;</span><br><span class="line">//           return false;</span><br><span class="line">//       &#125;</span><br><span class="line">//       return true;</span><br><span class="line">//   &#125;</span><br><span class="line"></span><br><span class="line">//   render() &#123;</span><br><span class="line">//     console.log(&quot;render comment&quot;); // æ‰§è¡Œäº†2æ¬¡</span><br><span class="line">//     return (</span><br><span class="line">//       &lt;div&gt;</span><br><span class="line">//         &lt;p&gt;&#123;this.props.data.body&#125;&lt;/p&gt;</span><br><span class="line">//         &lt;p&gt; --- &#123;this.props.data.author&#125;&lt;/p&gt;</span><br><span class="line">//       &lt;/div&gt;</span><br><span class="line">//     );</span><br><span class="line">//   &#125;</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">function Comment(&#123;data&#125;)&#123;</span><br><span class="line">  console.log(&quot;render comment&quot;); // æ‰§è¡Œäº†4æ¬¡</span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;&#123;data.body&#125;&lt;/p&gt;</span><br><span class="line">      &lt;p&gt; --- &#123;data.author&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="é«˜é˜¶ç»„ä»¶"><a href="#é«˜é˜¶ç»„ä»¶" class="headerlink" title="é«˜é˜¶ç»„ä»¶"></a>é«˜é˜¶ç»„ä»¶</h4><ul>
<li>åœ¨Reacté‡Œå°±æœ‰äº†HOCï¼ˆHigher-Order Componentsï¼‰çš„æ¦‚å¿µ</li>
<li>é«˜é˜¶ç»„ä»¶ä¹Ÿæ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œä½†æ˜¯ä»–è¿”å›å¦å¤–ä¸€ä¸ªç»„ä»¶ï¼Œäº§ç”Ÿæ–°çš„ç»„ä»¶å¯ä»¥å¯¹å±æ€§è¿›è¡ŒåŒ…è£…ï¼Œç”šè‡³é‡å†™éƒ¨åˆ†ç”Ÿå‘½å‘¨æœŸ<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const demoComp = (Component) =&gt; &#123; </span><br><span class="line">  const NewComponent = (props) =&gt; &#123; </span><br><span class="line">    return &lt;Component &#123;...props&#125; name=&apos;demoç»„ä»¶&apos; /&gt;; </span><br><span class="line">  &#125;;</span><br><span class="line">    return NewComponent; </span><br><span class="line">  &#125;;</span><br><span class="line">// ä¸Šé¢demoCompç»„ä»¶ï¼Œå…¶å®å°±æ˜¯ä»£ç†äº†Componentï¼Œåªæ˜¯å¤šä¼ é€’äº†ä¸€ä¸ªnameå‚æ•°</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="é«˜é˜¶é“¾å¼è°ƒç”¨"><a href="#é«˜é˜¶é“¾å¼è°ƒç”¨" class="headerlink" title="é«˜é˜¶é“¾å¼è°ƒç”¨"></a>é«˜é˜¶é“¾å¼è°ƒç”¨</h4><ul>
<li>é«˜é˜¶ç»„ä»¶æœ€å·§å¦™çš„ä¸€ç‚¹ï¼Œæ˜¯å¯ä»¥é“¾å¼è°ƒç”¨</li>
</ul>
<h4 id="é«˜é˜¶ç»„ä»¶è£…é¥°å™¨å†™æ³•"><a href="#é«˜é˜¶ç»„ä»¶è£…é¥°å™¨å†™æ³•" class="headerlink" title="é«˜é˜¶ç»„ä»¶è£…é¥°å™¨å†™æ³•"></a>é«˜é˜¶ç»„ä»¶è£…é¥°å™¨å†™æ³•</h4><ul>
<li>ES7è£…é¥°å™¨å¯ç”¨äºç®€åŒ–é«˜é˜¶ç»„ä»¶å†™æ³•</li>
<li>npm install â€“save-dev babel-plugin-transform-decorators-legacy</li>
<li>åŒä¸Šï¼Œé¡¹ç›®æ ¹ç›®å½•åˆ›å»º config-overrides.jsï¼Œé…ç½®</li>
<li>å‚è€ƒæºç  <a href="https://github.com/yongfeng-peng/my-react-demo/blob/master/src/components/Hoc.js" target="_blank" rel="noopener">https://github.com/yongfeng-peng/my-react-demo/blob/master/src/components/Hoc.js</a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// é«˜çº§ç»„ä»¶ã€å¯ä½¿ç”¨è£…é¥°å™¨é…ç½® ES7 -&gt; ES5</span><br><span class="line">config = injectBabelPlugin(</span><br><span class="line">  [&quot;@babel/plugin-proposal-decorators&quot;, &#123; legacy: true &#125;],</span><br><span class="line">  config</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="ç»„ä»¶è·¨å±‚çº§é€šä¿¡-ä¸Šä¸‹æ–‡"><a href="#ç»„ä»¶è·¨å±‚çº§é€šä¿¡-ä¸Šä¸‹æ–‡" class="headerlink" title="ç»„ä»¶è·¨å±‚çº§é€šä¿¡ - ä¸Šä¸‹æ–‡"></a>ç»„ä»¶è·¨å±‚çº§é€šä¿¡ - ä¸Šä¸‹æ–‡</h4><ul>
<li>ç»„ä»¶è·¨å±‚çº§é€šä¿¡å¯ä½¿ç”¨Context</li>
<li>è¿™ç§æ¨¡å¼ä¸‹æœ‰ä¸¤ä¸ªè§’è‰²ï¼ŒProviderå’ŒConsumer</li>
<li>Providerä¸ºå¤–å±‚ç»„ä»¶ï¼Œç”¨æ¥æä¾› æ•°æ®ï¼›å†…éƒ¨éœ€è¦æ•°æ®æ—¶ç”¨Consumeræ¥è¯»å–<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">const FormContext = React.createContext()</span><br><span class="line">const FormProvider = FormContext.Provider</span><br><span class="line">const FormConsumer = FormContext.Consumer</span><br><span class="line">let store = &#123; </span><br><span class="line">  name: &apos;å­¦ä¹ &apos;, </span><br><span class="line">  sayHi() &#123; </span><br><span class="line">    console.log(this.name);</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line">let withForm = Component=&gt; &#123; </span><br><span class="line">  const NewComponent = (props) =&gt; &#123; </span><br><span class="line">    return &lt;FormProvider value=&#123;store&#125;&gt; &lt;Component &#123;...props&#125; /&gt; &lt;/FormProvider&gt; </span><br><span class="line">  &#125;;</span><br><span class="line">  return NewComponent; </span><br><span class="line">&#125;</span><br><span class="line">@withForm class App extends Component &#123; </span><br><span class="line">  render() &#123; </span><br><span class="line">    return &lt;FormConsumer&gt; &#123; </span><br><span class="line">      store=&gt; &#123; </span><br><span class="line">        return &lt;Button onClick=&#123;()=&gt;store.sayHi()&#125;&gt; &#123;store.name&#125; &lt;/Button&gt; </span><br><span class="line">      &#125; </span><br><span class="line">    &#125; &lt;/FormConsumer&gt; </span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="code"><a href="#code" class="headerlink" title="code"></a><a href="https://github.com/yongfeng-peng/my-react-demo" target="_blank" rel="noopener">code</a></h4>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/19/react/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/12/19/react/" itemprop="url">react</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2020-12-19T10:56:17+08:00">
                2020-12-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/å‰ç«¯æ¡†æ¶/" itemprop="url" rel="index">
                    <span itemprop="name">å‰ç«¯æ¡†æ¶</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="react"><a href="#react" class="headerlink" title="react"></a>react</h3><h4 id="Reactå’ŒReactDOM"><a href="#Reactå’ŒReactDOM" class="headerlink" title="Reactå’ŒReactDOM"></a>Reactå’ŒReactDOM</h4><ul>
<li>Reacté€»è¾‘æ§åˆ¶(ä¹‰åŠ¡æ§åˆ¶ã€è§†å›¾æ¨¡å‹æ§åˆ¶)ï¼ŒReact.createElement()ï¼ˆç”Ÿæˆè™šæ‹ŸDOMï¼ŒReactç”Ÿæˆçš„ç»„ä»¶æˆ–è€…æ•°æ®ä¸renderæ¸²æŸ“çš„æ•°æ®è¿›è¡Œdiff,æ‰“è¡¥ä¸ï¼‰</li>
</ul>
<h4 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h4><ul>
<li><p>è¡¨è¾¾å¼: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;expr&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å±æ€§: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&#123;&#125;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>jsxä¹Ÿæ˜¯è¡¨è¾¾å¼:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;&#123;jsx&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h4><ul>
<li><p>å‡½æ•°å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function Comp(props) &#123;</span><br><span class="line">  return(...)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class Comp extends React.Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return(...)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Comp name=&apos;&apos; style=&#123;&#123;...&#125;&#125;&gt;</span><br></pre></td></tr></table></figure>
<h4 id="çŠ¶æ€"><a href="#çŠ¶æ€" class="headerlink" title="çŠ¶æ€"></a>çŠ¶æ€</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class Comp &#123;</span><br><span class="line">  state = &#123;&#125;</span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      prop: val, // æ‰¹é‡å¼‚æ­¥çš„ï¼Œä¸ä¼šç«‹åˆ»ç”Ÿæ•ˆ</span><br><span class="line">    &#125;)</span><br><span class="line">    this.setState(&#123;state =&gt; (prop: val)&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ¡ä»¶å’Œå¾ªç¯"><a href="#æ¡ä»¶å’Œå¾ªç¯" class="headerlink" title="æ¡ä»¶å’Œå¾ªç¯"></a>æ¡ä»¶å’Œå¾ªç¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;this.state.isLOgin ? &lt;p&gt;&#123;userInfo.name&#125;&lt;/p&gt; : &apos;ç™»é™†&apos;&#125;</span><br><span class="line">&#123;this.state.message &amp;&amp; &lt;p&gt;&#123;this.state.message&#125;&lt;/p&gt;&#125;</span><br><span class="line">&#123;this.state.list.map(u =&gt; &lt;li&gt;&#123;u.name&#125;&lt;/li&gt;)&#125;</span><br></pre></td></tr></table></figure>
<h4 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">constructor(props) &#123;</span><br><span class="line">  super(props);</span><br><span class="line">  this.handleChange = this.handleChange.bind(this);</span><br><span class="line">&#125; // ç¬¬äºŒç§</span><br><span class="line">handleChange = () =&gt; &#123;&#125; // ç¬¬ä¸€ç§</span><br><span class="line">&lt;input onChange=&#123;this.handleChange&#125; /&gt; // thisæŒ‡å‘</span><br><span class="line">&lt;input onChange=&#123;() =&gt; this.handleChange(user)&#125; /&gt; // ç¬¬ä¸‰ç§</span><br></pre></td></tr></table></figure>
<h4 id="é€šä¿¡"><a href="#é€šä¿¡" class="headerlink" title="é€šä¿¡"></a>é€šä¿¡</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// å±æ€§æ–¹å¼é€šä¿¡ï¼ˆçˆ¶ç»„ä»¶å¤æ‚ï¼Œå­ç»„ä»¶è´Ÿè´£è°ƒç”¨ï¼‰</span><br><span class="line">// çˆ¶å­ç»„ä»¶éš”ä»£ï¼Œä¸Šä¸‹æ–‡å…³ç³»ï¼ŒåŠredux</span><br><span class="line">&lt;Comp titile=&#123;&#125; onSubmit=&#123;this.onSubmit&#125; /&gt;</span><br></pre></td></tr></table></figure>
<h4 id="React-VScodeå¼€å‘å¿«æ·é”®"><a href="#React-VScodeå¼€å‘å¿«æ·é”®" class="headerlink" title="React VScodeå¼€å‘å¿«æ·é”®"></a>React VScodeå¼€å‘å¿«æ·é”®</h4><ul>
<li>æŒ‰ç…§æ‰©å±•æ’ä»¶ <strong> ES7 React/Redux/GraphQL/React-Native snippets </strong></li>
<li>å‡ ä¸ªå¸¸ç”¨å‘½ä»¤</li>
<li>rcc å¿«é€Ÿç©¿ä»¶ä¸€ä¸ªç»„ä»¶ï¼ˆä½¿ç”¨extendsæ–¹å¼ï¼‰</li>
<li>rconst å¿«é€Ÿåˆ›å»ºä¸€ä¸ª constuctor</li>
<li>rcep å¿«é€Ÿåˆ›å»ºä¸€ä¸ªç»„ä»¶ï¼ˆä½¿ç”¨extendsæ–¹å¼ï¼‰</li>
<li>rcredux å¿«é€Ÿåˆ›å»ºä¸€ä¸ª reduxæ ¼å¼çš„ç±»æ¨¡æ¿</li>
<li>clg æ˜¯ console.log()çš„å¿«æ·é”®<br><a href="https://marketplace.visualstudio.com/items?itemName=dsznajder.es7-react-js-snippets" target="_blank" rel="noopener">To Learn Moreâ€¦</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/14/å°ç¨‹åºä¸­æ‰‹æœºå·è¯†åˆ«/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/12/14/å°ç¨‹åºä¸­æ‰‹æœºå·è¯†åˆ«/" itemprop="url">å°ç¨‹åºä¸­æ‰‹æœºå·è¯†åˆ«</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2020-12-14T16:38:48+08:00">
                2020-12-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/å°ç¨‹åº/" itemprop="url" rel="index">
                    <span itemprop="name">å°ç¨‹åº</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å°ç¨‹åºä¸­æ‰‹æœºå·è¯†åˆ«"><a href="#å°ç¨‹åºä¸­æ‰‹æœºå·è¯†åˆ«" class="headerlink" title="å°ç¨‹åºä¸­æ‰‹æœºå·è¯†åˆ«"></a>å°ç¨‹åºä¸­æ‰‹æœºå·è¯†åˆ«</h3><h4 id="åç«¯è¿”å›å­—ç¬¦ä¸²åŒ…å¥½æ‰‹æœºå·ï¼Œç‚¹å‡»å¯æ‹¨æ‰“ç”µè¯"><a href="#åç«¯è¿”å›å­—ç¬¦ä¸²åŒ…å¥½æ‰‹æœºå·ï¼Œç‚¹å‡»å¯æ‹¨æ‰“ç”µè¯" class="headerlink" title="åç«¯è¿”å›å­—ç¬¦ä¸²åŒ…å¥½æ‰‹æœºå·ï¼Œç‚¹å‡»å¯æ‹¨æ‰“ç”µè¯"></a>åç«¯è¿”å›å­—ç¬¦ä¸²åŒ…å¥½æ‰‹æœºå·ï¼Œç‚¹å‡»å¯æ‹¨æ‰“ç”µè¯</h4><ul>
<li>splitæŠ€å·§</li>
<li>æ³¨æ„çš„ç‚¹æ˜¯è¿™ä¸ªæ­£åˆ™regPhoneï¼Œé‡Œé¢åŠ äº†æœ‰æ‹¬å·ï¼Œå¦‚æœseparatoræ˜¯åŒ…å«æ•è·æ‹¬å·çš„æ­£åˆ™è¡¨è¾¾å¼()ï¼Œåˆ™åŒ¹é…ç»“æœåŒ…å«åœ¨æ•°ç»„ä¸­<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">let _str = &quot;xxxï¼Œè”ç³»ç”µè¯ï¼š18839687266ã€‚ç¨åä¸æ‚¨è”ç³»ã€‚xxxã€‚&quot;;</span><br><span class="line">parseStr (str) &#123;</span><br><span class="line">  const regPhone = /(1\d&#123;10&#125;)/;</span><br><span class="line">  const list = str.split(regPhone);</span><br><span class="line">  const result = [];</span><br><span class="line">  return list.map(item =&gt; &#123;</span><br><span class="line">    let tag;</span><br><span class="line">    regPhone.test(item) ? tag = &apos;phone&apos; : tag = &apos;text&apos;;</span><br><span class="line">    return &#123;</span><br><span class="line">      type: tag,</span><br><span class="line">      text: item</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/03/googleæ‰©å±•ç¨‹åº/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/12/03/googleæ‰©å±•ç¨‹åº/" itemprop="url">googleæ‰©å±•ç¨‹åº</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2020-12-03T11:41:43+08:00">
                2020-12-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tool/" itemprop="url" rel="index">
                    <span itemprop="name">tool</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="googleæ‰©å±•ç¨‹åºå®‰è£…"><a href="#googleæ‰©å±•ç¨‹åºå®‰è£…" class="headerlink" title="googleæ‰©å±•ç¨‹åºå®‰è£…"></a>googleæ‰©å±•ç¨‹åºå®‰è£…</h4><h5 id="vue-devtoolså·¥å…·çš„å®‰è£…"><a href="#vue-devtoolså·¥å…·çš„å®‰è£…" class="headerlink" title="vue-devtoolså·¥å…·çš„å®‰è£…"></a>vue-devtoolså·¥å…·çš„å®‰è£…</h5><ul>
<li>åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼Œåä¸ºvue-devtools</li>
<li>sudo npm install vue-devtools</li>
<li>è¿›å…¥venderæ–‡ä»¶å¤¹ï¼Œæ‰“å¼€manifest.json,è¿›è¡Œç¼–è¾‘</li>
<li>persistentä¿®æ”¹æˆtrue</li>
<li>æ‰“å¼€æ‰©å±•ç¨‹åº,æŠŠåˆšåˆšä¿®æ”¹çš„venderæ–‡ä»¶å¤¹æ‹–æ‹½è¿›æ¥å°±å¯ä»¥äº†(è®°å¾—å¼€å¯å¼€å‘è€…æ¨¡å¼)</li>
</ul>
<h5 id="react-devtoolså·¥å…·çš„å®‰è£…"><a href="#react-devtoolså·¥å…·çš„å®‰è£…" class="headerlink" title="react-devtoolså·¥å…·çš„å®‰è£…"></a>react-devtoolså·¥å…·çš„å®‰è£…</h5><ul>
<li>git clone <a href="https://github.com/facebook/react-devtools" target="_blank" rel="noopener">https://github.com/facebook/react-devtools</a></li>
<li>cd react-devtools</li>
<li>yarn install</li>
<li>yarn build:extension(å…·ä½“å‘½ä»¤ï¼Œåœ¨package.jsonæ–‡ä»¶ä¸­çš„scriptä¸‹æŸ¥æ‰¾ä»¥ä¸‹å‘½ä»¤)</li>
<li>æ‰“å¼€æ‰©å±•ç¨‹åº,æŠŠç”Ÿæˆçš„shells/chrome/build/unpackedæ–‡ä»¶å¤¹æ‹–æ‹½è¿›æ¥å°±å¯ä»¥äº†(è®°å¾—å¼€å¯å¼€å‘è€…æ¨¡å¼)</li>
</ul>
<h5 id="redux-devtoolså·¥å…·çš„å®‰è£…"><a href="#redux-devtoolså·¥å…·çš„å®‰è£…" class="headerlink" title="redux-devtoolså·¥å…·çš„å®‰è£…"></a>redux-devtoolså·¥å…·çš„å®‰è£…</h5><ul>
<li>git clone <a href="https://github.com/zalmoxisus/redux-devtools-extension.git" target="_blank" rel="noopener">https://github.com/zalmoxisus/redux-devtools-extension.git</a></li>
<li>npm i &amp;&amp; npm run build:extension (npm install chromedriver â€“chromedriver_cdnurl=<a href="http://cdn.npm.taobao.org/dist/chromedriver" target="_blank" rel="noopener">http://cdn.npm.taobao.org/dist/chromedriver</a>)</li>
<li>æ‰“å¼€æ‰©å±•ç¨‹åº,æŠŠç”Ÿæˆçš„./build/extensionæ–‡ä»¶å¤¹æ·»åŠ åˆ°å‹ç¼©ç¨‹åº(è®°å¾—å¼€å¯å¼€å‘è€…æ¨¡å¼)</li>
</ul>
<h5 id="å…¶ä»–å¥½ç”¨æ‰©å±•ç¨‹åº"><a href="#å…¶ä»–å¥½ç”¨æ‰©å±•ç¨‹åº" class="headerlink" title="å…¶ä»–å¥½ç”¨æ‰©å±•ç¨‹åº"></a>å…¶ä»–å¥½ç”¨æ‰©å±•ç¨‹åº</h5><ul>
<li>WEBå‰ç«¯åŠ©æ‰‹(FeHelper)<ul>
<li>ä¸€æ¬¾å›½äº§çš„ã€è¶…çº§å®ç”¨çš„å‰ç«¯å¼€å‘å·¥å…·åˆé›†ï¼Œä¹‹å‰æ‰©å±•è¿·ä¹Ÿç”¨ä¸“æ–‡ä»‹ç»è¿‡è¿™æ¬¾æ’ä»¶ã€‚</li>
<li>WEBå‰ç«¯åŠ©æ‰‹(FeHelper)åŒ…å«å¤šä¸ªç‹¬ç«‹å°åº”ç”¨ï¼Œæ¯”å¦‚ï¼šJsonå·¥å…·ã€ä»£ç ç¾åŒ–ã€ä»£ç å‹ç¼©ã€äºŒç»´ç ã€Postmanã€markdownã€ç½‘é¡µæ²¹çŒ´ã€ä¾¿ç­¾ç¬”è®°ã€ä¿¡æ¯åŠ å¯†ä¸è§£å¯†ã€éšæœºå¯†ç ç”Ÿæˆã€Crontabç­‰ç­‰ã€‚</li>
<li><a href="https://www.extfans.com/web-development/pkgccpejnmalmdinmhkkfafefagiiiad/" style="color: blue;" target="_blank" rel="noopener">downâ€¦</a></li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/blog-avatar.jpeg" alt="yongfeng.peng">
            
              <p class="site-author-name" itemprop="name">yongfeng.peng</p>
              <p class="site-description motion-element" itemprop="description">(å¥³è‹±</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">57</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yongfeng.peng</span>

  
</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
