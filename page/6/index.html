<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="(女英">
<meta property="og:type" content="website">
<meta property="og:title" content="Shero.">
<meta property="og:url" content="http://yoursite.com/page/6/index.html">
<meta property="og:site_name" content="Shero.">
<meta property="og:description" content="(女英">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Shero.">
<meta name="twitter:description" content="(女英">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/6/">





  <title>Shero.</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"></canvas>
  <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
  <script type="text/javascript" src="/js/src/fireworks.js"></script>
  

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Shero.</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">生活百般滋味，你要笑着面对😊</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/05/工具函数/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/05/工具函数/" itemprop="url">工具函数</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-05T15:58:02+08:00">
                2019-07-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JS/" itemprop="url" rel="index">
                    <span itemprop="name">JS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="js工具函数"><a href="#js工具函数" class="headerlink" title="js工具函数"></a>js工具函数</h4><h5 id="toFixed-精度高的用法"><a href="#toFixed-精度高的用法" class="headerlink" title="toFixed 精度高的用法"></a>toFixed 精度高的用法</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function round(number, precision) &#123;</span><br><span class="line">  return Math.round(+number + &apos;e&apos; + precision) / Math.pow(10, precision);</span><br><span class="line">&#125;</span><br><span class="line">* 注意整数使用toFixed 写法需要括号(6).toFixed(2)</span><br></pre></td></tr></table></figure>
<h5 id="switch实现"><a href="#switch实现" class="headerlink" title="switch实现"></a>switch实现</h5><ul>
<li><p>数组+索引</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function previewWeek(i) &#123;</span><br><span class="line">  return  i &gt; 0 &amp;&amp; i &lt; 8 ? &apos;星期&apos;+[&apos;一&apos;,&apos;二&apos;,&apos;三&apos;,&apos;四&apos;,&apos;五&apos;,&apos;六&apos;,&apos;日&apos;][i-1] : &apos;&apos;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>map</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function previewWeek(i)&#123;</span><br><span class="line">  let weeksMap = new Map([</span><br><span class="line">      [1, &apos;一&apos;],</span><br><span class="line">      [2, &apos;二&apos;],</span><br><span class="line">      [3, &apos;三&apos;],</span><br><span class="line">      [4, &apos;四&apos;],</span><br><span class="line">      [5, &apos;五&apos;],</span><br><span class="line">      [6, &apos;六&apos;],</span><br><span class="line">      [7, &apos;日&apos;]</span><br><span class="line">  ]);</span><br><span class="line">  return weeksMap.get(i) ? &apos;星期&apos;+weeksMap.get(i) : &apos;&apos;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="过滤数组中的false"><a href="#过滤数组中的false" class="headerlink" title="过滤数组中的false"></a>过滤数组中的false</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, 0, undefined, null, false];</span><br><span class="line">arr.filter(Boolean);</span><br></pre></td></tr></table></figure>
<h5 id="创建一个纯净的空对象"><a href="#创建一个纯净的空对象" class="headerlink" title="创建一个纯净的空对象"></a>创建一个纯净的空对象</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let dict = Object.create(null);</span><br><span class="line">dict.__proto__ === &quot;undefined&quot;</span><br></pre></td></tr></table></figure>
<h5 id="合并对象"><a href="#合并对象" class="headerlink" title="合并对象"></a>合并对象</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const page = &#123;</span><br><span class="line">    current: 1,</span><br><span class="line">    pageSize: 10</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const obj = &#123;</span><br><span class="line">    name: &apos;&apos;,</span><br><span class="line">    sex: &apos;&apos;</span><br><span class="line">&#125;</span><br><span class="line">const params = &#123;...obj, ...page&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="解构赋值使用别名"><a href="#解构赋值使用别名" class="headerlink" title="解构赋值使用别名"></a>解构赋值使用别名</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const obj = &#123; x: 1 &#125;;</span><br><span class="line">// Grabs obj.x as &#123; x &#125;</span><br><span class="line">const &#123; x &#125; = obj;</span><br><span class="line"></span><br><span class="line">// Grabs obj.x as &#123; otherName &#125;</span><br><span class="line">const &#123; x: otherName &#125; = obj;</span><br></pre></td></tr></table></figure>
<h5 id="数组map方法，抽离数组对象中的某个属性"><a href="#数组map方法，抽离数组对象中的某个属性" class="headerlink" title="数组map方法，抽离数组对象中的某个属性"></a>数组map方法，抽离数组对象中的某个属性</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const cities = [</span><br><span class="line">    &#123; name: &apos;Paris&apos;, visited: &apos;no&apos; &#125;,</span><br><span class="line">    &#123; name: &apos;Lyon&apos;, visited: &apos;no&apos; &#125;,</span><br><span class="line">    &#123; name: &apos;Marseille&apos;, visited: &apos;yes&apos; &#125;,</span><br><span class="line">    &#123; name: &apos;Rome&apos;, visited: &apos;yes&apos; &#125;,</span><br><span class="line">    &#123; name: &apos;Milan&apos;, visited: &apos;no&apos; &#125;,</span><br><span class="line">    &#123; name: &apos;Palermo&apos;, visited: &apos;yes&apos; &#125;,</span><br><span class="line">    &#123; name: &apos;Genoa&apos;, visited: &apos;yes&apos; &#125;,</span><br><span class="line">    &#123; name: &apos;Berlin&apos;, visited: &apos;no&apos; &#125;,</span><br><span class="line">    &#123; name: &apos;Hamburg&apos;, visited: &apos;yes&apos; &#125;,</span><br><span class="line">    &#123; name: &apos;New York&apos;, visited: &apos;yes&apos; &#125;</span><br><span class="line">];</span><br><span class="line">const cityNames = Array.from(cities, (&#123; name&#125;) =&gt; name);</span><br><span class="line">console.log(cityNames);</span><br></pre></td></tr></table></figure>
<h5 id="有条件的对象属性"><a href="#有条件的对象属性" class="headerlink" title="有条件的对象属性"></a>有条件的对象属性</h5><ul>
<li>根据一个条件创建两个不同的对象，可以使用展开运算符号来处理<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const getUser = (emailIncluded) =&gt; &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    name: &apos;John&apos;,</span><br><span class="line">    surname: &apos;Doe&apos;,</span><br><span class="line">    ...emailIncluded &amp;&amp; &#123; email : &apos;john@doe.com&apos; &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">const user = getUser(true);</span><br><span class="line">console.log(user); // outputs &#123; name: &quot;John&quot;, surname: &quot;Doe&quot;, email: &quot;john@doe.com&quot; &#125;</span><br><span class="line">const userWithoutEmail = getUser(false);</span><br><span class="line">console.log(userWithoutEmail); // outputs &#123; name: &quot;John&quot;, surname: &quot;Doe&quot; &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="公用的正则表达式"><a href="#公用的正则表达式" class="headerlink" title="公用的正则表达式"></a>公用的正则表达式</h5><ul>
<li><p>国内座机号码（0341-86091234）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let reg = /\d&#123;3&#125;-\d&#123;8&#125;|\d&#123;4&#125;-\d&#123;7&#125;/;</span><br></pre></td></tr></table></figure>
</li>
<li><p>中文型姓名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let reg = /^([\u4e00-\u9fa5·]&#123;2,10&#125;)$/;</span><br></pre></td></tr></table></figure>
</li>
<li><p>车牌号</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 新能源车牌号</span><br><span class="line">let reg =  /[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领 A-Z]&#123;1&#125;[A-HJ-NP-Z]&#123;1&#125;(([0-9]&#123;5&#125;[DF])|([DF][A-HJ-NP-Z0-9][0-9]&#123;4&#125;))$/;</span><br><span class="line">// 非新能源车牌号</span><br><span class="line">let reg = /^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领 A-Z]&#123;1&#125;[A-HJ-NP-Z]&#123;1&#125;[A-Z0-9]&#123;4&#125;[A-Z0-9挂学警港澳]&#123;1&#125;$/;</span><br><span class="line">// 新能源车牌号+非新能源车牌号</span><br><span class="line">let reg = /^([京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领 A-Z]&#123;1&#125;[A-HJ-NP-Z]&#123;1&#125;(([0-9]&#123;5&#125;[DF])|([DF]([A-HJ-NP-Z0-9])[0-9]&#123;4&#125;)))|([京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领 A-Z]&#123;1&#125;[A-Z]&#123;1&#125;[A-HJ-NP-Z0-9]&#123;4&#125;[A-HJ-NP-Z0-9 挂学警港澳]&#123;1&#125;)$/;</span><br></pre></td></tr></table></figure>
</li>
<li><p>手机号校验</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 手机号严谨</span><br><span class="line">let reg = /^1((3[\d])|(4[5,6,7,9])|(5[0-3,5-9])|(6[5-7])|(7[0-8])|(8[\d])|(9[1,8,9]))\d&#123;8&#125;$/;</span><br><span class="line">// 手机号宽松</span><br><span class="line">let reg = /^1[3-9]\d&#123;9&#125;$/;</span><br><span class="line">或者 let reg = /^1[3456789]\d&#123;9&#125;$/;</span><br><span class="line">// 手机号（最简单的11位校验）</span><br><span class="line">let reg = /^1\d&#123;10&#125;$/;</span><br></pre></td></tr></table></figure>
</li>
<li><p>email地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let reg = /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;</span><br></pre></td></tr></table></figure>
</li>
<li><p>身份证</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 一代身份证(15位数)</span><br><span class="line">let reg = /^\d&#123;8&#125;(0\d|11|12)([0-2]\d|30|31)\d&#123;3&#125;$/;</span><br><span class="line">// 二代身份证(18位数)</span><br><span class="line">let reg = /^\d&#123;6&#125;(18|19|20)\d&#123;2&#125;(0\d|11|12)([0-2]\d|30|31)\d&#123;3&#125;(\d|X|x)$/;</span><br><span class="line">// 一代身份证+二代身份证</span><br><span class="line">let reg = /(^\d&#123;8&#125;(0\d|11|12)([0-2]\d|30|31)\d&#123;3&#125;$)|(^\d&#123;6&#125;(18|19|20)\d&#123;2&#125;(0\d|11|12)([0-2]\d|30|31)\d&#123;3&#125;(\d|X|x)$)/;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="年月日格式替换"><a href="#年月日格式替换" class="headerlink" title="年月日格式替换"></a>年月日格式替换</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">filterDate(date) &#123;</span><br><span class="line">  let _date = date.replace(/[年月]/g, &apos;-&apos;);</span><br><span class="line">  let _day = _date_.replace(/[日]/, &apos;&apos;);</span><br><span class="line">  return _day;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">filterDateName(date) &#123;</span><br><span class="line">  let [year, month, day] = `$&#123;date&#125;`.split(&apos;-&apos;);</span><br><span class="line">  return `$&#123;year&#125;年$&#123;month&#125;月$&#123;day&#125;日`;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h5 id="js简单粗暴截断数组"><a href="#js简单粗暴截断数组" class="headerlink" title="js简单粗暴截断数组"></a>js简单粗暴截断数组</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let array = [0, 1, 2, 3, 4, 5];</span><br><span class="line">array.length = 3;</span><br><span class="line">console.log(array);</span><br><span class="line">Output: [0, 1, 2];</span><br></pre></td></tr></table></figure>
<h5 id="随机排列数组中的元素"><a href="#随机排列数组中的元素" class="headerlink" title="随机排列数组中的元素"></a>随机排列数组中的元素</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, 2, 3, 4, 5, 6, 7, 8, 9];</span><br><span class="line">console.log(arr.sort(function() &#123; return Math.random() - 0.5&#125;));</span><br></pre></td></tr></table></figure>
<h5 id="展平多维数组"><a href="#展平多维数组" class="headerlink" title="展平多维数组"></a>展平多维数组</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let entries = [1, [2, 5], [6, 7], 9];</span><br><span class="line">let flat_entries = [].concat(...entries);</span><br></pre></td></tr></table></figure>
<h5 id="提取唯一值"><a href="#提取唯一值" class="headerlink" title="提取唯一值"></a>提取唯一值</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let entries = [1, 2, 2, 3, 4, 5, 6, 6, 7, 7, 8, 4, 2, 1];</span><br><span class="line">let unique_entries = [...new Set(entries)];</span><br><span class="line">console.log(unique_entries); // [1, 2, 3, 4, 5, 6, 7, 8]</span><br></pre></td></tr></table></figure>
<h5 id="动态属性名称"><a href="#动态属性名称" class="headerlink" title="动态属性名称"></a>动态属性名称</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const dynamic = &apos;flavour&apos;;</span><br><span class="line">let item = &#123;    name: &apos;Coke&apos;,    [dynamic]: &apos;Cherry&apos;&#125;;</span><br><span class="line">console.log(item); // &#123; name: &quot;Coke&quot;, flavour: &quot;Cherry&quot; &#125;</span><br></pre></td></tr></table></figure>
<h4 id="手机号码脱敏显示-前三位和后三位"><a href="#手机号码脱敏显示-前三位和后三位" class="headerlink" title="手机号码脱敏显示 前三位和后三位"></a>手机号码脱敏显示 前三位和后三位</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">secretPhone(phone) &#123;</span><br><span class="line">  if(!phone || phone.length !== 11) &#123;</span><br><span class="line">    return &apos;&apos;</span><br><span class="line">  &#125; </span><br><span class="line">  return phone</span><br><span class="line">    .match(/(\d&#123;3&#125;)(\d&#123;5&#125;)(\d&#123;3&#125;)/)</span><br><span class="line">    .slice(1)</span><br><span class="line">    .reduce(function(value, item, index) &#123;</span><br><span class="line">      return index === 1 ? value + &apos;*****&apos; : value + item;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="数组乱序"><a href="#数组乱序" class="headerlink" title="数组乱序"></a>数组乱序</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const shuffleArray = (arr) =&gt; arr.sort(() =&gt; Math.random() - 0.5)</span><br><span class="line">// 测试</span><br><span class="line">const arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];</span><br><span class="line">console.log(shuffleArray(arr))</span><br></pre></td></tr></table></figure>
<h4 id="滚动到顶部、滚动到底部"><a href="#滚动到顶部、滚动到底部" class="headerlink" title="滚动到顶部、滚动到底部"></a>滚动到顶部、滚动到底部</h4><ul>
<li>“smooth “来实现平滑的滚动动画</li>
<li>如scrollToTop方法，scrollToBottom方法<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const scrollToTop = (element) =&gt; &#123;</span><br><span class="line">  element.scrollIntoView(&#123; behavior: &quot;smooth&quot;, block: &quot;start&quot; &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const scrollToBottom = (element) =&gt; &#123;</span><br><span class="line">  element.scrollIntoView(&#123; behavior: &quot;smooth&quot;, block: &quot;end&quot; &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="生成随机颜色"><a href="#生成随机颜色" class="headerlink" title="生成随机颜色"></a>生成随机颜色</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const generateRandomHexColor = () =&gt; &#123;</span><br><span class="line">  return `#$&#123;Math.floor(Math.random() * 0xffffff).toString(16)&#125;`;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="JavaScript常见错误"><a href="#JavaScript常见错误" class="headerlink" title="JavaScript常见错误"></a>JavaScript常见错误</h5><ul>
<li><a href="https://juejin.im/post/5d0b9338f265da1bb80c34fd" style="color: blue;" target="_blank" rel="noopener">To Learn More</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/04/小程序踩坑/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/04/小程序踩坑/" itemprop="url">小程序踩坑</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-04T11:18:48+08:00">
                2019-07-04
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/微信小程序/" itemprop="url" rel="index">
                    <span itemprop="name">微信小程序</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="容易忽视的小程序细节"><a href="#容易忽视的小程序细节" class="headerlink" title="容易忽视的小程序细节"></a>容易忽视的小程序细节</h4><h5 id="wx-for属性"><a href="#wx-for属性" class="headerlink" title="wx:for属性"></a>wx:for属性</h5><pre><code>* 绑定一个数组，默认数组当前项的下标变量名为index，数组当前项默认为 item
* 实质是遍历Array数组，但在开发中经常会遇到遍历**Object对象**,会使用在多层嵌套的循环中，不可避免的会重定义item与index
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wx:for-item=&quot;xxx&quot;</span><br><span class="line">wx:for-index=&quot;xxx&quot;</span><br></pre></td></tr></table></figure>
<p><strong>针对对象Object,以上两个属性木有用呀</strong></p>
<ul>
<li>一般复杂的逻辑，尽量数据结构都是键值对key-value的显示吧，可以让不认真看文档的我，开发效率提高哟</li>
</ul>
<h5 id="scroll-view"><a href="#scroll-view" class="headerlink" title="scroll-view"></a>scroll-view</h5><ul>
<li><p>可滚动视图区域 <strong>值得注意的是，行内样式的设置</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">width: 100%;</span><br><span class="line">white-space: nowrap; // 不进行换行</span><br></pre></td></tr></table></figure>
</li>
<li><p>会遇到需求就是滚动区域内的布局，可换行，<strong>两者之间会冲突，取舍去吧</strong></p>
</li>
<li>微信小程序之Android环境下的横向滚动，当遇到不能滚动时，加上overflow-x: auto</li>
</ul>
<h5 id="wx-navigator-不可跳转到pages是底部tab"><a href="#wx-navigator-不可跳转到pages是底部tab" class="headerlink" title="wx.navigator 不可跳转到pages是底部tab"></a>wx.navigator 不可跳转到pages是底部tab</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wx.switchTab(&#123;</span><br><span class="line">    url: &apos;/pages/xxx/xxx&apos;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h5 id="wx-getSystemInfoSync获取windowHeight不准确"><a href="#wx-getSystemInfoSync获取windowHeight不准确" class="headerlink" title="wx.getSystemInfoSync获取windowHeight不准确"></a>wx.getSystemInfoSync获取windowHeight不准确</h5><ul>
<li>主要原因在于获取是时机，wx.getSystemInfoSync是在页面初始化的时候就计算了，基本上可以理解为是屏幕高度。所以，最好的方法是使用异步接口，并且在onReady函数中调用。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">onReady() &#123;</span><br><span class="line">  wx.getSystemInfo(&#123;</span><br><span class="line">    success(&#123;windowHeight&#125;) &#123;</span><br><span class="line">      // todo</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="无法获取UnionID的问题"><a href="#无法获取UnionID的问题" class="headerlink" title="无法获取UnionID的问题"></a>无法获取UnionID的问题</h5><ul>
<li>login获取UID必须满足两个条件：<ul>
<li>把小程序和公众号都绑定在开放平台</li>
<li>用户必须已经关注公众号</li>
</ul>
</li>
<li>用wx.getUserInfo获取满足一个条件：<ul>
<li>把小程序和公众号都绑定在开放平台</li>
</ul>
</li>
</ul>
<h5 id="wx-getUserInfo-接口更改问题"><a href="#wx-getUserInfo-接口更改问题" class="headerlink" title="wx.getUserInfo()接口更改问题"></a>wx.getUserInfo()接口更改问题</h5><p>*微信小程序最近被吐槽最多的一个更改，就是用户使用wx.getUserInfo（开发和体验版）时不会弹出授权，正式版不受影响。现在授权方式是需要引导用户点击一个授权按钮，然后再弹出授权。</p>
<ul>
<li>解法很长，请参考:</li>
<li><a href="http://caibaojian.com/wx-getuserinfo.html" style="color: blue;" target="_blank" rel="noopener">微信小程序不支持wx.getUserInfo授权的解决方法</a></li>
<li><a href="https://developers.weixin.qq.com/community/develop/doc/000aacd65388b86a44c69fd9a52804" style="color: blue;" target="_blank" rel="noopener">getUserInfo兼容解决方案</a></li>
</ul>
<ul>
<li><a href="http://www.wxappclub.com/topic/596" style="color: blue;" target="_blank" rel="noopener">想了解more跳转</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/03/blog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/03/blog/" itemprop="url">blog</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-03T17:21:26+08:00">
                2019-07-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/blog/" itemprop="url" rel="index">
                    <span itemprop="name">blog</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="新建blog"><a href="#新建blog" class="headerlink" title="新建blog"></a>新建blog</h4><ul>
<li>hexo new 博客名称</li>
<li>本地预览 hexo s</li>
<li>新建页面 hexo new page “about”</li>
<li>提交发布<ul>
<li>hexo generate</li>
<li>hexo deploy (提交不上时， git config –global user.email/user.name, 删除根目录.deploy_git,重新执行指令)</li>
</ul>
</li>
<li>结束，可以去看你的博客啦</li>
<li>git push origin dev -u  把本地dev push到origin的dev -u表示同时建立关联，以后再推送到远程只需git push origin</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/03/小程序引入iconfont踩坑/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/03/小程序引入iconfont踩坑/" itemprop="url">小程序引入iconfont踩坑</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-03T16:48:26+08:00">
                2019-07-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/微信小程序/" itemprop="url" rel="index">
                    <span itemprop="name">微信小程序</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="小程序引入iconfont踩坑"><a href="#小程序引入iconfont踩坑" class="headerlink" title="小程序引入iconfont踩坑"></a>小程序引入iconfont踩坑</h4><ul>
<li>在<a href="https://www.iconfont.cn/" style="color: blue;" target="_blank" rel="noopener">阿里巴巴</a>把需要的图标加入购物车</li>
<li>添加到项目，没项目新建一个</li>
<li>下载到本地</li>
<li><p>找到iconfont.css把代码复制到小程序项目到app.wxss或者拷贝到static,通过css方式引入<strong>不想全局引用，可单独在对应wxss中使用</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;./static/iconfont/iconfont.wxss&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>替换iconfont.css中的@font-face为上面的生成代码</p>
</li>
<li><p>使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;text class=&apos;iconfont icon-jiazai&apos;&gt;&lt;/text&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>注意是iconfont不是icon</strong> 坑了我几个小时，还是踩坑太少</p>
</li>
<li><p>每次重新添加icon到项目需要<strong>重新替换</strong>@font-face为上面的生成代码，并且把新添加的图标加入iconfont.wxss</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@font-face &#123;</span><br><span class="line">  font-family: &apos;iconfont&apos;;  /* project id 1274544 */</span><br><span class="line">  src: url(&apos;//at.alicdn.com/t/font_1274544_5eej6szwu1j.eot&apos;);</span><br><span class="line">  src: url(&apos;//at.alicdn.com/t/font_1274544_5eej6szwu1j.eot?#iefix&apos;) format(&apos;embedded-opentype&apos;),</span><br><span class="line">  url(&apos;//at.alicdn.com/t/font_1274544_5eej6szwu1j.woff2&apos;) format(&apos;woff2&apos;),</span><br><span class="line">  url(&apos;//at.alicdn.com/t/font_1274544_5eej6szwu1j.woff&apos;) format(&apos;woff&apos;),</span><br><span class="line">  url(&apos;//at.alicdn.com/t/font_1274544_5eej6szwu1j.ttf&apos;) format(&apos;truetype&apos;),</span><br><span class="line">  url(&apos;//at.alicdn.com/t/font_1274544_5eej6szwu1j.svg#iconfont&apos;) format(&apos;svg&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>看起来很简单，可自己就是犯了很多低级错误rve</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/06/webpack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/06/webpack/" itemprop="url">webpack</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-06T22:00:00+08:00">
                2019-05-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tool/" itemprop="url" rel="index">
                    <span itemprop="name">tool</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h4><h5 id="有哪些常见-loader-和-plugin，你用过哪些？"><a href="#有哪些常见-loader-和-plugin，你用过哪些？" class="headerlink" title="有哪些常见 loader 和 plugin，你用过哪些？"></a>有哪些常见 loader 和 plugin，你用过哪些？</h5><ol>
<li>loader<ul>
<li>file-loader：把文件输出到一个文件夹中，在代码中通过相对 URL 去引用输出的文件</li>
<li>url-loader：和 file-loader 类似，但是能在文件很小的情况下以 base64 的方式把文件内容注入到代码中去</li>
<li>source-map-loader：加载额外的 Source Map 文件，以方便断点调试</li>
<li>image-loader：加载并且压缩图片文件</li>
<li>babel-loader：把 ES6 转换成 ES5</li>
<li>css-loader：加载 CSS，支持模块化、压缩、文件导入等特性</li>
<li>style-loader：把 CSS 代码注入到 JavaScript 中，通过 DOM 操作去加载 CSS。</li>
<li>eslint-loader：通过 ESLint 检查 JavaScript 代码</li>
</ul>
</li>
<li>plugin<ul>
<li>define-plugin：定义环境变量</li>
<li>commons-chunk-plugin：提取公共代码</li>
<li>uglifyjs-webpack-plugin：通过UglifyES压缩ES6代码</li>
</ul>
</li>
</ol>
<h5 id="loader-和-plugin-的区别是什么？"><a href="#loader-和-plugin-的区别是什么？" class="headerlink" title="loader 和 plugin 的区别是什么？"></a>loader 和 plugin 的区别是什么？</h5><ol>
<li>不同的作用<ul>
<li>Loader直译为”加载器”。Webpack将一切文件视为模块，但是webpack原生是只能解析js文件，如果想将其他文件也打包的话，就会用到loader。 所以Loader的作用是让webpack拥有了加载和解析非JavaScript文件的能力。<br>Plugin直译为”插件”。Plugin可以扩展webpack的功能，让webpack具有更多的灵活性。 在 Webpack 运行的生命周期中会广播出许多事件，Plugin 可以监听这些事件，在合适的时机通过 Webpack 提供的 API 改变输出结果。</li>
</ul>
</li>
<li>不同的用法<ul>
<li>Loader在module.rules中配置，也就是说他作为模块的解析规则而存在。 类型为数组，每一项都是一个Object，里面描述了对于什么类型的文件（test），使用什么加载(loader)和使用的参数（options）<br>Plugin在plugins中单独配置。 类型为数组，每一项是一个plugin的实例，参数都通过构造函数传入。</li>
</ul>
</li>
</ol>
<h5 id="如何按需加载代码？"><a href="#如何按需加载代码？" class="headerlink" title="如何按需加载代码？"></a>如何按需加载代码？</h5><ol>
<li><p>Vue UI组件库的按需加载 为了快速开发前端项目，经常会引入现成的UI组件库如ElementUI、iView等，但是他们的体积和他们所提供的功能一样，是很庞大的。 而通常情况下，我们仅仅需要少量的几个组件就足够了，但是我们却将庞大的组件库打包到我们的源码中，造成了不必要的开销。<br>不过很多组件库已经提供了现成的解决方案，如Element出品的babel-plugin-component和AntDesign出品的babel-plugin-import 安装以上插件后，在.babelrc配置中或babel-loader的参数中进行设置，即可实现组件按需加载了。</p>
</li>
<li><p>单页应用的按需加载 现在很多前端项目都是通过单页应用的方式开发的，但是随着业务的不断扩展，会面临一个严峻的问题——首次加载的代码量会越来越多，影响用户的体验。<br>通过import(<em>)语句来控制加载时机，webpack内置了对于import(</em>)的解析，会将import(<em>)中引入的模块作为一个新的入口在生成一个chunk。 当代码执行到import(</em>)语句时，会去加载Chunk对应生成的文件。import()会返回一个Promise对象，所以为了让浏览器支持，需要事先注入Promise polyfill</p>
</li>
</ol>
<h5 id="如何提高构建速度？"><a href="#如何提高构建速度？" class="headerlink" title="如何提高构建速度？"></a>如何提高构建速度？</h5><ol>
<li>多入口情况下，使用CommonsChunkPlugin来提取公共代码</li>
<li>通过externals配置来提取常用库</li>
<li>利用DllPlugin和DllReferencePlugin预编译资源模块 通过DllPlugin来对那些我们引用但是绝对不会修改的npm包来进行预编译，再通过DllReferencePlugin将预编译的模块加载进来。</li>
<li>使用Happypack 实现多线程加速编译</li>
<li>使用webpack-uglify-parallel来提升uglifyPlugin的压缩速度。 原理上webpack-uglify-parallel采用了多核并行压缩来提升压缩速度</li>
<li>使用Tree-shaking和Scope Hoisting来剔除多余代码</li>
</ol>
<h5 id="转义出的文件过大怎么办？"><a href="#转义出的文件过大怎么办？" class="headerlink" title="转义出的文件过大怎么办？"></a>转义出的文件过大怎么办？</h5><p><a href="https://zhuanlan.zhihu.com/p/44438844" style="color: blue" target="_blank" rel="noopener">更多资源</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/06/http/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/06/http/" itemprop="url">HTTP协议与安全</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-06T11:16:48+08:00">
                2019-05-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/http/" itemprop="url" rel="index">
                    <span itemprop="name">http</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h4><h5 id="HTTP协议的主要特点"><a href="#HTTP协议的主要特点" class="headerlink" title="HTTP协议的主要特点"></a>HTTP协议的主要特点</h5><ul>
<li>简单快速（每个资源是固定的url） </li>
<li>灵活（通过头部type会有不同结果） </li>
<li>无连接（连接一次就会断掉） </li>
<li>无状态（客户端和服务端）</li>
</ul>
<h5 id="HTTP报文的组成部分"><a href="#HTTP报文的组成部分" class="headerlink" title="HTTP报文的组成部分"></a>HTTP报文的组成部分</h5><ol>
<li>请求报文<ul>
<li>请求行 （http方法 页面地址 http协议 http版本）</li>
<li>请求头 （key val 值告诉服务端需要什么内容 注意类型）</li>
<li>空行   （遇到空行时，下一个当着请求体）</li>
<li>请求体</li>
</ul>
</li>
<li>响应报文（状态行，响应头，空行，响应体） </li>
</ol>
<h5 id="HTTP-状态码"><a href="#HTTP-状态码" class="headerlink" title="HTTP 状态码"></a>HTTP 状态码</h5><ul>
<li>1xx:指示信息，请求已接收，继续处理</li>
<li>2xx 表示成功，请求已被成功接收</li>
<li>3xx 表示需要进一步操作，重定向，完成请求必须进行进一步的操作</li>
<li>4xx 表示浏览器方面出错，客户端错误，请求有语法错误或者请求无法实现</li>
<li>5xx 表示服务器方面出错，服务端错误，服务器未能实现合法的请求</li>
</ul>
<h5 id="常见状态码"><a href="#常见状态码" class="headerlink" title="常见状态码"></a>常见状态码</h5><ul>
<li>200 客户端请求成功</li>
<li>206 客户发送一个带有range(范围)头的GET请求，服务器完成它（用于视频）    </li>
<li>301 所请求的页面已经转移至新的url</li>
<li>302 所请求的页面已经临时转移至新的url</li>
<li>304 客户端有缓冲的文档并发出了一个条件性的请求，服务器告诉客户，原来缓冲的文档还可以继续使用</li>
<li>400 客户端请求有语法错误，不能被服务器所理解</li>
<li>401 请求未经授权，这个状态码必须和WWW-Authenticate报文域一起使用 </li>
<li>403 对被请求页面的访问被禁止</li>
<li>404 请求资源不存在</li>
<li>500 服务器发生不可预期的错误原来缓冲的文档还可以继续使用</li>
<li>503 请求未完成，服务器临时过载或当机，一段时间后可能恢复正常<br><a href="http://www.runoob.com/http/http-status-codes.html" style="color: blue;" target="_blank" rel="noopener">想了解更多</a> </li>
</ul>
<h5 id="HTTP-缓存-缓存就是资源文件在浏览器中存在的备份或者副本-如：网上请求的图片，去存在本地磁盘"><a href="#HTTP-缓存-缓存就是资源文件在浏览器中存在的备份或者副本-如：网上请求的图片，去存在本地磁盘" class="headerlink" title="HTTP 缓存 (缓存就是资源文件在浏览器中存在的备份或者副本,如：网上请求的图片，去存在本地磁盘)"></a>HTTP 缓存 (缓存就是资源文件在浏览器中存在的备份或者副本,如：网上请求的图片，去存在本地磁盘)</h5><ul>
<li>缓存分类<ul>
<li>强缓存(以下两个缓存都下发，以后者为准)<ul>
<li>Expires Expires:THu,21 Jan 2017 23:39/;02 GMT（绝对时间，客服端和服务器时间不一致，比较的时候，是一浏览器时间，下发是服务器时间）</li>
<li>Cache-Control Cache-Control:max-age=3600（3600是相对时间）</li>
</ul>
</li>
<li>协商缓存（和服务器协商）<ul>
<li>Last-Modified If-Modified-Since Last-Modified: Web, 26 Jan 2017 23:39/;02 GMT</li>
<li>Etag If-None-Match</li>
</ul>
</li>
<li>与浏览器缓存相关的http头有哪些，就是以上几个</li>
</ul>
</li>
<li>总结：<ul>
<li>ETag 是通过对比浏览器和服务器资源的特征值（如MD5）来决定是否要发送文件内容，如果一样就只发送 304（not modified）</li>
<li>Expires 是设置过期时间（绝对时间），但是如果用户的本地时间错乱了，可能会有问题</li>
<li>CacheControl: max-age=3600 是设置过期时长（相对时间），跟本地时间无关<br><a href="https://imweb.io/topic/5795dcb6fb312541492eda8c" style="color: blue;" target="_blank" rel="noopener">详细了解 ETag、CacheControl、Expires 的异同</a></li>
</ul>
</li>
</ul>
<h5 id="GET-和-POST-的区别"><a href="#GET-和-POST-的区别" class="headerlink" title="GET 和 POST 的区别"></a>GET 和 POST 的区别</h5><ul>
<li>一般理解<ol>
<li>GET在浏览器回退时是无害的，而POST会再次提交请求</li>
<li>GET产生的URL地址可以被加入收藏栏，而POST不可以</li>
<li>GET请求会被浏览器主动cache，而POST不会，除非手动设置</li>
<li>GET请求只能进行url编码，而POST支持多种编码方式</li>
<li>GET请求参数会被完整保留在浏览器历史记录里，而POST中的参数不会被保留</li>
<li>GET请求在URL中传送的参数是有长度限制的，而POST么有</li>
<li>对参数的数据类型，GET只接受ASCII字符，而POST没有限制</li>
<li>GET比POST更不安全，因为参数直接暴露在URL上，所以不能用来传递敏感信息</li>
<li>GET参数通过URL传递，POST放在Request body中</li>
</ol>
</li>
<li>核心<ul>
<li>就一个区别：语义——GET 用于获取资源，POST 用于提交资源<br><a href="https://zhuanlan.zhihu.com/p/22536382" style="color: blue;" target="_blank" rel="noopener"> 请参考 </a></li>
</ul>
</li>
</ul>
<h5 id="Cookie-V-S-LocalStorage-V-S-SessionStorage-V-S-Session"><a href="#Cookie-V-S-LocalStorage-V-S-SessionStorage-V-S-Session" class="headerlink" title="Cookie V.S. LocalStorage V.S. SessionStorage V.S. Session"></a>Cookie V.S. LocalStorage V.S. SessionStorage V.S. Session</h5><ul>
<li>Cookie V.S. LocalStorage<ul>
<li>主要区别是 Cookie 会被发送到服务器，而 LocalStorage 不会</li>
<li>Cookie 一般最大 4k，LocalStorage 可以用 5Mb 甚至 10Mb（各浏览器不同）</li>
</ul>
</li>
<li>LocalStorage V.S. SessionStorage<ul>
<li>LocalStorage 一般不会自动过期（除非用户手动清除），而 SessionStorage 在会话结束时过期（如关闭浏览器）</li>
</ul>
</li>
<li>Cookie V.S. Session<ul>
<li>Cookie 存在浏览器的文件里，Session 存在服务器的文件里</li>
<li>Session 是基于 Cookie 实现的，具体做法就是把 SessionID 存在 Cookie 里</li>
</ul>
</li>
</ul>
<h5 id="XSS（Cross-Site-Scripting）：跨越脚本攻击"><a href="#XSS（Cross-Site-Scripting）：跨越脚本攻击" class="headerlink" title="XSS（Cross-Site Scripting）：跨越脚本攻击"></a>XSS（Cross-Site Scripting）：跨越脚本攻击</h5><ul>
<li>原理<ul>
<li>不需要做任何的登录验证，核心原理向页面注入脚本</li>
</ul>
</li>
<li>造成 XSS 有几个要点：<ol>
<li>恶意用户可以提交内容</li>
<li>提交的内容可以显示在另一个用户的页面上</li>
<li>这些内容未经过滤，直接运行在另一个用户的页面上</li>
</ol>
</li>
<li>XSS 的成因以及防御措施<ol>
<li>后台模板问题：要后台输出的时候，将可疑的符号 &lt; 符号变成 &lt; （HTML实体）就行。</li>
<li>前端代码问题：就是不要自己拼 HTML，尽量使用 text 方法。如果一定要使用 HTML，就把可疑符号变成 HTML 实体</li>
</ol>
</li>
</ul>
<h5 id="CSRF（Cross-Site-Request-Forgery）：跨站请求伪造"><a href="#CSRF（Cross-Site-Request-Forgery）：跨站请求伪造" class="headerlink" title="CSRF（Cross Site Request Forgery）：跨站请求伪造"></a>CSRF（Cross Site Request Forgery）：跨站请求伪造</h5><ul>
<li>原理<ul>
<li>攻击者构造网站后台某个功能接口的请求地址，诱导用户去点击或者用特殊方法让该请求地址自动加载。用户在登录状态下这个请求被服务端接收后会被误以为是用户合法的操作。对于 GET 形式的接口地址可轻易被攻击，对于 POST 形式的接口地址也不是百分百安全，攻击者可诱导用户进入带 Form 表单可用POST方式提交参数的页面。</li>
</ul>
</li>
<li>使用anti-csrf-token的方案。 具体方案如下：<ol>
<li>服务端在收到路由请求时，生成一个随机数，在渲染请求页面时把随机数埋入页面（一般埋入 form 表单内，<input type="hidden" name="_csrf_token" value="xxxx">）</li>
<li>服务端设置setCookie，把该随机数作为cookie或者session种入用户浏览器</li>
<li>当用户发送 GET 或者 POST 请求时带上_csrf_token参数（对于 Form 表单直接提交即可，因为会自动把当前表单内所有的 input 提交给后台，包括_csrf_token）</li>
<li>后台在接受到请求后解析请求的cookie获取_csrf_token的值，然后和用户请求提交的_csrf_token做个比较，如果相等表示请求是合法的。</li>
</ol>
</li>
<li>总结：<ol>
<li>CSRF<ul>
<li>(网站中某个接口存在漏洞，用户在这个注册网站确实登录过) </li>
<li>防御措施 <ul>
<li>Token验证：用户请求之后，会返回cookie信息，并且服务器向本地存储Token</li>
<li>Referer验证: 页面来源，服务器判断页面来源是否是当前站点下的</li>
</ul>
</li>
</ul>
</li>
<li>xss: 向xss注入的js不可执行  </li>
</ol>
</li>
<li>两者区别<ul>
<li>xss向页面注入js运行，js函数体去做想做的</li>
<li>CSRF是利用本身的漏洞，帮你去执行相应的接口</li>
</ul>
</li>
<li>推荐查阅资料<ol>
<li><a href="https://zhuanlan.zhihu.com/p/22521378" style="color: blue;" target="_blank" rel="noopener"> 文章 xsrf </a></li>
<li><a href="https://zhuanlan.zhihu.com/p/22500730" style="color: blue;" target="_blank" rel="noopener"> 文章 xss </a></li>
<li><a href="http://www.imooc.com/learn/812" style="color: blue;" target="_blank" rel="noopener"> 视频 csrf xss </a></li>
</ol>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/05/ cross-domain/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/05/ cross-domain/" itemprop="url">跨域</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-05T22:08:28+08:00">
                2019-05-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JS/" itemprop="url" rel="index">
                    <span itemprop="name">JS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="跨域的几种解决方案"><a href="#跨域的几种解决方案" class="headerlink" title="跨域的几种解决方案"></a>跨域的几种解决方案</h4><h5 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h5><p><a href="https://zhuanlan.zhihu.com/p/22600501" style="color: blue;" target="_blank" rel="noopener">来龙去脉啦</a></p>
<ul>
<li>同源策略(Same origin Policy)：浏览器出于安全方面的考虑，只允许与同域下的接口交互。</li>
<li>同域指的是？<ul>
<li>同协议：都是http或者https</li>
<li>同域名：都是<a href="http://baidu.com/a" target="_blank" rel="noopener">http://baidu.com/a</a> 和<a href="http://baidu.com/b" target="_blank" rel="noopener">http://baidu.com/b</a></li>
<li>同端口：都是80端口</li>
</ul>
</li>
<li>JSONP的原理<ol>
<li>JSONP是通过 script 标签加载数据的方式去获取数据当做 JS 代码来执行</li>
<li>提前在页面上声明一个函数，函数名通过<strong>接口传参</strong>的方式传给后台，后台解析到函数名后在原始数据上「包裹」这个函数名，发送给前端。换句话说，JSONP 需要对应接口的后端的配合才能实现<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">// 简单的实现原理就是</span><br><span class="line"> &lt;script src=&quot;http://www.abc.com/?data=name&amp;callback=jsonp&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    jsonp showData(res) &#123;</span><br><span class="line">        console.log(res);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">// 借用大佬封装的代码</span><br><span class="line">function jsonp(setting) &#123;</span><br><span class="line">  setting.data = setting.data || &#123;&#125;;</span><br><span class="line">  setting.key = setting.key || &apos;callback&apos;;</span><br><span class="line">  setting.callback = setting.callback || function() &#123;&#125;;</span><br><span class="line">  setting.data[setting.key] = &apos;__onGetData__&apos;;</span><br><span class="line"></span><br><span class="line">  window.__onGetData__ = function(data) &#123;</span><br><span class="line">    setting.callback (data);</span><br><span class="line">  &#125;</span><br><span class="line">  var script = document.createElement(&apos;script&apos;);</span><br><span class="line">  var query = [];</span><br><span class="line">  for(var key in setting.data) &#123;</span><br><span class="line">    query.push( key + &apos;=&apos; + encodeURIComponent(setting.data[key]));</span><br><span class="line">  &#125;</span><br><span class="line">  script.src = setting.url + &apos;?&apos; + query.join(&apos;&amp;&apos;);</span><br><span class="line">  document.head.appendChild(script);</span><br><span class="line">  document.head.removeChild(script);</span><br><span class="line">&#125;</span><br><span class="line">jsonp(&#123;</span><br><span class="line">  url: &apos;http://api.baidu.com/weather.php&apos;,</span><br><span class="line">  callback: function(res) &#123;</span><br><span class="line">    console.log(res)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">jsonp(&#123;</span><br><span class="line">  url: &apos;http://photo.sina.cn/aj/index&apos;,</span><br><span class="line">  key: &apos;jsoncallback&apos;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    page: 1,</span><br><span class="line">    cate: &apos;recommend&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  callback: function(res) &#123;</span><br><span class="line">    console.log(res)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<h5 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS" style="color: blue;" target="_blank" rel="noopener">CORS</a></h5><p><a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" style="color: blue;" target="_blank" rel="noopener">阮一峰教程</a></p>
<ul>
<li>CORS需要浏览器和服务器同时支持</li>
<li>实现CORS通信的关键是服务器。只要服务器实现了CORS接口，就可以跨源通信。<br>在header信息中添加Origin<br>CORS与JSONP的使用目的相同，但是比JSONP更强大。<br>JSONP只支持GET请求，CORS支持所有类型的HTTP请求。JSONP的优势在于支持老式浏览器，以及可以向不支持CORS的网站请求数据。</li>
</ul>
<h5 id="闭包（Closure）"><a href="#闭包（Closure）" class="headerlink" title="闭包（Closure）"></a>闭包（Closure）</h5><p><a href="https://zhuanlan.zhihu.com/p/22486908" style="color: blue;" target="_blank" rel="noopener">还是老师厉害</a></p>
<ul>
<li><strong>「函数」和「函数内部能访问到的变量」（也叫环境）的总和，就是一个闭包</strong></li>
<li>平时我们的认知的闭包:「需要函数套函数，然后 return 一个函数的呀！」<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function foo() &#123;</span><br><span class="line">  var local = 1;</span><br><span class="line">  function bar() &#123;</span><br><span class="line">    local++;</span><br><span class="line">    return local;</span><br><span class="line">  &#125;</span><br><span class="line">  return bar; // return  window.bar = bar;</span><br><span class="line">&#125;</span><br><span class="line">var func = foo();</span><br><span class="line">func();</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="为什么要函数套函数呢？"><a href="#为什么要函数套函数呢？" class="headerlink" title="为什么要函数套函数呢？"></a>为什么要函数套函数呢？</h5><ul>
<li>因为需要局部变量，所以才把 local 放在一个函数里，如果不把 local 放在一个函数里，local 就是一个全局变量了，达不到使用闭包的目的——隐藏变量<br>闭包的原文是 Closure，跟「包」没有任何关系。<br>所以函数套函数只是为了造出一个局部变量，跟闭包无关。</li>
</ul>
<h5 id="为什么要-return-bar-呢？"><a href="#为什么要-return-bar-呢？" class="headerlink" title="为什么要 return bar 呢？"></a>为什么要 return bar 呢？</h5><ul>
<li>因为如果不 return，你就无法使用这个闭包。把 return bar 改成 window.bar = bar 也是一样的，只要让外面可以访问到这个 bar 函数就行了。</li>
<li>所以 return bar 只是为了 bar 能被使用，也跟闭包无关。</li>
</ul>
<h5 id="闭包的作用"><a href="#闭包的作用" class="headerlink" title="闭包的作用"></a>闭包的作用</h5><ul>
<li>闭包常常用来「间接访问一个变量」。换句话说，「隐藏一个变量」</li>
<li>暴露一个访问器（函数），让别人可以「间接访问」</li>
</ul>
<h5 id="你们闭包会造成内存泄漏？"><a href="#你们闭包会造成内存泄漏？" class="headerlink" title="你们闭包会造成内存泄漏？"></a>你们闭包会造成内存泄漏？</h5><ul>
<li>内存泄露是指你用不到（访问不到）的变量，依然占居着内存空间，不能被再次利用起来</li>
<li>闭包里面的变量明明就是我们需要的变量，凭什么说是内存泄露？<ul>
<li>因为 IE。IE 有 bug，IE 在我们使用完闭包之后，依然回收不了闭包里面引用的变量</li>
<li>这是 IE 的问题，不是闭包的问题。<a href="http://www.cnblogs.com/rubylouvre/p/3345294.html#undefined" style="color: blue;" target="_blank" rel="noopener">参见司徒正美的这篇文章</a></li>
</ul>
</li>
</ul>
<h5 id="立即执行函数"><a href="#立即执行函数" class="headerlink" title="立即执行函数"></a>立即执行函数</h5><ul>
<li>声明一个匿名函数</li>
<li>马上调用这个匿名函数<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(function()&#123;alert(&apos;我是匿名函数&apos;)&#125;)()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="那么为什么还要用另一对括号把匿名函数包起来呢？"><a href="#那么为什么还要用另一对括号把匿名函数包起来呢？" class="headerlink" title="那么为什么还要用另一对括号把匿名函数包起来呢？"></a>那么为什么还要用另一对括号把匿名函数包起来呢？</h5><ul>
<li>为了兼容 JS 的语法</li>
<li>不加的话，览器会报语法错误。想要通过浏览器的语法检查，必须加点小东西，比如下面几种都OK👌<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(function()&#123;alert(&apos;我是匿名函数&apos;)&#125; ()) // 用括号把整个表达式包起来</span><br><span class="line">(function()&#123;alert(&apos;我是匿名函数&apos;)&#125;) () //用括号把函数包起来</span><br><span class="line">!function()&#123;alert(&apos;我是匿名函数&apos;)&#125;() // 求反，我们不在意值是多少，只想通过语法检查</span><br><span class="line">+function()&#123;alert(&apos;我是匿名函数&apos;)&#125;()</span><br><span class="line">-function()&#123;alert(&apos;我是匿名函数&apos;)&#125;()</span><br><span class="line">~function()&#123;alert(&apos;我是匿名函数&apos;)&#125;()</span><br><span class="line">void function()&#123;alert(&apos;我是匿名函数&apos;)&#125;()</span><br><span class="line">new function()&#123;alert(&apos;我是匿名函数&apos;)&#125;()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="立即执行函数有什么用？"><a href="#立即执行函数有什么用？" class="headerlink" title="立即执行函数有什么用？"></a>立即执行函数有什么用？</h5><ul>
<li>创建一个独立的作用域。使这个作用域里面的变量，外面访问不到（即避免「变量污染」）</li>
<li>以下经典案列<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var liList = ul.getElementsByTagName(&apos;li&apos;)</span><br><span class="line">for(var i = 0; i &lt; 6; i++) &#123;</span><br><span class="line">  liList[i].onclick = function() &#123;</span><br><span class="line">    alert(i); // 为什么 alert 出来的总是 6，而不是 0、1、2、3、4、5</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>i 是贯穿整个作用域的，而不是给每个 li 分配了一个 i，用户一定是在for运行完之后才点击，此时都i为6<br>用立即执行函数给每个 li 创造一个独立作用域即可（当然还有其他办法: 如 let）：<br><a href="https://jsbin.com/gicusajoqi/edit?html,js,output" style="color: blue;" target="_blank" rel="noopener">还原效果，click me!</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var ul = document.getElementsByTagName(&apos;ul&apos;)[0]</span><br><span class="line">var liList = ul.getElementsByTagName(&apos;li&apos;);</span><br><span class="line">for(var i = 0; i &lt; 6; i++) &#123;</span><br><span class="line">  !function(ii) &#123;</span><br><span class="line">    liList[ii].onclick = function() &#123;</span><br><span class="line">      alert(ii); // 0、1、2、3、4、5</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在立即执行函数执行的时候，i 的值被赋值给 ii，此后 ii 的值一直不变。<br>i 的值从 0 变化到 5，对应 6 个立即执行函数，这 6 个立即执行函数里面的 ii 「分别」是 0、1、2、3、4、5。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/05/this/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/05/this/" itemprop="url">this</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-05T15:31:36+08:00">
                2019-05-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JS/" itemprop="url" rel="index">
                    <span itemprop="name">JS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="this到底指向谁呢？"><a href="#this到底指向谁呢？" class="headerlink" title="this到底指向谁呢？"></a>this到底指向谁呢？</h4><p><a href="https://zhuanlan.zhihu.com/p/25991271" style="color: blue;" target="_blank" rel="noopener">惊喜在这里</a></p>
<h5 id="看自己平时积累了"><a href="#看自己平时积累了" class="headerlink" title="看自己平时积累了"></a>看自己平时积累了</h5><ol>
<li>fn()           this =&gt; window/global</li>
<li>obj.fn()       this =&gt; obj</li>
<li>fn.call(xx)    this =&gt; xx</li>
<li>fn.apply(xx)   this =&gt; xx</li>
<li>fn.bind(xx)    this =&gt; xx</li>
<li>new Fn()       this =&gt; 新创建的对象</li>
<li>fn = ()=&gt; {}   this =&gt; 外面的 this</li>
</ol>
<h5 id="看调用"><a href="#看调用" class="headerlink" title="看调用"></a>看调用</h5><ul>
<li>函数调用</li>
<li>JS（ES5）里面有三种函数调用形式<ul>
<li>func(p1, p2) </li>
<li>obj.child.method(p1, p2)</li>
<li>func.call(context, p1, p2)</li>
</ul>
</li>
<li>一般我们都比较倾向于使用前两种，第三种不知道什么鬼东西呀<br>其他两种都是语法糖，可以等价地变为 call 形式：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">func(p1, p2) 等价于 func.call(undefined, p1, p2)</span><br><span class="line">obj.child.method(p1, p2) 等价于 obj.child.method.call(obj.child, p1, p2)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>函数调用只有一种形式</strong> ： func.call(context, p1, p2), context就是this</p>
<h5 id="看看下面的举例"><a href="#看看下面的举例" class="headerlink" title="看看下面的举例"></a>看看下面的举例</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function func() &#123;</span><br><span class="line">  console.log(this)</span><br><span class="line">&#125;</span><br><span class="line">func();</span><br><span class="line">// 等价转化一下</span><br><span class="line">func.call(undefined) // 可简写为 func.call()， 结果就是window</span><br></pre></td></tr></table></figure>
<p>是不是疑问应该是undefined呢？可不能忘记<strong>浏览器</strong>里有一条规则：</p>
<ul>
<li>如果你传的context是 null 或者 undefined，那window 对象就是默认的 context（但严格模式下（’use strict’）默认 context 是 undefined）</li>
</ul>
<p>如果你不想this是window，好说，那就这样吧： func.call(obj) // 那么里面的 this 就是 obj 对象了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;</span><br><span class="line">  foo: function() &#123;</span><br><span class="line">    console.log(this);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.foo(); // 等价转化为obj.foo.call(obj) ，结果就是obj</span><br></pre></td></tr></table></figure></p>
<p>看看下面的代码，是不是so easy! :(<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;</span><br><span class="line">  foo: function() &#123;</span><br><span class="line">    console.log(this);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var bar = obj.foo;</span><br><span class="line">obj.foo(); // 转换为 obj.foo.call(obj)，this 就是 obj</span><br><span class="line">bar() </span><br><span class="line">// 转换为 bar.call(), 没有传 context, 所以 this 就是 undefined</span><br><span class="line">// 最后浏览器给你一个默认的 this —— window 对象</span><br></pre></td></tr></table></figure></p>
<h5 id="类似-的，this怎么指向呢"><a href="#类似-的，this怎么指向呢" class="headerlink" title="类似 [] 的，this怎么指向呢"></a>类似 [] 的，this怎么指向呢</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function fn () &#123; </span><br><span class="line">    console.log(this);</span><br><span class="line">&#125;</span><br><span class="line">var arr = [fn, fn2];</span><br><span class="line">arr[0]() // arr 转换为 arr.0() arr.0.call(arr) (语法是有问题的，这样推理木有问题呀)</span><br></pre></td></tr></table></figure>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><ul>
<li><strong>this 就是你 call 一个函数时，传入的第一个参数</strong></li>
<li>如果你的函数调用形式不是 call 形式，请<strong>[转换代码]</strong>将其转换为 call 形式。</li>
</ul>
<h5 id="问题又来了，Event-Handler-中的-this-指什么呢？"><a href="#问题又来了，Event-Handler-中的-this-指什么呢？" class="headerlink" title="问题又来了，Event Handler 中的 this 指什么呢？"></a>问题又来了，Event Handler 中的 this 指什么呢？</h5><p>不知道ddEventListener 的源代码，怎么办呢？<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">btn.addEventListener(&apos;click&apos; ,function handler()&#123;</span><br><span class="line">  console.log(this) // 请问这里的 this 是什么</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener#The_value_of_this_within_the_handler" style="color: blue;" target="_blank" rel="noopener">MDN 对this解释</a></p>
<ul>
<li>通常来说this的值是触发事件的元素的引用，这种特性在多个相似的元素使用同一个通用事件监听器时非常让人满意。 </li>
<li>当使用 addEventListener() 为一个元素注册事件的时候，句柄里的 this 值是该元素的引用。其与传递给句柄的 event 参数的 currentTarget 属性的值一样。<br>所以你可以想浏览器的源码是这样写的：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 当事件被触发时</span><br><span class="line">handler.call(event.currentTarget, event) </span><br><span class="line">// 那么 this 是什么不言而喻</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="jQuery-Event-Handler-中的-this"><a href="#jQuery-Event-Handler-中的-this" class="headerlink" title="jQuery Event Handler 中的 this"></a>jQuery Event Handler 中的 this</h5><p>下面代码中的 this 是什么呢：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ul.on(&apos;click&apos;, &apos;li&apos; , function()&#123;</span><br><span class="line">  console.log(this)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p><a href="https://www.jquery123.com/on/" style="color: blue;" target="_blank" rel="noopener">jQuery 文档是这样写的:</a></p>
<ul>
<li>当jQuery的调用处理程序时，this关键字指向的是当前正在执行事件的元素。对于直接事件而言，this 代表绑定事件的元素。</li>
<li><strong>对于代理事件而言，this 则代表了与 selector 相匹配的元素</strong>。(注意，如果事件是从后代元素冒泡上来的话，那么 this 就有可能不等于 event.target。)若要使用 jQuery 的相关方法，可以根据当前元素创建一个 jQuery 对象，即使用 $(this)。</li>
</ul>
<h5 id="总结一下如何确定-this-的值"><a href="#总结一下如何确定-this-的值" class="headerlink" title="总结一下如何确定 this 的值"></a>总结一下如何确定 this 的值</h5><ol>
<li>看源码中对应的函数是怎么被 call 的（这是最靠谱的办法）</li>
<li>看文档</li>
<li>console.log(this)</li>
<li>不要瞎猜，你猜不到的:(</li>
</ol>
<h5 id="如何强制指定-this-的值，call-apply-即可："><a href="#如何强制指定-this-的值，call-apply-即可：" class="headerlink" title="如何强制指定 this 的值，call/apply 即可："></a>如何强制指定 this 的值，call/apply 即可：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function handlerWrapper(event) &#123;</span><br><span class="line">  function handler() &#123;</span><br><span class="line">    console.log(this); // 请问这里的 this 是什么</span><br><span class="line">  &#125;</span><br><span class="line">  handler.call(&#123;name: &apos;xlc&apos;&#125;, event)</span><br><span class="line">&#125;</span><br><span class="line">btn.addEventListener(&apos;click&apos;, handlerWrapper);</span><br><span class="line">// 也可以直接使用bind</span><br><span class="line">function handler() &#123;</span><br><span class="line">  console.log(this); // 请问这里的 this 是什么</span><br><span class="line">&#125;</span><br><span class="line">var handlerWrapper = handler.bind(&#123;name: &apos;xlc&apos;&#125;)</span><br><span class="line">btn.addEventListener(&apos;click&apos;, handlerWrapper);</span><br><span class="line">// 上面代码可以简化为</span><br><span class="line">btn.addEventListener(&apos;click&apos;, function() &#123;</span><br><span class="line">  console.log(this); // 请问这里的 this 是什么</span><br><span class="line">&#125;.bind(&#123;name: &apos;xlc&apos;&#125;))</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/05/es6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/05/es6/" itemprop="url">ES6</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-05T10:03:29+08:00">
                2019-05-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JS/" itemprop="url" rel="index">
                    <span itemprop="name">JS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="ES6-语法及应用"><a href="#ES6-语法及应用" class="headerlink" title="ES6 语法及应用"></a>ES6 语法及应用</h4><p><a href="https://jscode.me/t/topic/109" style="color: blue;" target="_blank" rel="noopener">es6学习可参照</a></p>
<h5 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h5><ul>
<li>块级作用域： 由一对大括号{}界定</li>
<li>块级变量 let：声明一个块级作用域的本地变量，可选的将其初始化为一个值</li>
<li>块级常量 const: 常量的值不能通过重新赋值来改变，并且不能重新声明(<strong> 是否指向同一个内存地址 </strong>)</li>
</ul>
<h5 id="let、const与var的区别"><a href="#let、const与var的区别" class="headerlink" title="let、const与var的区别"></a>let、const与var的区别</h5><ul>
<li>var<ul>
<li>可以重复定义</li>
<li>可以随意更改</li>
<li>没有块级作用域</li>
</ul>
</li>
<li>let与const<ul>
<li>在同一个块级作用域中，不允许重复定义</li>
<li>const定义的变量不允许二次修改</li>
<li>let和const定义的变量会形成块级作用域</li>
<li>它们定义的变量不存在变量提升，以及存在暂时性死区</li>
</ul>
</li>
</ul>
<h5 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h5><ul>
<li>sum = (a, b) =&gt; a + b</li>
<li>nums.forEach( v =&gt; { console.log(v) })</li>
<li>强大之处 this指向不会更改</li>
</ul>
<h5 id="参数处理"><a href="#参数处理" class="headerlink" title="参数处理"></a>参数处理</h5><ul>
<li><p>默认参数值: 允许在没有值或undefined被传入时使用默认形参</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function multiply(a, b = 1) &#123;</span><br><span class="line">  return a * b;</span><br><span class="line">&#125;</span><br><span class="line">console.log(multiply(5, 2)); // 10</span><br><span class="line">console.log(multiply(5)); // 5</span><br></pre></td></tr></table></figure>
</li>
<li><p>剩余参数: 允许将一个不定数量的参数（theArgs）表示为一个数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function sum(...theArgs) &#123;</span><br><span class="line">  return theArgs.reduce((previous, current) =&gt; &#123;</span><br><span class="line">    return previous + current;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">console.log(sum(1, 2, 3)); // 6</span><br><span class="line">console.log(sum(1, 2, 3, 4)); // 10</span><br></pre></td></tr></table></figure>
</li>
<li><p>展开运算符: 函数调用时，将表达式(数组/对象-简单的数据类型)做对应语法的展开</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function sum(x, y, z) &#123;</span><br><span class="line">  return x + y + z;</span><br><span class="line">&#125;</span><br><span class="line">const numbers = [1, 2, 3];</span><br><span class="line">console.log(sum(...numbers)); // 6</span><br><span class="line">console.log(sum.apply(null, numbers)); // 6</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="模板字面量：允许嵌入表达式的字符串字面量-反引号包裹字符串"><a href="#模板字面量：允许嵌入表达式的字符串字面量-反引号包裹字符串" class="headerlink" title="模板字面量：允许嵌入表达式的字符串字面量, 反引号包裹字符串"></a>模板字面量：允许嵌入表达式的字符串字面量, 反引号包裹字符串</h5><ul>
<li>多行字符串 <code>字符串内容</code></li>
<li>字符串插值 <code>${字符串变量}</code></li>
<li>带标签的模板字面量</li>
<li>原始字符串</li>
</ul>
<h5 id="解构赋值-将值从数组，或属性从对象，提取到不同的变量中"><a href="#解构赋值-将值从数组，或属性从对象，提取到不同的变量中" class="headerlink" title="解构赋值: 将值从数组，或属性从对象，提取到不同的变量中"></a>解构赋值: 将值从数组，或属性从对象，提取到不同的变量中</h5><ul>
<li>数组匹配 [ b, a ] = [ a, b ]</li>
<li>对象匹配 let obj = {a: 1, b: 23}; let { a, b, c } = obj;  </li>
<li>参数匹配 function fun({ name: n, val: v }) {}</li>
</ul>
<h5 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h5><ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/import" style="color: blue;" target="_blank" rel="noopener">导入import</a> ：导入由另一个模块导出的绑定<ul>
<li>import {foo, bar as b} from ‘/xxx.js’;</li>
<li>常使用导入多个接口，或者重命名接口名称都很实用</li>
</ul>
</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/export" style="color: blue;" target="_blank" rel="noopener">导出export</a></li>
<li>默认导出 export default: export default function(){} / export default class {}</li>
</ul>
<h5 id="类"><a href="#类" class="headerlink" title="类"></a>类</h5><ul>
<li>使用 extends 实现继承</li>
<li>重写构造器</li>
<li>super 关键字</li>
</ul>
<h6 id="是否有class关键字实现继承"><a href="#是否有class关键字实现继承" class="headerlink" title="是否有class关键字实现继承"></a>是否有class关键字实现继承</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function Animal(color)&#123;</span><br><span class="line">    this.color = color</span><br><span class="line">&#125;</span><br><span class="line">Animal.prototype.move = function() &#123;&#125;</span><br><span class="line">function Dog(color, name) &#123;</span><br><span class="line">    Animal.call(this, color); // 或者 Animal.apply(this, arguments)</span><br><span class="line">    this.name = name;</span><br><span class="line">&#125;</span><br><span class="line">// 下面三行实现 Dog.prototype.__proto__ = Animal.prototype</span><br><span class="line">function temp() &#123;&#125;</span><br><span class="line">temp.prototye = Animal.prototype;</span><br><span class="line">Dog.prototype = new temp();</span><br><span class="line">Dog.prototype.constuctor = Dog;</span><br><span class="line">Dog.prototype.say = function()&#123; console.log(&apos;汪&apos;)&#125;</span><br><span class="line">var dog = new Dog(&apos;白色&apos;,&apos;咪汪&apos;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class Animal &#123;</span><br><span class="line">    constructor(color) &#123;</span><br><span class="line">        this.color = color</span><br><span class="line">    &#125;</span><br><span class="line">    move()&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">class Dog extends Animal &#123;</span><br><span class="line">    constructor(color, name) &#123;</span><br><span class="line">        super(color)</span><br><span class="line">        this.name = name</span><br><span class="line">    &#125;</span><br><span class="line">    say() &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="原有内置对象-API-增强"><a href="#原有内置对象-API-增强" class="headerlink" title="原有内置对象 API 增强"></a>原有内置对象 API 增强</h5><ul>
<li>常用<ul>
<li>Object.assign：将所有可枚举属性的值从一个或多个源对象复制到目标对象。它将返回目标对象。Object.assign(target, …source);</li>
<li>Array.from: 从一个类似数组或可迭代对象中创建一个新的数组实例。Array.from(arrayLike[, mapFn[, thisArg]])</li>
</ul>
</li>
</ul>
<h5 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h5><h6 id="Promise-一个异步操作的最终状态（完成或失败），以及该异步操作的结果值"><a href="#Promise-一个异步操作的最终状态（完成或失败），以及该异步操作的结果值" class="headerlink" title="Promise: 一个异步操作的最终状态（完成或失败），以及该异步操作的结果值"></a>Promise: 一个异步操作的最终状态（完成或失败），以及该异步操作的结果值</h6><pre><code>* pending: 初始状态，既不是成功，也不是失败状态。
* fulfilled: 操作成功完成。
* rejected: 操作失败。
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function fn()&#123;</span><br><span class="line">    return new Promise((resolve, reject)=&gt;&#123;</span><br><span class="line">        成功时调用 resolve(数据)</span><br><span class="line">        失败时调用 reject(错误)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">fn().then(success, fail).then(success2, fail2)</span><br></pre></td></tr></table></figure>
<h6 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all"></a>Promise.all</h6><ul>
<li>promise1和promise2<strong>都成功</strong>，才会调用success1</li>
<li>promise1和promise2有<strong>一个失败</strong>，都会调用fail1<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Promise.all([promise1, promise2]).then(success1, fail1)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race"></a>Promise.race</h6><ul>
<li>promise1和promise2只要有<strong>一个成功</strong>就会调用success1</li>
<li>promise1和promise2<strong>都失败</strong>，才会调用fail1<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Promise.race([promise1, promise2]).then(success1, fail1)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="手写一个-Promise-参考"><a href="#手写一个-Promise-参考" class="headerlink" title="手写一个 Promise 参考"></a>手写一个 Promise <a href="https://juejin.im/post/5aafe3edf265da238f125c0a" style="color: blue;" target="_blank" rel="noopener">参考</a></h5><h5 id="async-与-await"><a href="#async-与-await" class="headerlink" title="async 与 await"></a>async 与 await</h5><ul>
<li>与Promise相关，</li>
<li>如果是异步函数， 它的语法和结构会更像是标准的<strong>同步函数</strong></li>
</ul>
<ol>
<li><p>promise实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function fn() &#123;</span><br><span class="line">  return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      let n = parseInt(Math.random() * 6 + 1, 10); // [0, 5)</span><br><span class="line">      resolve(n);</span><br><span class="line">    &#125;, 3000);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">fn().then(</span><br><span class="line">  (n) =&gt; &#123;</span><br><span class="line">    console.log(&apos;成功返回骰子数&apos; + n);</span><br><span class="line">  &#125;,</span><br><span class="line">  (err) =&gt; &#123;</span><br><span class="line">    console.log(&apos;失败返回!&apos;);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>await的简单使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">async function test() &#123;</span><br><span class="line">  // test的执行，或者n的赋值一定是在3s之后才执行</span><br><span class="line">  let n = await fn();</span><br><span class="line">  console.log(n);</span><br><span class="line">&#125;</span><br><span class="line">test();</span><br></pre></td></tr></table></figure>
</li>
<li><p>await语法中error错误处理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">function fn(params) &#123;</span><br><span class="line">  return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      let n = parseInt(Math.random() * 6 + 1, 10); // [0, 6)</span><br><span class="line">      if (n &gt; 3) &#123;</span><br><span class="line">        if (params === ‘大’) &#123;</span><br><span class="line">          resolve(n);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          reject(n);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        if (params === ‘小’) &#123;</span><br><span class="line">          resolve(n);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          reject(n);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, 3000);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">async function test() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    let n = await fn(&apos;大&apos;);</span><br><span class="line">    console.log(&apos;猜中了&apos; + n);</span><br><span class="line">  &#125; catch (error) &#123;</span><br><span class="line">    console.log(&apos;输了&apos; + error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">test();</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li><p>处理错误2（更优雅 try、catch搞太多代码难看些）</p>
<ul>
<li>使用库async-to-js await-to-js</li>
<li>库async-to-js的to函数返回一个Promise且值是一个数组，数组之中有两个元素，如果索引为0的元素不为空值，说明该请求报错，如果索引0的元素为空值说明该请求没有报错，也就是成功</li>
<li>？错误在0的位置（错误优先的原则）<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">const handleLogin = async () =&gt; &#123;</span><br><span class="line">  const [resErr, res] = await to(request(&apos;/xx/xx&apos;, &#123;</span><br><span class="line">    usename: &apos;&apos;,</span><br><span class="line">    password: &apos;&apos;</span><br><span class="line">  &#125;))</span><br><span class="line">  if (resErr) &#123;</span><br><span class="line">    // fail do somthing</span><br><span class="line">    return</span><br><span class="line">  &#125;</span><br><span class="line">  const [userErr, info] = await to(request(&apos;/xx/xx&apos;, &#123;</span><br><span class="line">    id: res.id</span><br><span class="line">  &#125;))</span><br><span class="line">  if (userErr) &#123;</span><br><span class="line">    // fail do somthing</span><br><span class="line">    return</span><br><span class="line">  &#125;</span><br><span class="line">  this.userInfo = info</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>处理async/await中的错误用try/catch是有什么不好的地方</p>
<ul>
<li>有时候需要在上一条 await 语句 reject 的时候，不中断 async 函数的执行，继续执行后续的 await，try…catch 捕获的粒度没办法做到很细，除非给每个 await 语句都加上 try…catch，这样太麻烦，所以用了下这个库，这种风格实际上是参考了 Golang 中的异常处理机制，因为 Golang 里面没有 try…catch，抛一个 panic 直接中断程序执行了</li>
</ul>
</li>
<li>?多个await呢？而且每个await的错误处理都不同的话，那try catch咋做<ul>
<li>写一个工具函数来await执行异步方法，在它内部通过try-catch处理异常，外部通过返回值来获取异常</li>
</ul>
</li>
</ul>
<ol start="4">
<li><p>同时调用fn函数，Promise处理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Promise.all([fn(&apos;大&apos;), fn(&apos;大&apos;)]).then(</span><br><span class="line">  res =&gt; &#123;</span><br><span class="line">    console.log(res);</span><br><span class="line">  &#125;,</span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>同时调用fn函数，await处理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">async function test() &#123;</span><br><span class="line">  // test的执行，或者n的赋值一定是在3s之后才执行</span><br><span class="line">  try &#123;</span><br><span class="line">    let n = await Promise.all([fn(&apos;大&apos;), fn(&apos;大&apos;)]);</span><br><span class="line">    console.log(&apos;猜中了&apos; + n);</span><br><span class="line">  &#125; catch (error) &#123;</span><br><span class="line">    console.log(&apos;输了&apos; + error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">test();</span><br></pre></td></tr></table></figure>
<p> async与await返回的都是Promise,async与await可理解为Promise的语法糖<br> <a href="http://es6.ruanyifeng.com/?search=async&x=0&y=0#docs/async" style="color: blue;" target="_blank" rel="noopener">想了解更多，看阮一峰-es6教程</a></p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/04/vertical-center/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/04/vertical-center/" itemprop="url">实现垂直居中、flex</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-04T21:49:01+08:00">
                2019-05-04
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSS/" itemprop="url" rel="index">
                    <span itemprop="name">CSS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="实现垂直居中"><a href="#实现垂直居中" class="headerlink" title="实现垂直居中"></a>实现垂直居中</h4><ul>
<li>如果父元素.parent的height未知，只需要<strong>padding: 10px 0</strong>; 就能将子元素.child垂直居中</li>
<li>如果父元素.parent的height已知，就很难把子元素.child居中</li>
</ul>
<h5 id="以下是垂直居中的方法"><a href="#以下是垂直居中的方法" class="headerlink" title="以下是垂直居中的方法"></a>以下是垂直居中的方法</h5><ol>
<li><p>table布局实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">.parent &#123;</span><br><span class="line">  height: 500px;</span><br><span class="line">  border: 1px solid #ff9400;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.child &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">  border: 1px solid #ff0000;</span><br><span class="line">&#125;</span><br><span class="line">&lt;table class=&quot;parent&quot;&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td class=&quot;child&quot;&gt;居中元素&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>给父元素添加伪元素（100% 高度的 afrer before 加上 inline block）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">.parent &#123;</span><br><span class="line">  height: 500px;</span><br><span class="line">  border: 1px solid #ff9400;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.child &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  vertical-align: middle;</span><br><span class="line">  border: 1px solid #ff0000;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.parent:after,</span><br><span class="line">.parent:before &#123;</span><br><span class="line">  content: &apos;&apos;;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  height: 100%;</span><br><span class="line">  vertical-align: middle;</span><br><span class="line">&#125;</span><br><span class="line"> &lt;div class=&quot;parent&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;child&quot;&gt;垂直居中元素&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>table属性应用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">.parent &#123;</span><br><span class="line">  display: table;</span><br><span class="line">  height: 500px;</span><br><span class="line">  border: 1px solid #ff9400;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.parent &gt; div &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">  display: table-cell;</span><br><span class="line">  vertical-align: middle;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.child &#123;</span><br><span class="line">  border: 1px solid #ff0000;</span><br><span class="line">&#125;</span><br><span class="line">&lt;div class=&quot;parent&quot;&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div class=&quot;child&quot;&gt;垂直居中元素&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>position定位实现，margin设置负值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">.parent &#123;</span><br><span class="line">  height: 500px;</span><br><span class="line">  position: relative;</span><br><span class="line">  border: 1px solid #ff9400;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.child &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">  height: 100px;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left: 50%;</span><br><span class="line">  top: 50%;</span><br><span class="line">  margin-left: -150px;</span><br><span class="line">  margin-top: -50px;</span><br><span class="line">  border: 1px solid #ff0000;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;parent&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;child&quot;&gt;垂直居中元素&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>也是定位，只是应用了css3 的 translate</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.child &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left: 50%;</span><br><span class="line">  top: 50%;</span><br><span class="line">  transform: translate(-50%,-50%);</span><br><span class="line">  border: 1px solid #ff0000;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>同样是定位，不过巧妙的用了margin: auto</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.child &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">  height: 50px;</span><br><span class="line">  position: absolute;</span><br><span class="line">  margin: auto;</span><br><span class="line">  left: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">  top: 0;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  border: 1px solid #ff0000;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>是不是终于到大家常用的flex啦</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.parent &#123;</span><br><span class="line">  height: 500px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">  border: 1px solid #ff9400;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.child &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">  border: 1px solid #ff0000;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>想快速看到效果：<a href="https://jsbin.com/fayekiwita/edit?html,css,output" style="color: blue;" target="_blank" rel="noopener">自己动手吧:)</a><br><strong>能不写 height 就千万别写 height吧</strong><br>    欢迎👏贡献更多方法</p>
<h4 id="flex"><a href="#flex" class="headerlink" title="flex"></a>flex</h4><ul>
<li>flex的属性还是需要多实践操作，才会知道具体效果</li>
<li>不妨看看阮一峰老师的教程<br><a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html" style="color: blue;" target="_blank" rel="noopener">flex-语法</a><br><a href="http://www.ruanyifeng.com/blog/2015/07/flex-examples.html" style="color: blue;" target="_blank" rel="noopener">flex-实例</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/blog-avatar.jpeg" alt="yongfeng.peng">
            
              <p class="site-author-name" itemprop="name">yongfeng.peng</p>
              <p class="site-description motion-element" itemprop="description">(女英</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">67</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yongfeng.peng</span>

  
</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
<!-- 代码块复制功能 -->
<script type="text/javascript" src="/js/src/clipboard.min.js"></script>  
<script type="text/javascript" src="/js/src/clipboard-use.js"></script>
</html>
