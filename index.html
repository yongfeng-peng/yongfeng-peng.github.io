<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="(女英">
<meta property="og:type" content="website">
<meta property="og:title" content="Shero.">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Shero.">
<meta property="og:description" content="(女英">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Shero.">
<meta name="twitter:description" content="(女英">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>Shero.</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"></canvas>
  <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
  <script type="text/javascript" src="/js/src/fireworks.js"></script>
  

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Shero.</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">生活百般滋味，你要笑着面对😊</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/07/19/vite-vue3-antdv-ts-pinia项目总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/07/19/vite-vue3-antdv-ts-pinia项目总结/" itemprop="url">vite+vue3+antdv+ts+pinia项目总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-07-19T09:50:09+08:00">
                2022-07-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端框架/" itemprop="url" rel="index">
                    <span itemprop="name">前端框架</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><h4 id="vite项目require语法兼容问题"><a href="#vite项目require语法兼容问题" class="headerlink" title="vite项目require语法兼容问题"></a>vite项目require语法兼容问题</h4><ul>
<li>使用插件，vite.config.ts配置<ul>
<li>yarn add -D vite-plugin-require-transform</li>
<li>npm i vite-plugin-require-transform –save-dev</li>
</ul>
</li>
<li>遇到问题 build不成功，与ant-vue组件冲突</li>
<li>解决 <a href="https://vitejs.cn/guide/assets.html#the-public-directory" style="color: blue;" target="_blank" rel="noopener">vite静态资源处理</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/03/30/TS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/03/30/TS/" itemprop="url">TS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-03-30T14:54:03+08:00">
                2022-03-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JS/" itemprop="url" rel="index">
                    <span itemprop="name">JS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="typeScript"><a href="#typeScript" class="headerlink" title="typeScript"></a>typeScript</h3><ul>
<li><a href="https://www.typescriptlang.org/zh/" style="color: blue;" target="_blank" rel="noopener">Typescript</a> </li>
<li><a href="https://github.com/nvm-sh/nvm" style="color: blue;" target="_blank" rel="noopener">使用 nvm 来管理 node 版本</a> <h4 id="为什么要学习ts"><a href="#为什么要学习ts" class="headerlink" title="为什么要学习ts"></a>为什么要学习ts</h4></li>
<li>程序更容易理解<ul>
<li>函数或者方法输入输出的参数类型、外部条件</li>
<li>动态语言的约束：需要手动调试等过程</li>
<li>ts可以解决以上问题</li>
</ul>
</li>
<li>效率更高<ul>
<li>在不同的代码块和定义中进行跳转</li>
<li>代码自动补全</li>
<li>丰富的接口提示</li>
</ul>
</li>
<li>更少的错误<ul>
<li>编译期间能够发现大部分错误</li>
<li>杜绝一些比较常见的错误</li>
</ul>
</li>
<li>非常好的包容性<ul>
<li>完全兼容javascript</li>
<li>第三方库可以单独编写类型文件</li>
<li>大多数项目都支持ts</li>
</ul>
</li>
<li>缺点<ul>
<li>增加一些学习成本</li>
<li>短期内增加了一些开发成本</li>
</ul>
</li>
<li><p>安装 Typescript:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g typescript</span><br><span class="line">yarn global add typescript</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用 tsc 全局命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 查看 tsc 版本</span><br><span class="line">tsc -v</span><br><span class="line">// 编译 ts 文件</span><br><span class="line">tsc fileName.ts</span><br><span class="line">// 运行</span><br><span class="line">ts-node fileName.ts</span><br></pre></td></tr></table></figure>
</li>
<li><p>数组和元组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//最简单的方法是使用「类型 + 方括号」来表示数组：</span><br><span class="line">let arrOfNumbers: number[] = [1, 2, 3, 4]</span><br><span class="line">//数组的项中不允许出现其他的类型：</span><br><span class="line">//数组的一些方法的参数也会根据数组在定义时约定的类型进行限制：</span><br><span class="line">arrOfNumbers.push(3)</span><br><span class="line">arrOfNumbers.push(&apos;abc&apos;)</span><br><span class="line"></span><br><span class="line">// 元祖的表示和数组非常类似，只不过它将类型写在了里面 这就对每一项起到了限定的作用</span><br><span class="line">let user: [string, number] = [&apos;viking&apos;, 20]</span><br><span class="line">//但是当我们写少一项 就会报错 同样写多一项也会有问题</span><br><span class="line">user = [&apos;molly&apos;, 20, true]</span><br></pre></td></tr></table></figure>
</li>
<li><p>interface 接口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">// 我们定义了一个接口 Person</span><br><span class="line">interface Person &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  age: number;</span><br><span class="line">&#125;</span><br><span class="line">// 接着定义了一个变量 viking，它的类型是 Person。这样，我们就约束了 viking 的形状必须和接口 Person 一致。</span><br><span class="line">let viking: Person =&#123;</span><br><span class="line">  name: &apos;viking&apos;,</span><br><span class="line">  age: 20</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//有时我们希望不要完全匹配一个形状，那么可以用可选属性：</span><br><span class="line">interface Person &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    age?: number;</span><br><span class="line">&#125;</span><br><span class="line">let viking: Person = &#123;</span><br><span class="line">    name: &apos;Viking&apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//接下来还有只读属性，有时候我们希望对象中的一些字段只能在创建的时候被赋值，那么可以用 readonly 定义只读属性</span><br><span class="line"></span><br><span class="line">interface Person &#123;</span><br><span class="line">  readonly id: number;</span><br><span class="line">  name: string;</span><br><span class="line">  age?: number;</span><br><span class="line">&#125;</span><br><span class="line">viking.id = 9527</span><br></pre></td></tr></table></figure>
</li>
<li><p>函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// 来到我们的第一个例子，约定输入，约定输出</span><br><span class="line">function add(x: number, y: number): number &#123;</span><br><span class="line">  return x + y</span><br><span class="line">&#125;</span><br><span class="line">// 可选参数</span><br><span class="line">function add(x: number, y: number, z?: number): number &#123;</span><br><span class="line">  if (typeof z === &apos;number&apos;) &#123;</span><br><span class="line">    return x + y + z</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    return x + y</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 函数本身的类型</span><br><span class="line">const add2: (x: number, y: number, z?:number) =&gt; number = add</span><br><span class="line"></span><br><span class="line">// interface 描述函数类型</span><br><span class="line">const sum = (x: number, y: number) =&gt; &#123;</span><br><span class="line">  return x + y</span><br><span class="line">&#125;</span><br><span class="line">interface ISum &#123;</span><br><span class="line">  (x: number, y: number): number</span><br><span class="line">&#125;</span><br><span class="line">const sum2: ISum = sum</span><br></pre></td></tr></table></figure>
</li>
<li><p>类型推论，联合类型 和 类型断言</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// 联合类型 - union types</span><br><span class="line">// 我们只需要用中竖线来分割两个</span><br><span class="line">let numberOrString: number | string </span><br><span class="line">// 当 TypeScript 不确定一个联合类型的变量到底是哪个类型的时候，我们只能访问此联合类型的所有类型里共有的属性或方法：</span><br><span class="line">numberOrString.length</span><br><span class="line">numberOrString.toString()</span><br><span class="line">// 类型断言 - type assertions</span><br><span class="line">// 这里我们可以用 as 关键字，告诉typescript 编译器，你没法判断我的代码，但是我本人很清楚，这里我就把它看作是一个 string，你可以给他用 string 的方法。</span><br><span class="line">function getLength(input: string | number): number &#123;</span><br><span class="line">  const str = input as string</span><br><span class="line">  if (str.length) &#123;</span><br><span class="line">    return str.length</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    const number = input as number</span><br><span class="line">    return number.toString().length</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 类型守卫 - type guard</span><br><span class="line">// typescript 在不同的条件分支里面，智能的缩小了范围，这样我们代码出错的几率就大大的降低了。</span><br><span class="line">function getLength2(input: string | number): number &#123;</span><br><span class="line">  if (typeof input === &apos;string&apos;) &#123;</span><br><span class="line">    return input.length</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    return input.toString().length</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>枚举 Enums</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// 数字枚举，一个数字枚举可以用 enum 这个关键词来定义，我们定义一系列的方向，然后这里面的值，枚举成员会被赋值为从 0 开始递增的数字,</span><br><span class="line">enum Direction &#123;</span><br><span class="line">  Up,</span><br><span class="line">  Down,</span><br><span class="line">  Left,</span><br><span class="line">  Right,</span><br><span class="line">&#125;</span><br><span class="line">console.log(Direction.Up)</span><br><span class="line"></span><br><span class="line">// 还有一个神奇的点是这个枚举还做了反向映射</span><br><span class="line">console.log(Direction[0])</span><br><span class="line"></span><br><span class="line">// 字符串枚举</span><br><span class="line">enum Direction &#123;</span><br><span class="line">  Up = &apos;UP&apos;,</span><br><span class="line">  Down = &apos;DOWN&apos;,</span><br><span class="line">  Left = &apos;LEFT&apos;,</span><br><span class="line">  Right = &apos;RIGHT&apos;,</span><br><span class="line">&#125;</span><br><span class="line">const value = &apos;UP&apos;</span><br><span class="line">if (value === Direction.Up) &#123;</span><br><span class="line">  console.log(&apos;go up!&apos;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>泛型 Generics</p>
<ul>
<li>泛型（Generics）是指在定义函数、接口或类的时候，不预先指定具体的类型，而在使用的时候再指定类型的一种特性</li>
<li>相当于一个占位符<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function echo(arg) &#123;</span><br><span class="line">  return arg</span><br><span class="line">&#125;</span><br><span class="line">const result = echo(123)</span><br><span class="line">// 这时候我们发现了一个问题，我们传入了数字，但是返回了 any</span><br><span class="line"></span><br><span class="line">function echo&lt;T&gt;(arg: T): T &#123;</span><br><span class="line">  return arg</span><br><span class="line">&#125;</span><br><span class="line">const result = echo(123)</span><br><span class="line"></span><br><span class="line">// 泛型也可以传入多个值</span><br><span class="line">function swap&lt;T, U&gt;(tuple: [T, U]): [U, T] &#123;</span><br><span class="line">  return [tuple[1], tuple[0]]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const result = swap([&apos;string&apos;, 123])</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>泛型约束</p>
<ul>
<li>在函数内部使用泛型变量的时候，由于事先不知道它是哪种类型，所以不能随意的操作它的属性或方法<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">function echoWithArr&lt;T&gt;(arg: T): T &#123;</span><br><span class="line">  console.log(arg.length)</span><br><span class="line">  return arg</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 缺陷 只能指定特定类型</span><br><span class="line">// function echoWithArr&lt;T&gt;(arg: T[]): T[] &#123;</span><br><span class="line">//   console.log(arg.length)</span><br><span class="line">//   return arg</span><br><span class="line">// &#125;</span><br><span class="line">// 上例中，泛型 T 不一定包含属性 length，我们可以给他传入任意类型，当然有些不包括 length 属性，那样就会报错</span><br><span class="line"></span><br><span class="line">interface IWithLength &#123;</span><br><span class="line">  length: number;</span><br><span class="line">&#125;</span><br><span class="line">function echoWithLength&lt;T extends IWithLength&gt;(arg: T): T &#123;</span><br><span class="line">  console.log(arg.length)</span><br><span class="line">  return arg</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">echoWithLength(&apos;str&apos;)</span><br><span class="line">const result3 = echoWithLength(&#123;length: 10&#125;)</span><br><span class="line">const result4 = echoWithLength([1, 2, 3])</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>泛型与类和接口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">class Queue &#123;</span><br><span class="line">  private data = [];</span><br><span class="line">  push(item) &#123;</span><br><span class="line">    return this.data.push(item)</span><br><span class="line">  &#125;</span><br><span class="line">  pop() &#123;</span><br><span class="line">    return this.data.shift()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const queue = new Queue()</span><br><span class="line">queue.push(1)</span><br><span class="line">queue.push(&apos;str&apos;)</span><br><span class="line">console.log(queue.pop().toFixed())</span><br><span class="line">console.log(queue.pop().toFixed())</span><br><span class="line"></span><br><span class="line">//在上述代码中存在一个问题，它允许你向队列中添加任何类型的数据，当然，当数据被弹出队列时，也可以是任意类型。在上面的示例中，看起来人们可以向队列中添加string 类型的数据，但是那么在使用的过程中，就会出现我们无法捕捉到的错误，</span><br><span class="line"></span><br><span class="line">class Queue&lt;T&gt; &#123;</span><br><span class="line">  private data = [];</span><br><span class="line">  push(item: T) &#123;</span><br><span class="line">    return this.data.push(item)</span><br><span class="line">  &#125;</span><br><span class="line">  pop(): T &#123;</span><br><span class="line">    return this.data.shift()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">const queue = new Queue&lt;number&gt;()</span><br><span class="line"></span><br><span class="line">//泛型和 interface</span><br><span class="line">interface KeyPair&lt;T, U&gt; &#123;</span><br><span class="line">  key: T;</span><br><span class="line">  value: U;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let kp1: KeyPair&lt;number, string&gt; = &#123; key: 1, value: &quot;str&quot;&#125;</span><br><span class="line">let kp2: KeyPair&lt;string, number&gt; = &#123; key: &quot;str&quot;, value: 123&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>类型别名(Type Aliases) 和 交叉类型( Intersection Types)</p>
<ul>
<li>类型别名，就是给类型起一个别名，让它可以更方便的被重用</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">let sum: (x: number, y: number) =&gt; number</span><br><span class="line">const result = sum(1,2)</span><br><span class="line">type PlusType = (x: number, y: number) =&gt; number</span><br><span class="line">let sum2: PlusType</span><br><span class="line"></span><br><span class="line">// 支持联合类型</span><br><span class="line">type StrOrNumber = string | number</span><br><span class="line">let result2: StrOrNumber = &apos;123&apos;</span><br><span class="line">result2 = 123</span><br><span class="line"></span><br><span class="line">// 字符串字面量</span><br><span class="line">type Directions = &apos;Up&apos; | &apos;Down&apos; | &apos;Left&apos; | &apos;Right&apos;</span><br><span class="line">let toWhere: Directions = &apos;Up&apos;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface IName  &#123;</span><br><span class="line">  name: string</span><br><span class="line">&#125;</span><br><span class="line">type IPerson = IName &amp; &#123; age: number &#125;</span><br><span class="line">let person: IPerson = &#123; name: &apos;hello&apos;, age: 12&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://www.imooc.com/wiki/vue3TS/w20c7.html" style="color: blue;" target="_blank" rel="noopener">more…</a> </li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/03/28/移动端H5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/03/28/移动端H5/" itemprop="url">移动端H5</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-03-28T11:27:43+08:00">
                2022-03-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端框架/" itemprop="url" rel="index">
                    <span itemprop="name">前端框架</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="移动端H5"><a href="#移动端H5" class="headerlink" title="移动端H5"></a>移动端H5</h3><h4 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h4><ul>
<li>调用系统功能<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 拨打电话 --&gt;</span><br><span class="line">&lt;a href=&quot;tel:10086&quot;&gt;拨打电话给10086小姐姐&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 发送短信 --&gt;</span><br><span class="line">&lt;a href=&quot;sms:10086&quot;&gt;发送短信给10086小姐姐&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 发送邮件 --&gt;</span><br><span class="line">&lt;a href=&quot;mailto:young.joway@aliyun.com&quot;&gt;发送邮件给JowayYoung&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 选择照片或拍摄照片 --&gt;</span><br><span class="line">&lt;input type=&quot;file&quot; accept=&quot;image/*&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 选择视频或拍摄视频 --&gt;</span><br><span class="line">&lt;input type=&quot;file&quot; accept=&quot;video/*&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 多选文件 --&gt;</span><br><span class="line">&lt;input type=&quot;file&quot; multiple&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h4><ul>
<li><p>自动适应布局</p>
<ul>
<li><p>rem布局比例设置成1rem=100px，即在设计图上100px长度在CSS代码上使用1rem表示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function AutoResponse(width = 750) &#123;</span><br><span class="line">    const target = document.documentElement;</span><br><span class="line">    if (target.clientWidth &gt;= 600) &#123;</span><br><span class="line">        target.style.fontSize = &quot;80px&quot;;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        target.style.fontSize = target.clientWidth / width * 100 + &quot;px&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">AutoResponse();</span><br><span class="line">window.addEventListener(&quot;resize&quot;, () =&gt; AutoResponse());</span><br></pre></td></tr></table></figure>
</li>
<li><p>calc()动态声明<html>的font-size</html></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">html &#123;</span><br><span class="line">    font-size: calc(100vw / 7.5);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>iPad Pro分辨率1024px为移动端和桌面端的断点，还可结合媒体查询做断点处理。1024px以下使用rem布局，否则不使用rem布局</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@media screen and (max-width: 1024px) &#123;</span><br><span class="line">    html &#123;</span><br><span class="line">        font-size: calc(100vw / 7.5);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>监听屏幕旋转</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/* 竖屏 */</span><br><span class="line">@media all and (orientation: portrait) &#123;</span><br><span class="line">  /* 自定义样式 */</span><br><span class="line">&#125;</span><br><span class="line">/* 横屏 */</span><br><span class="line">@media all and (orientation: landscape) &#123;</span><br><span class="line">  /* 自定义样式 */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>美化滚动条</p>
<ul>
<li>::-webkit-scrollbar：滚动条整体部分</li>
<li>::-webkit-scrollbar-track：滚动条轨道部分</li>
<li>::-webkit-scrollbar-thumb：滚动条滑块部分<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">  width: 6px;</span><br><span class="line">  height: 6px;</span><br><span class="line">  background-color: transparent;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-track &#123;</span><br><span class="line">  background-color: transparent;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line">  border-radius: 3px;</span><br><span class="line">  background-image: linear-gradient(135deg, #09f, #3c9);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h4><ul>
<li>简化回到顶部<ul>
<li>该函数就是<a href="https://developer.mozilla.org/zh-CN/docs/web/api/element/scrollintoview" style="color: blue;" target="_blank" rel="noopener">scrollIntoView</a>，它会滚动目标元素的父容器使之对用户可见，简单概括就是相对视窗让容器滚动到目标元素位置。它有三个可选参数能让scrollIntoView滚动起来更优雅</li>
<li>behavior：动画过渡效果，默认auto无，可选smooth平滑</li>
<li>inline：水平方向对齐方式，默认nearest就近对齐，可选start顶部对齐、center中间对齐和end底部对齐</li>
<li>block：垂直方向对齐方式，默认start顶部对齐，可选center中间对齐、end底部对齐和nearest就近对齐</li>
<li><span style="color: red;">TIPS 当然还可滚动到目标元素位置，只需将document.body修改成目标元素的DOM对象</span> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const goTopBtn = document.getElementById(&quot;go-top-btn&quot;);</span><br><span class="line">goTopBtn.addEventListener(&quot;click&quot;, () =&gt; document.body.scrollIntoView(&#123; behavior: &quot;smooth&quot; &#125;));</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p><a href="https://juejin.cn/post/6921886428158754829#heading-24" style="color: blue;" target="_blank" rel="noopener">了解更多</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/03/23/Router/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/03/23/Router/" itemprop="url">Router</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-03-23T16:47:59+08:00">
                2022-03-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tool/" itemprop="url" rel="index">
                    <span itemprop="name">tool</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h3><h4 id="router-路由"><a href="#router-路由" class="headerlink" title="router 路由"></a>router 路由</h4><ul>
<li>应为vue是单页应用不会有那么多html 让我们跳转 所有要使用路由做页面的跳转</li>
<li>Vue 路由允许我们通过不同的 URL 访问不同的内容。通过 Vue 可以实现多视图的单页Web应用</li>
<li><p>构建前端项目</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm init vue@latest</span><br><span class="line">//或者</span><br><span class="line">npm init vite@latest</span><br></pre></td></tr></table></figure>
</li>
<li><p><span style="color: red;">使用Vue3 安装对应的router4版本</span></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router@4</span><br></pre></td></tr></table></figure>
</li>
<li><p><span style="color: red;">使用Vue2安装对应的router3版本</span></p>
</li>
<li><p>在src目录下面新建router 文件 然后在router 文件夹下面新建 index.ts</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//引入路由对象</span><br><span class="line">import &#123; createRouter, createWebHistory, createWebHashHistory, createMemoryHistory, RouteRecordRaw &#125; from &apos;vue-router&apos;</span><br><span class="line">//vue2 mode history vue3 createWebHistory</span><br><span class="line">//vue2 mode  hash  vue3  createWebHashHistory</span><br><span class="line">//vue2 mode abstact vue3  createMemoryHistory</span><br><span class="line"> </span><br><span class="line">//路由数组的类型 RouteRecordRaw</span><br><span class="line">// 定义一些路由</span><br><span class="line">// 每个路由都需要映射到一个组件。</span><br><span class="line">const routes: Array&lt;RouteRecordRaw&gt; = [&#123;</span><br><span class="line">  path: &apos;/&apos;,</span><br><span class="line">  component: () =&gt; import(&apos;../components/a.vue&apos;)</span><br><span class="line">&#125;,&#123;</span><br><span class="line">  path: &apos;/register&apos;,</span><br><span class="line">  component: () =&gt; import(&apos;../components/b.vue&apos;)</span><br><span class="line">&#125;]</span><br><span class="line"> </span><br><span class="line">const router = createRouter(&#123;</span><br><span class="line">  history: createWebHistory(),</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line">//导出router</span><br><span class="line">export default router</span><br></pre></td></tr></table></figure>
</li>
<li><p>router-link<a href="https://router.vuejs.org/zh/guide/#router-link" style="color: blue;" target="_blank" rel="noopener"> # </a></p>
<ul>
<li>没有使用常规的 a 标签，而是使用一个自定义组件 router-link 来创建链接。这使得 Vue Router 可以在不重新加载页面的情况下更改 URL，处理 URL 的生成以及编码</li>
</ul>
</li>
<li>router-view<a href="https://router.vuejs.org/zh/guide/#router-view" style="color: blue;" target="_blank" rel="noopener"> # </a><ul>
<li>router-view 将显示与 url 对应的组件。你可以把它放在任何地方，以适应你的布局</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;router&lt;/h1&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &lt;!--使用 router-link 组件进行导航 --&gt;</span><br><span class="line">    &lt;!--通过传递 `to` 来指定链接 --&gt;</span><br><span class="line">    &lt;!--`&lt;router-link&gt;` 将呈现一个带有正确 `href` 属性的 `&lt;a&gt;` 标签--&gt;</span><br><span class="line">      &lt;router-link tag=&quot;div&quot; to=&quot;/&quot;&gt;跳转a&lt;/router-link&gt;</span><br><span class="line">      &lt;router-link tag=&quot;div&quot; style=&quot;margin-left:200px&quot; to=&quot;/register&quot;&gt;跳转b&lt;/router-link&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;!-- 路由出口 --&gt;</span><br><span class="line">    &lt;!-- 路由匹配到的组件将渲染在这里 --&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>最后在main.ts 挂载<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &apos;vue&apos;</span><br><span class="line">import App from &apos;./App.vue&apos;</span><br><span class="line">import router from &apos;./router&apos;</span><br><span class="line">createApp(App).use(router).mount(&apos;#app&apos;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="命名路由-编程式导航"><a href="#命名路由-编程式导航" class="headerlink" title="命名路由-编程式导航"></a>命名路由-编程式导航</h4><ul>
<li><p>命名路由</p>
<ul>
<li>除了 path 之外，你还可以为任何路由提供 name。这有以下优点：<ul>
<li>没有硬编码的 URL</li>
<li>params 的自动编码/解码</li>
<li>防止你在 url 中出现打字错误</li>
<li>绕过路径排序（如显示一个）<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const routes:Array&lt;RouteRecordRaw&gt; = [</span><br><span class="line">    &#123;</span><br><span class="line">        path:&quot;/&quot;,</span><br><span class="line">        name:&quot;Login&quot;,</span><br><span class="line">        component:()=&gt; import(&apos;../components/login.vue&apos;)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        path:&quot;/reg&quot;,</span><br><span class="line">        name:&quot;Reg&quot;,</span><br><span class="line">        component:()=&gt; import(&apos;../components/reg.vue&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>router-link跳转方式需要改变 变为对象并且有对应name</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;router&lt;/h1&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">  &lt;router-link :to=&quot;&#123;name:&apos;Login&apos;&#125;&quot;&gt;Login&lt;/router-link&gt;</span><br><span class="line">  &lt;router-link style=&quot;margin-left:10px&quot; :to=&quot;&#123;name:&apos;Reg&apos;&#125;&quot;&gt;Reg&lt;/router-link&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;hr /&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编程式导航</p>
<ul>
<li>除了使用 <router-link> 创建 a 标签来定义导航链接，我们还可以借助 router 的实例方法，通过编写代码来实现</router-link></li>
<li><p>字符串模式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useRouter &#125; from &apos;vue-router&apos;</span><br><span class="line">const router = useRouter()</span><br><span class="line">const toPage = () =&gt; &#123;</span><br><span class="line">  router.push(&apos;/reg&apos;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>对象模式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useRouter &#125; from &apos;vue-router&apos;</span><br><span class="line">const router = useRouter()</span><br><span class="line"></span><br><span class="line">const toPage = () =&gt; &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    path: &apos;/reg&apos;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>命名式路由模式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useRouter &#125; from &apos;vue-router&apos;</span><br><span class="line">const router = useRouter()</span><br><span class="line"></span><br><span class="line">const toPage = () =&gt; &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &apos;Reg&apos;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>a标签跳转</p>
<ul>
<li>直接通过a href也可以跳转但是会刷新页面  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;/reg&quot;&gt;rrr&lt;/a&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="历史记录"><a href="#历史记录" class="headerlink" title="历史记录"></a>历史记录</h4><ul>
<li>replace的使用<ul>
<li>采用replace进行页面的跳转会同样也会创建渲染新的Vue组件，但是在history中其不会重复保存记录，而是替换原有的vue组件</li>
</ul>
</li>
<li><p>router-link 使用方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link replace to=&quot;/&quot;&gt;Login&lt;/router-link&gt;</span><br><span class="line">&lt;router-link replace style=&quot;margin-left:10px&quot; to=&quot;/reg&quot;&gt;Reg&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编程式导航</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=&quot;toPage(&apos;/&apos;)&quot;&gt;Login&lt;/button&gt;</span><br><span class="line">&lt;button @click=&quot;toPage(&apos;/reg&apos;)&quot;&gt;Reg&lt;/button&gt;</span><br><span class="line">// js</span><br><span class="line">import &#123; useRouter &#125; from &apos;vue-router&apos;</span><br><span class="line">const router = useRouter()</span><br><span class="line">const toPage = (url: string) =&gt; &#123;</span><br><span class="line">  router.replace(url)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>横跨历史</p>
<ul>
<li>该方法采用一个整数作为参数，表示在历史堆栈中前进或后退多少步<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=&quot;next&quot;&gt;前进&lt;/button&gt;</span><br><span class="line"> &lt;button @click=&quot;prev&quot;&gt;后退&lt;/button&gt;</span><br><span class="line">const next = () =&gt; &#123;</span><br><span class="line">  //前进 数量不限于1</span><br><span class="line">  router.go(1)</span><br><span class="line">&#125;</span><br><span class="line">const prev = () =&gt; &#123;</span><br><span class="line">  //后退</span><br><span class="line">  router.back()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="路由传参"><a href="#路由传参" class="headerlink" title="路由传参"></a>路由传参</h4><ul>
<li><p>Query路由传参</p>
<ul>
<li>编程式导航 使用router push 或者 replace 的时候 改为对象形式新增query 必须传入一个对象<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const toDetail = (item: Item) =&gt; &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">      path: &apos;/reg&apos;,</span><br><span class="line">      query: item</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>接受参数</p>
<ul>
<li><span style="color: red;">使用 useRoute 的 query</span><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useRoute &#125; from &apos;vue-router&apos;;</span><br><span class="line">const route = useRoute()</span><br><span class="line">&lt;div&gt;ID：&#123;&#123; route.query?.id &#125;&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Params路由传参</p>
<ul>
<li>编程式导航 使用router push 或者 replace 的时候 改为对象形式并且只能使用name，path无效，然后传入params<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const toDetail = (item: Item) =&gt; &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &apos;Reg&apos;,</span><br><span class="line">    params: item</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>接受参数</p>
<ul>
<li><span style="color: red;">使用 useRoute 的 params</span><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useRoute &#125; from &apos;vue-router&apos;;</span><br><span class="line">const route = useRoute()</span><br><span class="line">&lt;div&gt;品牌：&#123;&#123; route.params?.name &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;div&gt;价格：&#123;&#123; route.params?.price &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;div&gt;ID：&#123;&#123; route.params?.id &#125;&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>动态路由传参</p>
<ul>
<li>很多时候，我们需要将给定匹配模式的路由映射到同一个组件。例如，我们可能有一个 User 组件，它应该对所有用户进行渲染，但用户 ID 不同。在 Vue Router 中，我们可以在路径中使用一个动态字段来实现，我们称之为 路径参数 </li>
<li><span style="color: red;">路径参数 用冒号 : 表示。当一个路由被匹配时，它的 params 的值将在每个组件</span><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">const routes:Array&lt;RouteRecordRaw&gt; = [</span><br><span class="line">    &#123;</span><br><span class="line">        path:&quot;/&quot;,</span><br><span class="line">        name:&quot;Login&quot;,</span><br><span class="line">        component:()=&gt; import(&apos;../components/login.vue&apos;)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        //动态路由参数</span><br><span class="line">        path:&quot;/reg/:id&quot;,</span><br><span class="line">        name:&quot;Reg&quot;,</span><br><span class="line">        component:()=&gt; import(&apos;../components/reg.vue&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line">const toDetail = (item: Item) =&gt; &#123;</span><br><span class="line">    router.push(&#123;</span><br><span class="line">        name: &apos;Reg&apos;,</span><br><span class="line">        params: &#123;</span><br><span class="line">            id: item.id</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">import &#123; useRoute &#125; from &apos;vue-router&apos;;</span><br><span class="line">import &#123; data &#125; from &apos;./list.json&apos;</span><br><span class="line">const route = useRoute()</span><br><span class="line">const item = data.find(v =&gt; v.id === Number(route.params.id))</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>二者的区别</p>
<ul>
<li>query 传参配置的是 path，而 params 传参配置的是name，在 params中配置 path 无效</li>
<li>query 在路由配置不需要设置参数，而 params 必须设置</li>
<li>query 传递的参数会显示在地址栏中</li>
<li>params传参刷新会无效，但是 query 会保存传递过来的值，刷新不变</li>
<li>路由配置</li>
</ul>
</li>
</ul>
<h4 id="嵌套路由"><a href="#嵌套路由" class="headerlink" title="嵌套路由"></a>嵌套路由</h4><ul>
<li>一些应用程序的 UI 由多层嵌套的组件组成。在这种情况下，URL 的片段通常对应于特定的嵌套组件结构，例如：</li>
<li>如你所见，children 配置只是另一个路由数组，就像 routes 本身一样。因此，你可以根据自己的需要，不断地嵌套视图<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">const routes: Array&lt;RouteRecordRaw&gt; = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: &quot;/user&quot;,</span><br><span class="line">    component: () =&gt; import(&apos;../components/footer.vue&apos;),</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: &quot;&quot;,</span><br><span class="line">        name: &quot;Login&quot;,</span><br><span class="line">        component: () =&gt; import(&apos;../components/login.vue&apos;)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: &quot;reg&quot;,</span><br><span class="line">        name: &quot;Reg&quot;,</span><br><span class="line">        component: () =&gt; import(&apos;../components/reg.vue&apos;)</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><span style="color: red;">TIPS：不要忘记写router-view</span><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;router-link to=&quot;/&quot;&gt;login&lt;/router-link&gt;</span><br><span class="line">      &lt;router-link style=&quot;margin-left:10px;&quot; to=&quot;/user/reg&quot;&gt;reg&lt;/router-link&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="命名视图"><a href="#命名视图" class="headerlink" title="命名视图"></a>命名视图</h4><ul>
<li>命名视图可以在同一级（同一个组件）中展示更多的路由视图，而不是嵌套显示。 命名视图可以让一个组件中具有多个路由渲染出口，这对于一些特定的布局组件非常有用。 命名视图的概念非常类似于“具名插槽”，并且视图的默认名称也是 default</li>
<li>一个视图使用一个组件渲染，因此对于同个路由，多个视图就需要多个组件。确保正确使用 components 配置 (带上 s)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createRouter, createWebHistory, RouteRecordRaw &#125; from &apos;vue-router&apos;</span><br><span class="line">const routes: Array&lt;RouteRecordRaw&gt; = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: &quot;/&quot;,</span><br><span class="line">    components: &#123;</span><br><span class="line">      default: () =&gt; import(&apos;../components/layout/menu.vue&apos;),</span><br><span class="line">      header: () =&gt; import(&apos;../components/layout/header.vue&apos;),</span><br><span class="line">      content: () =&gt; import(&apos;../components/layout/content.vue&apos;),</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br><span class="line">const router = createRouter(&#123;</span><br><span class="line">  history: createWebHistory(),</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line">export default router</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>对应Router-view 通过name 对应组件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;router-view name=&quot;header&quot;&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;router-view name=&quot;content&quot;&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/03/22/Pinia/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/03/22/Pinia/" itemprop="url">Pinia</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-03-22T16:07:51+08:00">
                2022-03-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tool/" itemprop="url" rel="index">
                    <span itemprop="name">tool</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Pinia"><a href="#Pinia" class="headerlink" title="Pinia"></a>Pinia</h3><ul>
<li><a href="https://pinia.vuejs.org/" style="color: blue;" target="_blank" rel="noopener">官方文档Pinia</a></li>
<li><a href="https://github.com/vuejs/pinia" style="color: blue;" target="_blank" rel="noopener">git地址</a></li>
<li><a href="https://blog.csdn.net/qq1195566313/category_11672479.html" style="color: blue;" target="_blank" rel="noopener">～more</a><h4 id="Pinia-js"><a href="#Pinia-js" class="headerlink" title="Pinia.js"></a>Pinia.js</h4></li>
<li>有如下特点：<ul>
<li>全局状态管理工具</li>
<li>完整的 ts 的支持；</li>
<li>足够轻量，压缩后的体积只有1kb左右;</li>
<li>去除 mutations，只有 state，getters，actions；</li>
<li>actions 支持同步和异步；</li>
<li>代码扁平化没有模块嵌套，只有 store 的概念，store 之间可以自由使用，每一个store都是独立的</li>
<li>无需手动添加 store，store 一旦创建便会自动添加；</li>
<li>支持Vue3 和 Vue2</li>
</ul>
</li>
<li>起步 安装<ul>
<li>yarn add pinia</li>
<li>npm install pinia</li>
</ul>
</li>
<li><p>引入注册Vue3</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &apos;vue&apos;</span><br><span class="line">import App from &apos;./App.vue&apos;</span><br><span class="line">import &#123;createPinia&#125; from &apos;pinia&apos;</span><br><span class="line">const store = createPinia()</span><br><span class="line">let app = createApp(App)</span><br><span class="line">app.use(store)</span><br><span class="line">app.mount(&apos;#app&apos;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Vue2 使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createPinia, PiniaVuePlugin &#125; from &apos;pinia&apos;</span><br><span class="line">Vue.use(PiniaVuePlugin)</span><br><span class="line">const pinia = createPinia()</span><br><span class="line">new Vue(&#123;</span><br><span class="line">  el: &apos;#app&apos;,</span><br><span class="line">  // other options...</span><br><span class="line">  // ...</span><br><span class="line">  // note the same `pinia` instance can be used across multiple Vue apps on</span><br><span class="line">  // the same page</span><br><span class="line">  pinia,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="初始化仓库Store"><a href="#初始化仓库Store" class="headerlink" title="初始化仓库Store"></a>初始化仓库Store</h4><ul>
<li>新建一个文件夹Store</li>
<li><p>新建文件[name].ts （存储是使用定义的defineStore()，并且它需要一个唯一的名称，作为第一个参数传递）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// store-namespace.ts</span><br><span class="line">export const enum Names &#123;</span><br><span class="line">  Test = &apos;TEST&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>定义仓库Store</p>
<ul>
<li>store引入（这个名称，也称为id，是必要的，Pania 使用它来将商店连接到 devtools。将返回的函数命名为use…是可组合项之间的约定，以使其使用习惯）<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import &#123; defineStore &#125; from &apos;pinia&apos;</span><br><span class="line">import &#123; Names &#125; from &apos;./store-namespce&apos;</span><br><span class="line">export const useTestStore = defineStore(Names.Test, &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>定义值</p>
<ul>
<li><p>State 箭头函数 返回一个对象 在对象里面定义值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import &#123; defineStore &#125; from &apos;pinia&apos;</span><br><span class="line">import &#123; Names &#125; from &apos;./store-namespce&apos;</span><br><span class="line"></span><br><span class="line">export const useTestStore = defineStore(Names.Test, &#123;</span><br><span class="line">    state:()=&gt;&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            current:1</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    //类似于computed 可以帮我们去修饰我们的值</span><br><span class="line">    getters:&#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    //可以操作异步 和 同步提交state</span><br><span class="line">    actions:&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>.vue使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    pinia: &#123;&#123; test.current &#125;&#125; ----- &#123;&#123; test.name &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; useTestStore &#125; from &apos;./store&apos;</span><br><span class="line">const test = useTestStore();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="State"><a href="#State" class="headerlink" title="State"></a>State</h4><ul>
<li>State 是允许直接修改值的 例如current++</li>
<li>批量修改State的值(在他的实例上有$patch方法可以批量修改多个值)</li>
<li>批量修改函数形式 - 推荐使用函数形式 可以自定义修改逻辑</li>
<li>通过原始对象修改整个实例 - $state您可以通过将store的属性设置为新对象来替换store的整个状态 - 缺点就是必须修改整个对象的所有属性</li>
<li><p>通过actions修改 - 定义Actions - 在actions 中直接使用this就可以指到state里面的值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import &#123; defineStore &#125; from &apos;pinia&apos;</span><br><span class="line"></span><br><span class="line">import &#123; Names &#125; from &apos;./store-name&apos;</span><br><span class="line"></span><br><span class="line">export const useTestStore =  defineStore(Names.Test, &#123;</span><br><span class="line">  state:()=&gt;&#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        current: 1,</span><br><span class="line">        name: &apos;pinia&apos;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  //类似于computed 可以帮我们去修饰我们的值</span><br><span class="line">  getters:&#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  //可以操作异步 和 同步提交state</span><br><span class="line">  actions:&#123;</span><br><span class="line">    setCurrent (num: number): void &#123;</span><br><span class="line">      // this.current++; // 不使用箭头函数，this指向有问题</span><br><span class="line">      this.current = num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用方法直接在实例调用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;button @click=&quot;Add&quot;&gt;+&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    pinia: &#123;&#123; test.current &#125;&#125; ----- &#123;&#123; test.name &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; useTestStore &#125; from &apos;./store&apos;</span><br><span class="line">let test = useTestStore();</span><br><span class="line">// 修改值</span><br><span class="line">const Add = () =&gt; &#123;</span><br><span class="line">  // 1 直接修改</span><br><span class="line">  // test.current++</span><br><span class="line">  // 2</span><br><span class="line">  // test.$patch(&#123;</span><br><span class="line">  //   current:200,</span><br><span class="line">  //   name: 300</span><br><span class="line">  // &#125;)</span><br><span class="line">  // 3 推荐使用 自定义逻辑</span><br><span class="line">  // test.$patch((state)=&gt;&#123;</span><br><span class="line">  //     state.current++;</span><br><span class="line">  //     state.name = &apos;pini111&apos;</span><br><span class="line">  // &#125;)</span><br><span class="line">  // 4</span><br><span class="line">  // test.$state = &#123;</span><br><span class="line">  //     current: 10,</span><br><span class="line">  //     name: &apos;1111&apos;</span><br><span class="line">  // &#125;  </span><br><span class="line">  // 5</span><br><span class="line">  test.setCurrent(567);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="解构store"><a href="#解构store" class="headerlink" title="解构store"></a>解构store</h4><ul>
<li>Pinia是不允许直接解构是会失去响应性的</li>
<li>差异对比<ul>
<li>修改Test current 解构完之后的数据不会变</li>
<li>而源数据是会变的</li>
</ul>
</li>
<li>解决方案可以使用 storeToRefs<ul>
<li>其原理跟toRefs 一样的给里面的数据包裹一层toref</li>
<li>源码 通过toRaw使store变回原始数据防止重复代理</li>
<li>循环store 通过 isRef isReactive 判断 如果是响应式对象直接拷贝一份给refs 对象 将其原始对象包裹toRef 使其变为响应式对象<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div&gt;origin value &#123;&#123;test.current&#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;button @click=&quot;Add&quot;&gt;+&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    pinia: &#123;&#123; current &#125;&#125; ----- &#123;&#123; name &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; useTestStore &#125; from &apos;./store&apos;</span><br><span class="line">import &#123; storeToRefs &#125; from &apos;pinia&apos;</span><br><span class="line"> </span><br><span class="line">let test = useTestStore();</span><br><span class="line">let &#123; current, name&#125; = storeToRefs(test);</span><br><span class="line">// 修改值</span><br><span class="line">// 直接修改</span><br><span class="line">const Add = () =&gt; &#123;</span><br><span class="line">  // console.log(test);</span><br><span class="line">  // test.current++;</span><br><span class="line">  current.value++</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="Actions-getters"><a href="#Actions-getters" class="headerlink" title="Actions,getters"></a>Actions,getters</h4><ul>
<li>Actions（支持同步异步）<ul>
<li>同步 直接调用即可</li>
<li>异步 可以结合async await 修饰</li>
<li>多个action互相调用getLoginInfo  setName</li>
</ul>
</li>
<li><p>getters</p>
<ul>
<li>使用箭头函数不能使用this this指向已经改变指向undefined 修改值请用state</li>
<li><p>主要作用类似于computed 数据修饰并且有缓存</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">getters:&#123;</span><br><span class="line">  newPrice:(state)=&gt;  `$$&#123;state.user.price&#125;`</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p>普通函数形式可以使用this</p>
</li>
<li>getters 互相调用</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">import &#123; defineStore &#125; from &apos;pinia&apos;</span><br><span class="line"></span><br><span class="line">import &#123; Names &#125; from &apos;./store-name&apos;</span><br><span class="line"></span><br><span class="line">type User = &#123;</span><br><span class="line">  name: string,</span><br><span class="line">  age: number</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 同步修改</span><br><span class="line">let result:User = &#123;</span><br><span class="line">  name: &apos;pinia&apos;,</span><br><span class="line">  age: 4</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 模拟异步</span><br><span class="line">const Login = ():Promise&lt;User&gt; =&gt; &#123;</span><br><span class="line">  return new Promise((resolve) =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      resolve(&#123;</span><br><span class="line">        name: &apos;pinia&apos;,</span><br><span class="line">        age: 5</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;, 2000);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export const useTestStore =  defineStore(Names.Test, &#123;</span><br><span class="line">  state:() =&gt; &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        current: 1,</span><br><span class="line">        user: &lt;User&gt;&#123;&#125;,</span><br><span class="line">        name: &apos;凤&apos;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  // 类似于computed 可以帮我们去修饰我们的值，可以相互调用</span><br><span class="line">  getters: &#123;</span><br><span class="line">    newName():string &#123;</span><br><span class="line">      return `$-$&#123;this.name&#125;---$&#123;this.getUserAge&#125;`</span><br><span class="line">    &#125;,</span><br><span class="line">    getUserAge():number &#123;</span><br><span class="line">      return this.user.age</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  //可以操作异步 和 同步提交state，  可以相互调用</span><br><span class="line">  actions: &#123;</span><br><span class="line">    setCurrent (num: number): void &#123;</span><br><span class="line">      // this.current++; // 不使用箭头函数，this指向有问题</span><br><span class="line">      this.current = num;</span><br><span class="line">    &#125;,</span><br><span class="line">    // setUser() &#123;</span><br><span class="line">    //   this.user = result;</span><br><span class="line">    // &#125;,</span><br><span class="line">    async setUser() &#123;</span><br><span class="line">      const result = await Login();</span><br><span class="line">      this.user = result;</span><br><span class="line">      this.setName(&apos;凤凤&apos;);</span><br><span class="line">    &#125;,</span><br><span class="line">    setName(name: string) &#123;</span><br><span class="line">      this.name = name;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;action-user: &#123;&#123; Test.user &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    &lt;p&gt;action-name: &#123;&#123; Test.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    &lt;p&gt;getters:&#123;&#123; Test.newName &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    &lt;button @click=&quot;change&quot;&gt;change&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; useTestStore &#125; from &apos;./store&apos;</span><br><span class="line">const Test = useTestStore();</span><br><span class="line">const change = () =&gt; &#123;</span><br><span class="line">  Test.setUser();</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>store-name.ts<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export const enum Names &#123;</span><br><span class="line">  Test = &apos;TEST&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="API"><a href="#API" class="headerlink" title="API"></a>API</h4><ul>
<li><p>$reset - 重置store到他的初始状态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">state: () =&gt; (&#123;</span><br><span class="line">  user: &lt;Result&gt;&#123;&#125;,</span><br><span class="line">  name: &quot;default&quot;,</span><br><span class="line">  current: 1</span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure>
</li>
<li><p>Vue 例如我把值改变到了10</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const change = () =&gt; &#123;</span><br><span class="line">  Test.current++</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>调用$reset();</p>
<ul>
<li>将会把state所有值 重置回 原始状态<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const reset = () =&gt; &#123;</span><br><span class="line">  Test.$reset();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>订阅state的改变 - 类似于Vuex 的abscribe  只要有state 的变化就会走这个函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Test.$subscribe((args,state)=&gt;&#123;</span><br><span class="line">   console.log(args,state);</span><br><span class="line">   </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>第二个参数 - 如果你的组件卸载之后还想继续调用请设置第二个参数<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Test.$subscribe((args,state)=&gt;&#123;</span><br><span class="line">   console.log(&apos;=========&apos;, args);</span><br><span class="line">   console.log(&apos;=========&apos;, state);</span><br><span class="line"> &#125;,&#123;</span><br><span class="line">   detached: true</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>订阅Actions的调用 - 只要有actions被调用就会走这个函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Test.$onAction((args)=&gt;&#123;</span><br><span class="line">  console.log(args);</span><br><span class="line">  args.after(() =&gt; &#123;</span><br><span class="line">    console.log(&apos;after&apos;);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="pinia插件"><a href="#pinia插件" class="headerlink" title="pinia插件"></a>pinia插件</h4><ul>
<li>pinia 和 vuex 都有一个通病 页面刷新状态会丢失</li>
<li>写一个pinia 插件缓存他的值<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">const __piniaKey = &apos;__PINIAKEY__&apos;</span><br><span class="line"></span><br><span class="line">type OptPinia = Partial&lt;Options&gt;</span><br><span class="line"></span><br><span class="line">const setStorage = (key: string, value: any): void =&gt; &#123;</span><br><span class="line">  localStorage.setItem(key, JSON.stringify(value))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const getStorage = (key: string) =&gt; &#123;</span><br><span class="line">  return (localStorage.getItem(key) ? JSON.parse(localStorage.getItem(key) as string) : &#123;&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const piniaPlugin = (options: OptPinia) =&gt; &#123;</span><br><span class="line">  return (context: PiniaPluginContext) =&gt; &#123;</span><br><span class="line">    const &#123; store &#125; = context;</span><br><span class="line">    const data = getStorage(`$&#123;options?.key ?? __piniaKey&#125;-$&#123;store.$id&#125;`)</span><br><span class="line">    store.$subscribe(() =&gt; &#123;</span><br><span class="line">      etStorage(`$&#123;options?.key ?? __piniaKey&#125;-$&#123;store.$id&#125;`, toRaw(store.$state));</span><br><span class="line">    &#125;)</span><br><span class="line">    return &#123;</span><br><span class="line">      ...store.$state,</span><br><span class="line">      ...data</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">const pinia = createPinia()</span><br><span class="line">pinia.use(piniaPlugin(&#123;</span><br><span class="line">  key: &quot;pinia&quot;</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/03/21/vite-vue3-03/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/03/21/vite-vue3-03/" itemprop="url">vite-vue3-03</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-03-21T16:33:58+08:00">
                2022-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端框架/" itemprop="url" rel="index">
                    <span itemprop="name">前端框架</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="vite"><a href="#vite" class="headerlink" title="vite"></a>vite</h3><h4 id="依赖注入Provide-Inject"><a href="#依赖注入Provide-Inject" class="headerlink" title="依赖注入Provide / Inject"></a>依赖注入Provide / Inject</h4><ul>
<li>Provide / Inject<ul>
<li>通常，当我们需要我们需要从父组件向子组件传递数据时，我们使用 <a href="https://v3.cn.vuejs.org/guide/component-props.html" style="color: blue;" target="_blank" rel="noopener"> props</a>。想象一下这样的结构：有一些深度嵌套的组件，而深层的子组件只需要父组件的部分内容。在这种情况下，如果仍然将 prop 沿着组件链逐级传递下去，可能会很麻烦。</li>
<li>provide 可以在祖先组件中指定我们想要提供给后代组件的数据或方法，而在任何后代组件中，我们都可以使用 inject 来接收 provide 提供的数据或方法。 </li>
</ul>
</li>
<li><span style="color: red;">TIPS 你如果传递普通的值 是不具有响应式的 需要通过ref reactive 添加响应式</span> </li>
<li>使用场景<ul>
<li>当父组件有很多数据需要分发给其子代组件的时候， 就可以使用provide和inject。</li>
</ul>
</li>
<li><p>父组件传递数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;App&quot;&gt;</span><br><span class="line">        &lt;button&gt;我是App&lt;/button&gt;</span><br><span class="line">        &lt;A&gt;&lt;/A&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">    </span><br><span class="line">&lt;script setup lang=&apos;ts&apos;&gt;</span><br><span class="line">import &#123; provide, ref &#125; from &apos;vue&apos;</span><br><span class="line">import A from &apos;./components/A.vue&apos;</span><br><span class="line">let flag = ref&lt;number&gt;(1)</span><br><span class="line">provide(&apos;flag&apos;, flag)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">    </span><br><span class="line">&lt;style&gt;</span><br><span class="line">.App &#123;</span><br><span class="line">    background: blue;</span><br><span class="line">    color: #fff;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>子组件接受</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div style=&quot;background-color: green;&quot;&gt;</span><br><span class="line">        我是B</span><br><span class="line">        &lt;button @click=&quot;change&quot;&gt;change falg&lt;/button&gt;</span><br><span class="line">        &lt;div&gt;&#123;&#123; flag &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">    </span><br><span class="line">&lt;script setup lang=&apos;ts&apos;&gt;</span><br><span class="line">import &#123; inject, Ref, ref &#125; from &apos;vue&apos;</span><br><span class="line"> </span><br><span class="line">const flag = inject&lt;Ref&lt;number&gt;&gt;(&apos;flag&apos;, ref(1))</span><br><span class="line"> </span><br><span class="line">const change = () =&gt; &#123;</span><br><span class="line">    flag.value = 2</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">    </span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="兄弟组件传参和Bus"><a href="#兄弟组件传参和Bus" class="headerlink" title="兄弟组件传参和Bus"></a>兄弟组件传参和Bus</h4><ul>
<li><p>借助父组件传参</p>
<ul>
<li>父组件为App 子组件为A 和 B他两个是同级的<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;A @on-click=&quot;getFalg&quot;&gt;&lt;/A&gt;</span><br><span class="line">        &lt;B :flag=&quot;Flag&quot;&gt;&lt;/B&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">    </span><br><span class="line">&lt;script setup lang=&apos;ts&apos;&gt;</span><br><span class="line">import A from &apos;./components/A.vue&apos;</span><br><span class="line">import B from &apos;./components/B.vue&apos;</span><br><span class="line">import &#123; ref &#125; from &apos;vue&apos;</span><br><span class="line">let Flag = ref&lt;boolean&gt;(false)</span><br><span class="line">const getFalg = (flag: boolean) =&gt; &#123;</span><br><span class="line">   Flag.value = flag;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">    </span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>A 组件派发事件通过App.vue 接受A组件派发的事件然后在Props 传给B组件 也是可以实现的</p>
</li>
<li><p>缺点就是比较麻烦 ，无法直接通信，只能充当桥梁</p>
</li>
<li><p>Event Bus</p>
<ul>
<li>我们在Vue2 可以使用$emit 传递 $on监听 emit传递过来的事件</li>
<li>这个原理其实是运用了JS设计模式之发布订阅模式<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">type BusClass&lt;T&gt; = &#123;</span><br><span class="line">    emit: (name: T) =&gt; void</span><br><span class="line">    on: (name: T, callback: Function) =&gt; void</span><br><span class="line">&#125;</span><br><span class="line">type BusParams = string | number | symbol </span><br><span class="line">type List = &#123;</span><br><span class="line">    [key: BusParams]: Array&lt;Function&gt;</span><br><span class="line">&#125;</span><br><span class="line">class Bus&lt;T extends BusParams&gt; implements BusClass&lt;T&gt; &#123;</span><br><span class="line">    list: List</span><br><span class="line">    constructor() &#123;</span><br><span class="line">        this.list = &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    emit(name: T, ...args: Array&lt;any&gt;) &#123;</span><br><span class="line">        let eventName: Array&lt;Function&gt; = this.list[name]</span><br><span class="line">        eventName.forEach(ev =&gt; &#123;</span><br><span class="line">            ev.apply(this, args)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    on(name: T, callback: Function) &#123;</span><br><span class="line">        let fn: Array&lt;Function&gt; = this.list[name] || [];</span><br><span class="line">        fn.push(callback)</span><br><span class="line">        this.list[name] = fn</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">export default new Bus&lt;number&gt;()</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>挂载到Vue config 全局就可以使用啦</p>
</li>
</ul>
<h4 id="TSX"><a href="#TSX" class="headerlink" title="TSX"></a>TSX</h4><ul>
<li>使用Template去写我们模板。现在可以扩展另一种风格TSX风格</li>
<li>vue2 的时候就已经支持jsx写法，只不过不是很友好，随着vue3对typescript的支持度，tsx写法越来越被接受</li>
<li>npm install @vitejs/plugin-vue-jsx -D</li>
<li><p>vite.config.ts 配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import &#123; defineConfig &#125; from &apos;vite&apos;</span><br><span class="line">import vue from &apos;@vitejs/plugin-vue&apos;</span><br><span class="line">import vueJsx from &apos;@vitejs/plugin-vue-jsx&apos;; // 引入jsx</span><br><span class="line">// https://vitejs.dev/config/</span><br><span class="line">export default defineConfig(&#123;</span><br><span class="line">  plugins: [vue(),vueJsx()] // 注册vueJsx</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改tsconfig.json 配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;jsx&quot;: &quot;preserve&quot;,</span><br><span class="line">&quot;jsxFactory&quot;: &quot;h&quot;,</span><br><span class="line">&quot;jsxFragmentFactory&quot;: &quot;Fragment&quot;,</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用TSX</p>
</li>
<li><span style="color: red;">TIPS tsx不会自动解包使用ref加.vlaue ! ! !</span> </li>
<li>tsx支持 v-model 的使用</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ref &#125; from &apos;vue&apos;</span><br><span class="line">let v = ref&lt;string&gt;(&apos;&apos;)</span><br><span class="line">const renderDom = () =&gt; &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;input v-model=&#123;v.value&#125; type=&quot;text&quot; /&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">          &#123;v.value&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line">export default renderDom</span><br></pre></td></tr></table></figure>
<ul>
<li><p>v-show</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ref &#125; from &apos;vue&apos;</span><br><span class="line">let flag = ref(false)</span><br><span class="line">const renderDom = () =&gt; &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;div v-show=&#123;flag.value&#125;&gt;景天&lt;/div&gt;</span><br><span class="line">      &lt;div v-show=&#123;!flag.value&#125;&gt;雪见&lt;/div&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line">export default renderDom</span><br></pre></td></tr></table></figure>
</li>
<li><p>v-if是不支持的(需要修改编写)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ref &#125; from &apos;vue&apos;</span><br><span class="line">let flag = ref(false)</span><br><span class="line">const renderDom = () =&gt; &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &#123;</span><br><span class="line">        flag.value ? &lt;div&gt;景天&lt;/div&gt; : &lt;div&gt;雪见&lt;/div&gt;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line">export default renderDom</span><br></pre></td></tr></table></figure>
</li>
<li><p>v-for也是不支持的(需要使用Map)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ref &#125; from &apos;vue&apos;</span><br><span class="line">let arr = [1,2,3,4,5]</span><br><span class="line">const renderDom = () =&gt; &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &#123;</span><br><span class="line">        arr.map(v=&gt;&#123;</span><br><span class="line">          return &lt;div&gt;$&#123;v&#125;&lt;/div&gt;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line">export default renderDom</span><br></pre></td></tr></table></figure>
</li>
<li><p>v-bind使用(直接赋值就可以)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ref &#125; from &apos;vue&apos;</span><br><span class="line">let arr = [1, 2, 3, 4, 5]</span><br><span class="line">const renderDom = () =&gt; &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;div data-arr=&#123;arr&#125;&gt;1&lt;/div&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line">export default renderDom</span><br></pre></td></tr></table></figure>
</li>
<li><p>v-on绑定事件 所有的事件都按照react风格来</p>
<ul>
<li>所有事件有on开头</li>
<li>所有事件名称首字母大写<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const renderDom = () =&gt; &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;button onClick=&#123;clickTap&#125;&gt;点击&lt;/button&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line">const clickTap = () =&gt; &#123;</span><br><span class="line">  console.log(&apos;click&apos;);</span><br><span class="line">&#125;</span><br><span class="line">export default renderDom</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Props 接受值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ref &#125; from &apos;vue&apos;</span><br><span class="line">type Props = &#123;</span><br><span class="line">    title:string</span><br><span class="line">&#125;</span><br><span class="line">const renderDom = (props:Props) =&gt; &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;div&gt;&#123;props.title&#125;&lt;/div&gt;</span><br><span class="line">      &lt;button onClick=&#123;clickTap&#125;&gt;点击&lt;/button&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line">const clickTap = () =&gt; &#123;</span><br><span class="line">  console.log(&apos;click&apos;);</span><br><span class="line">&#125;</span><br><span class="line">export default renderDom</span><br></pre></td></tr></table></figure>
</li>
<li><p>Emit派发</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">type Props = &#123;</span><br><span class="line">  title: string</span><br><span class="line">&#125;</span><br><span class="line">const renderDom = (props: Props,content:any) =&gt; &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;div&gt;&#123;props.title&#125;&lt;/div&gt;</span><br><span class="line">      &lt;button onClick=&#123;clickTap.bind(this,content)&#125;&gt;点击&lt;/button&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line">const clickTap = (ctx:any) =&gt; &#123;</span><br><span class="line">  ctx.emit(&apos;on-click&apos;,1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="深入v-model"><a href="#深入v-model" class="headerlink" title="深入v-model"></a>深入v-model</h4><ul>
<li>Vue3自动引入插件<ul>
<li>unplugin-auto-import/vite</li>
</ul>
</li>
<li><p>vite配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import &#123; defineConfig &#125; from &apos;vite&apos;</span><br><span class="line">import vue from &apos;@vitejs/plugin-vue&apos;</span><br><span class="line">import VueJsx from &apos;@vitejs/plugin-vue-jsx&apos;</span><br><span class="line">import AutoImport from &apos;unplugin-auto-import/vite&apos;</span><br><span class="line">// https://vitejs.dev/config/</span><br><span class="line">export default defineConfig(&#123;</span><br><span class="line">  plugins: [vue(),VueJsx(),AutoImport(&#123;</span><br><span class="line">    imports:[&apos;vue&apos;],</span><br><span class="line">    dts:&quot;src/auto-import.d.ts&quot;</span><br><span class="line">  &#125;)]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置完成之后使用ref reactive watch 等 无须import 导入 可以直接使用 </p>
<ul>
<li><a href="https://github.com/antfu/unplugin-auto-import" style="color: blue;" target="_blank" rel="noopener">Vue3自动引入插件</a></li>
</ul>
</li>
<li>v-model</li>
<li><span style="color: red;">TIps 在Vue3 v-model 是破坏性更新的</span> </li>
<li>v-model在组件里面也是很重要的<ul>
<li>v-model 其实是一个语法糖 通过props 和 emit组合而成的</li>
<li>默认值的改变</li>
<li>prop：value -&gt; modelValue；</li>
<li>事件：input -&gt; update:modelValue；</li>
<li>v-bind 的 .sync 修饰符和组件的 model 选项已移除</li>
<li>新增 支持多个v-model</li>
<li>新增 支持自定义 修饰符</li>
</ul>
</li>
<li><p>子组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">     &lt;div v-if=&apos;propData.modelValue &apos; class=&quot;dialog&quot;&gt;</span><br><span class="line">         &lt;div class=&quot;dialog-header&quot;&gt;</span><br><span class="line">             &lt;div&gt;标题&lt;/div&gt;&lt;div @click=&quot;close&quot;&gt;x&lt;/div&gt;</span><br><span class="line">         &lt;/div&gt;</span><br><span class="line">         &lt;div class=&quot;dialog-content&quot;&gt;</span><br><span class="line">            内容</span><br><span class="line">         &lt;/div&gt;</span><br><span class="line">         </span><br><span class="line">     &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang=&apos;ts&apos;&gt;</span><br><span class="line"> </span><br><span class="line">type Props = &#123;</span><br><span class="line">   modelValue:boolean</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">const propData = defineProps&lt;Props&gt;()</span><br><span class="line"> </span><br><span class="line">const emit = defineEmits([&apos;update:modelValue&apos;])</span><br><span class="line"> </span><br><span class="line">const close = () =&gt; &#123;</span><br><span class="line">     emit(&apos;update:modelValue&apos;,false)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;style lang=&apos;less&apos;&gt;</span><br><span class="line">.dialog&#123;</span><br><span class="line">    width: 300px;</span><br><span class="line">    height: 300px;</span><br><span class="line">    border: 1px solid #ccc;</span><br><span class="line">    position: fixed;</span><br><span class="line">    left:50%;</span><br><span class="line">    top:50%;</span><br><span class="line">    transform: translate(-50%,-50%);</span><br><span class="line">    &amp;-header&#123;</span><br><span class="line">        border-bottom: 1px solid #ccc;</span><br><span class="line">        display: flex;</span><br><span class="line">        justify-content: space-between;</span><br><span class="line">        padding: 10px;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;-content&#123;</span><br><span class="line">        padding: 10px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>父组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;show = !show&quot;&gt;开关&#123;&#123;show&#125;&#125;&lt;/button&gt;</span><br><span class="line">  &lt;Dialog v-model=&quot;show&quot;&gt;&lt;/Dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang=&apos;ts&apos;&gt;</span><br><span class="line">import Dialog from &quot;./components/Dialog/index.vue&quot;;</span><br><span class="line">import &#123;ref&#125; from &apos;vue&apos;</span><br><span class="line">const show = ref(false)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>绑定多个案例</p>
</li>
<li><p>子组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">     &lt;div v-if=&apos;modelValue &apos; class=&quot;dialog&quot;&gt;</span><br><span class="line">         &lt;div class=&quot;dialog-header&quot;&gt;</span><br><span class="line">             &lt;div&gt;标题---&#123;&#123;title&#125;&#125;&lt;/div&gt;&lt;div @click=&quot;close&quot;&gt;x&lt;/div&gt;</span><br><span class="line">         &lt;/div&gt;</span><br><span class="line">         &lt;div class=&quot;dialog-content&quot;&gt;</span><br><span class="line">            内容</span><br><span class="line">         &lt;/div&gt;</span><br><span class="line">         </span><br><span class="line">     &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang=&apos;ts&apos;&gt;</span><br><span class="line"> </span><br><span class="line">type Props = &#123;</span><br><span class="line">   modelValue:boolean,</span><br><span class="line">   title:string</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">const propData = defineProps&lt;Props&gt;()</span><br><span class="line"> </span><br><span class="line">const emit = defineEmits([&apos;update:modelValue&apos;,&apos;update:title&apos;])</span><br><span class="line"> </span><br><span class="line">const close = () =&gt; &#123;</span><br><span class="line">     emit(&apos;update:modelValue&apos;,false)</span><br><span class="line">     emit(&apos;update:title&apos;,&apos;我要改变&apos;)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;style lang=&apos;less&apos;&gt;</span><br><span class="line">.dialog&#123;</span><br><span class="line">    width: 300px;</span><br><span class="line">    height: 300px;</span><br><span class="line">    border: 1px solid #ccc;</span><br><span class="line">    position: fixed;</span><br><span class="line">    left:50%;</span><br><span class="line">    top:50%;</span><br><span class="line">    transform: translate(-50%,-50%);</span><br><span class="line">    &amp;-header&#123;</span><br><span class="line">        border-bottom: 1px solid #ccc;</span><br><span class="line">        display: flex;</span><br><span class="line">        justify-content: space-between;</span><br><span class="line">        padding: 10px;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;-content&#123;</span><br><span class="line">        padding: 10px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>父组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;show = !show&quot;&gt;开关&#123;&#123;show&#125;&#125; ----- &#123;&#123;title&#125;&#125;&lt;/button&gt;</span><br><span class="line">  &lt;Dialog v-model:title=&apos;title&apos; v-model=&quot;show&quot;&gt;&lt;/Dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang=&apos;ts&apos;&gt;</span><br><span class="line">import Dialog from &quot;./components/Dialog/index.vue&quot;;</span><br><span class="line">import &#123;ref&#125; from &apos;vue&apos;</span><br><span class="line">const show = ref(false)</span><br><span class="line">const title = ref(&apos;我是标题&apos;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>自定义修饰符</p>
<ul>
<li>添加到组件 v-model 的修饰符将通过 modelModifiers prop 提供给组件。在下面的示例中，我们创建了一个组件，其中包含默认为空对象的 modelModifiers prop<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&apos;ts&apos;&gt;</span><br><span class="line">type Props = &#123;</span><br><span class="line">  modelValue: boolean,</span><br><span class="line">  title?: string,</span><br><span class="line">  modelModifiers?: &#123;</span><br><span class="line">    default: () =&gt; &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  titleModifiers?: &#123;</span><br><span class="line">    default: () =&gt; &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">const propData = defineProps&lt;Props&gt;()</span><br><span class="line">const emit = defineEmits([&apos;update:modelValue&apos;, &apos;update:title&apos;])</span><br><span class="line">const close = () =&gt; &#123;</span><br><span class="line">  console.log(propData.modelModifiers);</span><br><span class="line">  emit(&apos;update:modelValue&apos;, false)</span><br><span class="line">  emit(&apos;update:title&apos;, &apos;我要改变&apos;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="自定义指令directive"><a href="#自定义指令directive" class="headerlink" title="自定义指令directive"></a>自定义指令directive</h4><ul>
<li>directive-自定义指令（属于破坏性更新）<ul>
<li>Vue中有v-if,v-for,v-bind，v-show,v-model 等等一系列方便快捷的指令 今天一起来了解一下vue里提供的自定义指令</li>
</ul>
</li>
<li>Vue3指令的钩子函数<ul>
<li>created 元素初始化的时候</li>
<li>beforeMount 指令绑定到元素后调用 只调用一次</li>
<li>mounted 元素插入父级dom调用</li>
<li>beforeUpdate 元素被更新之前调用</li>
<li>update 这个周期方法被移除 改用updated</li>
<li>beforeUnmount 在元素被移除前调用</li>
<li>unmounted 指令被移除后调用 只调用一次</li>
<li>Vue2 指令 bind inserted update componentUpdated unbind</li>
</ul>
</li>
<li><p>在setup内定义局部指令</p>
<ul>
<li>但这里有一个需要注意的限制：必须以 vNameOfDirective 的形式来命名本地自定义指令，以使得它们可以直接在模板中使用<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;show = !show&quot;&gt;开关&#123;&#123;show&#125;&#125; ----- &#123;&#123;title&#125;&#125;&lt;/button&gt;</span><br><span class="line">  &lt;Dialog  v-move-directive=&quot;&#123;background:&apos;green&apos;,flag:show&#125;&quot;&gt;&lt;/Dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line">const vMoveDirective: Directive = &#123;</span><br><span class="line">  created: () =&gt; &#123;</span><br><span class="line">    console.log(&quot;初始化====&gt;&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeMount(...args: Array&lt;any&gt;) &#123;</span><br><span class="line">    // 在元素上做些操作</span><br><span class="line">    console.log(&quot;初始化一次=======&gt;&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted(el: any, dir: DirectiveBinding&lt;Value&gt;) &#123;</span><br><span class="line">    el.style.background = dir.value.background;</span><br><span class="line">    console.log(&quot;初始化========&gt;&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeUpdate() &#123;</span><br><span class="line">    console.log(&quot;更新之前&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  updated() &#123;</span><br><span class="line">    console.log(&quot;更新结束&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeUnmount(...args: Array&lt;any&gt;) &#123;</span><br><span class="line">    console.log(args);</span><br><span class="line">    console.log(&quot;======&gt;卸载之前&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  unmounted(...args: Array&lt;any&gt;) &#123;</span><br><span class="line">    console.log(args);</span><br><span class="line">    console.log(&quot;======&gt;卸载完成&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>生命周期钩子参数详解</p>
<ul>
<li>第一个 el  当前绑定的DOM 元素</li>
<li>第二个 binding<ul>
<li>instance：使用指令的组件实例。</li>
<li>value：传递给指令的值。例如，在 v-my-directive=”1 + 1” 中，该值为 2。</li>
<li>oldValue：先前的值，仅在 beforeUpdate 和 updated 中可用。无论值是否有更改都可用。</li>
<li>arg：传递给指令的参数(如果有的话)。例如在 v-my-directive:foo 中，arg 为 “foo”。</li>
<li>modifiers：包含修饰符(如果有的话) 的对象。例如在 v-my-directive.foo.bar 中，修饰符对象为 {foo: true，bar: true}。</li>
<li>dir：一个对象，在注册指令时作为参数传递。例如，在以下指令中</li>
</ul>
</li>
</ul>
</li>
<li>第三个 当前元素的虚拟DOM 也就是Vnode</li>
<li>第四个 prevNode 上一个虚拟节点，仅在 beforeUpdate 和 updated 钩子中可用 </li>
<li><p>函数简写</p>
<ul>
<li>你可能想在 mounted 和 updated 时触发相同行为，而不关心其他的钩子函数。那么你可以通过将这个函数模式实现<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">   &lt;div&gt;</span><br><span class="line">      &lt;input v-model=&quot;value&quot; type=&quot;text&quot; /&gt;</span><br><span class="line">      &lt;A v-move=&quot;&#123; background: value &#125;&quot;&gt;&lt;/A&gt;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">   </span><br><span class="line">&lt;script setup lang=&apos;ts&apos;&gt;</span><br><span class="line">import A from &apos;./components/A.vue&apos;</span><br><span class="line">import &#123; ref, Directive, DirectiveBinding &#125; from &apos;vue&apos;</span><br><span class="line">let value = ref&lt;string&gt;(&apos;&apos;)</span><br><span class="line">type Dir = &#123;</span><br><span class="line">   background: string</span><br><span class="line">&#125;</span><br><span class="line">const vMove: Directive = (el, binding: DirectiveBinding&lt;Dir&gt;) =&gt; &#123;</span><br><span class="line">   el.style.background = binding.value.background</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>自定义拖拽指令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-move class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;header&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      内容</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang=&apos;ts&apos;&gt;</span><br><span class="line">import &#123; Directive &#125; from &quot;vue&quot;;</span><br><span class="line">const vMove: Directive = &#123;</span><br><span class="line">  mounted(el: HTMLElement) &#123;</span><br><span class="line">    let moveEl = el.firstElementChild as HTMLElement;</span><br><span class="line">    const mouseDown = (e: MouseEvent) =&gt; &#123;</span><br><span class="line">      //鼠标点击物体那一刻相对于物体左侧边框的距离=点击时的位置相对于浏览器最左边的距离-物体左边框相对于浏览器最左边的距离</span><br><span class="line">      console.log(e.clientX, e.clientY, &quot;-----起始&quot;, el.offsetLeft);</span><br><span class="line">      let X = e.clientX - el.offsetLeft;</span><br><span class="line">      let Y = e.clientY - el.offsetTop;</span><br><span class="line">      const move = (e: MouseEvent) =&gt; &#123;</span><br><span class="line">        el.style.left = e.clientX - X + &quot;px&quot;;</span><br><span class="line">        el.style.top = e.clientY - Y + &quot;px&quot;;</span><br><span class="line">        console.log(e.clientX, e.clientY, &quot;---改变&quot;);</span><br><span class="line">      &#125;;</span><br><span class="line">      document.addEventListener(&quot;mousemove&quot;, move);</span><br><span class="line">      document.addEventListener(&quot;mouseup&quot;, () =&gt; &#123;</span><br><span class="line">        document.removeEventListener(&quot;mousemove&quot;, move);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    moveEl.addEventListener(&quot;mousedown&quot;, mouseDown);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;style lang=&apos;less&apos;&gt;</span><br><span class="line">.box &#123;</span><br><span class="line">  position: fixed;</span><br><span class="line">  left: 50%;</span><br><span class="line">  top: 50%;</span><br><span class="line">  transform: translate(-50%, -50%);</span><br><span class="line">  width: 200px;</span><br><span class="line">  height: 200px;</span><br><span class="line">  border: 1px solid #ccc;</span><br><span class="line">  .header &#123;</span><br><span class="line">    height: 20px;</span><br><span class="line">    background: black;</span><br><span class="line">    cursor: move;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="自定义Hooks"><a href="#自定义Hooks" class="headerlink" title="自定义Hooks"></a>自定义Hooks</h4><ul>
<li>Vue3 自定义Hook<ul>
<li>主要用来处理复用代码逻辑的一些封装<ul>
<li>这个在vue2 就已经有一个东西是Mixins</li>
<li>mixins就是将这些多个相同的逻辑抽离出来，各个组件只需要引入mixins，就能实现一次写代码，多组件受益的效果。</li>
<li>弊端就是 会涉及到覆盖的问题</li>
<li>组件的data、methods、filters会覆盖mixins里的同名data、methods、filters</li>
</ul>
</li>
</ul>
</li>
<li>二点就是 变量来源不明确（隐式传入），不利于阅读，使代码变得难以维护。<ul>
<li>Vue3 的自定义的hook</li>
<li>Vue3 的 hook函数 相当于 vue2 的 mixin, 不同在与 hooks 是函数</li>
<li>Vue3 的 hook函数 可以帮助我们提高代码的复用性, 让我们能在不同的组件中都利用 hooks 函数</li>
<li>Vue3 hook <a href="https://vueuse.org/guide/" style="color: blue;" target="_blank" rel="noopener">库Get Started | VueUse</a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import &#123; onMounted &#125; from &apos;vue&apos;</span><br><span class="line">type Options = &#123;</span><br><span class="line">    el: string</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">type Return = &#123;</span><br><span class="line">    Baseurl: string | null</span><br><span class="line">&#125;</span><br><span class="line">export default function (option: Options): Promise&lt;Return&gt; &#123;</span><br><span class="line">    return new Promise((resolve) =&gt; &#123;</span><br><span class="line">        onMounted(() =&gt; &#123;</span><br><span class="line">            const file: HTMLImageElement = document.querySelector(option.el) as HTMLImageElement;</span><br><span class="line">            file.onload = ():void =&gt; &#123;</span><br><span class="line">                resolve(&#123;</span><br><span class="line">                    Baseurl: toBase64(file)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">        &#125;)</span><br><span class="line">        const toBase64 = (el: HTMLImageElement): string =&gt; &#123;</span><br><span class="line">            const canvas: HTMLCanvasElement = document.createElement(&apos;canvas&apos;)</span><br><span class="line">            const ctx = canvas.getContext(&apos;2d&apos;) as CanvasRenderingContext2D</span><br><span class="line">            canvas.width = el.width</span><br><span class="line">            canvas.height = el.height</span><br><span class="line">            ctx.drawImage(el, 0, 0, canvas.width,canvas.height)</span><br><span class="line">            console.log(el.width);</span><br><span class="line">            </span><br><span class="line">            return canvas.toDataURL(&apos;image/png&apos;)</span><br><span class="line"> </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="Vue3定义全局函数和变量"><a href="#Vue3定义全局函数和变量" class="headerlink" title="Vue3定义全局函数和变量"></a>Vue3定义全局函数和变量</h4><ul>
<li>globalProperties<ul>
<li>由于Vue3 没有Prototype 属性 使用 app.config.globalProperties 代替 然后去定义变量和函数</li>
</ul>
</li>
<li><p>Vue2</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 之前 (Vue 2.x)</span><br><span class="line">Vue.prototype.$http = () =&gt; &#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Vue3</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 之后 (Vue 3.x)</span><br><span class="line">const app = createApp(&#123;&#125;)</span><br><span class="line">app.config.globalProperties.$http = () =&gt; &#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>过滤器</p>
<ul>
<li>在Vue3 移除了</li>
<li>正好可以使用全局函数代替Filters<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.config.globalProperties.$filters = &#123;</span><br><span class="line">  format&lt;T extends any&gt;(str: T): string &#123;</span><br><span class="line">    return `$$&#123;str&#125;`</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>声明文件 不然TS无法正确类型 推导</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">type Filter = &#123;</span><br><span class="line">    format: &lt;T extends any&gt;(str: T) =&gt; T</span><br><span class="line">  &#125;</span><br><span class="line">// 声明要扩充@vue/runtime-core包的声明.</span><br><span class="line">// 这里扩充&quot;ComponentCustomProperties&quot;接口, 因为他是vue3中实例的属性的类型.</span><br><span class="line">  declare module &apos;@vue/runtime-core&apos; &#123;</span><br><span class="line">    export interface ComponentCustomProperties &#123;</span><br><span class="line">        $filters: Filter</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>setup 读取值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &#123; getCurrentInstance, ComponentInternalInstance &#125; from &apos;vue&apos;;</span><br><span class="line">const &#123; appContext &#125; = &lt;ComponentInternalInstance&gt;getCurrentInstance()</span><br><span class="line">console.log(appContext.config.globalProperties.$env);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="编写Vue3插件"><a href="#编写Vue3插件" class="headerlink" title="编写Vue3插件"></a>编写Vue3插件</h4><ul>
<li>插件<ul>
<li>插件是自包含的代码，通常向 Vue 添加全局级功能。你如果是一个对象需要有install方法Vue会帮你自动注入到install 方法 你如果是function 就直接当install 方法去使用</li>
</ul>
</li>
<li>使用插件<ul>
<li>在使用 createApp() 初始化 Vue 应用程序后，你可以通过调用 use() 方法将插件添加到你的应用程序中。</li>
</ul>
</li>
<li><p>实现一个Loading</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div v-if=&quot;isShow&quot; class=&quot;loading&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;loading-content&quot;&gt;Loading...&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">    </span><br><span class="line">&lt;script setup lang=&apos;ts&apos;&gt;</span><br><span class="line">import &#123; ref &#125; from &apos;vue&apos;;</span><br><span class="line">const isShow = ref(false)//定位loading 的开关</span><br><span class="line"> </span><br><span class="line">const show = () =&gt; &#123;</span><br><span class="line">    isShow.value = true</span><br><span class="line">&#125;</span><br><span class="line">const hide = () =&gt; &#123;</span><br><span class="line">    isShow.value = false</span><br><span class="line">&#125;</span><br><span class="line">//对外暴露 当前组件的属性和方法</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">    isShow,</span><br><span class="line">    show,</span><br><span class="line">    hide</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;less&quot;&gt;</span><br><span class="line">.loading &#123;</span><br><span class="line">    position: fixed;</span><br><span class="line">    inset: 0;</span><br><span class="line">    background: rgba(0, 0, 0, 0.8);</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    align-items: center;</span><br><span class="line">    &amp;-content &#123;</span><br><span class="line">        font-size: 30px;</span><br><span class="line">        color: #fff;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Loading.ts</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import &#123;  createVNode, render, VNode, App &#125; from &apos;vue&apos;;</span><br><span class="line">import Loading from &apos;./index.vue&apos;</span><br><span class="line">export default &#123;</span><br><span class="line">  install(app: App) &#123;</span><br><span class="line">    //createVNode vue提供的底层方法 可以给我们组件创建一个虚拟DOM 也就是Vnode</span><br><span class="line">    const vnode: VNode = createVNode(Loading)</span><br><span class="line">    //render 把我们的Vnode 生成真实DOM 并且挂载到指定节点</span><br><span class="line">    render(vnode, document.body)</span><br><span class="line">    // Vue 提供的全局配置 可以自定义</span><br><span class="line">    app.config.globalProperties.$loading = &#123;</span><br><span class="line">        show: () =&gt; vnode.component?.exposed?.show(),</span><br><span class="line">        hide: () =&gt; vnode.component?.exposed?.hide()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Main.ts</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import Loading from &apos;./components/loading&apos;</span><br><span class="line">let app = createApp(App)</span><br><span class="line">app.use(Loading)</span><br><span class="line">type Lod = &#123;</span><br><span class="line">    show: () =&gt; void,</span><br><span class="line">    hide: () =&gt; void</span><br><span class="line">&#125;</span><br><span class="line">//编写ts loading 声明文件放置报错 和 智能提示</span><br><span class="line">declare module &apos;@vue/runtime-core&apos; &#123;</span><br><span class="line">    export interface ComponentCustomProperties &#123;</span><br><span class="line">        $loading: Lod</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">app.mount(&apos;#app&apos;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="了解UI库ElementUI，AntDesigin等"><a href="#了解UI库ElementUI，AntDesigin等" class="headerlink" title="了解UI库ElementUI，AntDesigin等"></a>了解UI库ElementUI，AntDesigin等</h4><ul>
<li>vue作为一款深受广大群众以及尤大崇拜者的喜欢，特此列出在github上开源的vue优秀的UI组件库供大家参考<ul>
<li>这两套框架主要用于后台管理系统的制作，方便开发者快速开发</li>
</ul>
</li>
<li><p>安装方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># NPM</span><br><span class="line">$ npm install element-plus --save</span><br><span class="line"> </span><br><span class="line"># Yarn</span><br><span class="line">$ yarn add element-plus</span><br><span class="line"> </span><br><span class="line"># pnpm</span><br><span class="line">$ pnpm install element-plus</span><br></pre></td></tr></table></figure>
</li>
<li><p>main ts引入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &apos;vue&apos;</span><br><span class="line">import ElementPlus from &apos;element-plus&apos;</span><br><span class="line">import &apos;element-plus/dist/index.css&apos;</span><br><span class="line">import App from &apos;./App.vue&apos;</span><br><span class="line"> </span><br><span class="line">const app = createApp(App)</span><br><span class="line"> </span><br><span class="line">app.use(ElementPlus)</span><br><span class="line">app.mount(&apos;#app&apos;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>volar插件支持</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;compilerOptions&quot;: &#123;</span><br><span class="line">    // ...</span><br><span class="line">    &quot;types&quot;: [&quot;element-plus/global&quot;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Element UI Plus</p>
<ul>
<li><a href="https://element-plus.gitee.io/zh-CN/" style="color: blue;" target="_blank" rel="noopener">一个 Vue 3 UI 框架 | Element Plus</a></li>
</ul>
</li>
<li><p>Ant Design Vue</p>
<ul>
<li><a href=" https://next.antdv.com/docs/vue/introduce-cn" style="color: blue;" target="_blank" rel="noopener">Ant Design Vue</a></li>
<li><p>安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install ant-design-vue@next --save</span><br><span class="line">$ yarn add ant-design-vue@next</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &apos;vue&apos;;</span><br><span class="line">import Antd from &apos;ant-design-vue&apos;;</span><br><span class="line">import App from &apos;./App&apos;;</span><br><span class="line">import &apos;ant-design-vue/dist/antd.css&apos;;</span><br><span class="line"> </span><br><span class="line">const app = createApp(App);</span><br><span class="line"> </span><br><span class="line">app.use(Antd).mount(&apos;#app&apos;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="详解Scoped和样式-穿透"><a href="#详解Scoped和样式-穿透" class="headerlink" title="详解Scoped和样式 穿透"></a>详解Scoped和样式 穿透</h4><ul>
<li>主要是用于修改很多vue常用的组件库（element, vant, AntDesigin），虽然配好了样式但是还是需要更改其他的样式</li>
<li>就需要用到样式穿透</li>
<li>scoped的原理<ul>
<li>vue中的scoped 通过在DOM结构以及css样式上加唯一不重复的标记:data-v-hash的方式，以保证唯一（而这个工作是由过PostCSS转译实现的），达到样式私有化模块化的目的。</li>
</ul>
</li>
<li>总结一下scoped三条渲染规则：<ul>
<li>给HTML的DOM节点加一个不重复data属性(形如：data-v-123)来表示他的唯一性</li>
<li>在每句css选择器的末尾（编译后的生成的css语句）加一个当前组件的data属性选择器（如[data-v-123]）来私有化样式</li>
<li>如果组件内部包含有其他组件，只会给其他组件的最外层标签加上当前组件的data属性</li>
</ul>
</li>
<li>PostCSS会给一个组件中的所有dom添加了一个独一无二的动态属性data-v-xxxx，然后，给CSS选择器额外添加一个对应的属性选择器来选择该组件中dom，这种做法使得样式只作用于含有该属性的dom——组件内部dom, 从而达到了’样式模块化’的效果.</li>
<li>案例修改Element ui Input样式<ul>
<li>如果不写Scoped 就没问题</li>
<li>原因就是Scoped 搞的鬼 他在进行PostCss转化的时候把元素选择器默认放在了最后</li>
<li>Vue 提供了样式穿透:deep() 他的作用就是用来改变 属性选择器的位置</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/03/18/vite-vue3-02/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/03/18/vite-vue3-02/" itemprop="url">vite-vue3-02</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-03-18T16:20:54+08:00">
                2022-03-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端框架/" itemprop="url" rel="index">
                    <span itemprop="name">前端框架</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="vite"><a href="#vite" class="headerlink" title="vite"></a>vite</h3><h4 id="插槽slot-占位符"><a href="#插槽slot-占位符" class="headerlink" title="插槽slot(占位符)"></a>插槽slot(占位符)</h4><ul>
<li>子组件中的提供给父组件使用的一个占位符，用<slot></slot> 表示，父组件可以在这个占位符中填充任何模板代码，如 HTML、组件等，填充的内容会替换子组件的<slot></slot>标签</li>
<li>匿名插槽</li>
<li><p>在子组件放置一个插槽</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>父组件使用插槽</p>
<ul>
<li>在父组件给这个插槽填充内容<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Dialog&gt;</span><br><span class="line">    &lt;template v-slot&gt;</span><br><span class="line">        &lt;div&gt;2132&lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/Dialog&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>具名插槽</p>
<ul>
<li>具名插槽其实就是给插槽取个名字。一个子组件可以放多个插槽，而且可以放在不同的地方，而父组件填充内容时，可以根据这个名字把内容填充到对应插槽中<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line"></span><br><span class="line">    &lt;slot name=&quot;footer&quot;&gt;&lt;/slot&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>父组件使用需对应名称</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;Dialog&gt;</span><br><span class="line">    &lt;template v-slot:header&gt;</span><br><span class="line">        &lt;div&gt;1&lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template v-slot&gt;</span><br><span class="line">        &lt;div&gt;2&lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template v-slot:footer&gt;</span><br><span class="line">        &lt;div&gt;3&lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/Dialog&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>插槽简写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;Dialog&gt;</span><br><span class="line">    &lt;template #header&gt;</span><br><span class="line">        &lt;div&gt;1&lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #default&gt;</span><br><span class="line">        &lt;div&gt;2&lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #footer&gt;</span><br><span class="line">        &lt;div&gt;3&lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/Dialog&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>作用域插槽</p>
<ul>
<li><p>在子组件动态绑定参数 派发给父组件的slot去使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div v-for=&quot;item in 100&quot;&gt;</span><br><span class="line">            &lt;slot :data=&quot;item&quot;&gt;&lt;/slot&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;slot name=&quot;footer&quot;&gt;&lt;/slot&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过结构方式取值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;Dialog&gt;</span><br><span class="line">  &lt;template #header&gt;</span><br><span class="line">      &lt;div&gt;1&lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  &lt;template #default=&quot;&#123; data &#125;&quot;&gt;</span><br><span class="line">      &lt;div&gt;&#123;&#123; data &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  &lt;template #footer&gt;</span><br><span class="line">      &lt;div&gt;3&lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">&lt;/Dialog&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>动态插槽</p>
<ul>
<li>插槽可以是一个变量名<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Dialog&gt;</span><br><span class="line">    &lt;template #[name]&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            23</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/Dialog&gt;</span><br><span class="line">const name = ref(&apos;header&apos;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="异步组件-amp-代码分包-amp-suspense"><a href="#异步组件-amp-代码分包-amp-suspense" class="headerlink" title="异步组件&amp;代码分包&amp;suspense"></a>异步组件&amp;代码分包&amp;suspense</h4><ul>
<li>异步组件</li>
<li>在大型应用中，我们可能需要将应用分割成小一些的代码块,并且减少主包的体积</li>
<li>就可以使用异步组件</li>
<li>顶层 await,在setup语法糖里面 使用方法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt; 中可以使用顶层 await 结果代码会被编译成 async setup()</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const post = await fetch(`/api/post/1`).then(r =&gt; r.json())</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>父组件引用子组件 通过defineAsyncComponent加载异步配合import 函数模式便可以分包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; reactive, ref, markRaw, toRaw, defineAsyncComponent &#125; from &apos;vue&apos;</span><br><span class="line">const Dialog = defineAsyncComponent(() =&gt; import(&apos;../../components/Dialog/index.vue&apos;))</span><br></pre></td></tr></table></figure>
</li>
<li><p>suspense</p>
<ul>
<li><suspense> 组件有两个插槽。它们都只接收一个直接子节点。default 插槽里的节点会尽可能展示出来。如果不能，则展示 fallback 插槽里的节点<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;Suspense&gt;</span><br><span class="line">  &lt;template #default&gt;</span><br><span class="line">    &lt;Dialog&gt;</span><br><span class="line">      &lt;template #default&gt;</span><br><span class="line">          &lt;div&gt;接口请求动态数据&lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/Dialog&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">  &lt;template #fallback&gt;</span><br><span class="line">     &lt;div&gt;loading...&lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">&lt;/Suspense&gt;</span><br></pre></td></tr></table></figure>
</suspense></li>
</ul>
</li>
</ul>
<h4 id="Teleport传送组件"><a href="#Teleport传送组件" class="headerlink" title="Teleport传送组件"></a>Teleport传送组件</h4><ul>
<li><p>Teleport Vue 3.0新特性之一</p>
<ul>
<li>Teleport 是一种能够将我们的模板渲染至指定DOM节点，不受父级style、v-show等属性影响，但data、prop数据依旧能够共用的技术；类似于 React 的 Portal</li>
<li>主要解决的问题 因为Teleport节点挂载在其他指定的DOM节点下，完全不受父级style样式影响</li>
<li>使用方法<ul>
<li>通过to 属性 插入指定元素位置 to=”body” 便可以将Teleport 内容传送到指定位置<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Teleport to=&quot;body&quot;&gt;</span><br><span class="line">  &lt;Loading&gt;&lt;/Loading&gt;</span><br><span class="line">&lt;/Teleport&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>也可以自定义传送位置 支持 class id等 选择器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;modal&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;Teleport to=&quot;.modal&quot;&gt;</span><br><span class="line">  &lt;Loading&gt;&lt;/Loading&gt;</span><br><span class="line">&lt;/Teleport&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>也可以使用多个</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Teleport to=&quot;.modal1&quot;&gt;</span><br><span class="line">  &lt;Loading&gt;&lt;/Loading&gt;</span><br><span class="line">&lt;/Teleport&gt;</span><br><span class="line">&lt;Teleport to=&quot;.modal2&quot;&gt;</span><br><span class="line">  &lt;Loading&gt;&lt;/Loading&gt;</span><br><span class="line">&lt;/Teleport&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="keep-alive缓存组件"><a href="#keep-alive缓存组件" class="headerlink" title="keep-alive缓存组件"></a>keep-alive缓存组件</h4><ul>
<li>内置组件keep-alive<ul>
<li>有时候我们不希望组件被重新渲染影响使用体验；或者处于性能考虑，避免多次重复渲染降低性能。而是希望组件可以缓存下来,维持当前的状态。这时候就需要用到keep-alive组件</li>
</ul>
</li>
<li><p>开启keep-alive 生命周期的变化</p>
<ul>
<li>初次进入时： onMounted&gt; onActivated</li>
<li>退出后触发 deactivated</li>
<li>再次进入：</li>
<li>只会触发 onActivated</li>
<li>事件挂载的方法等，只执行一次的放在 onMounted中；组件每次进去执行的方法放在 onActivated中<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 基本 --&gt;</span><br><span class="line">&lt;keep-alive&gt;</span><br><span class="line">  &lt;component :is=&quot;view&quot;&gt;&lt;/component&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br><span class="line"> </span><br><span class="line">&lt;!-- 多个条件判断的子组件 --&gt;</span><br><span class="line">&lt;keep-alive&gt;</span><br><span class="line">  &lt;comp-a v-if=&quot;a &gt; 1&quot;&gt;&lt;/comp-a&gt;</span><br><span class="line">  &lt;comp-b v-else&gt;&lt;/comp-b&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br><span class="line"> </span><br><span class="line">&lt;!-- 和 `&lt;transition&gt;` 一起使用 --&gt;</span><br><span class="line">&lt;transition&gt;</span><br><span class="line">  &lt;keep-alive&gt;</span><br><span class="line">    &lt;component :is=&quot;view&quot;&gt;&lt;/component&gt;</span><br><span class="line">  &lt;/keep-alive&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>include 和 exclude</p>
<ul>
<li>include 和 exclude prop 允许组件有条件地缓存。二者都可以用逗号分隔字符串、正则表达式或一个数组来表示<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive :include=&quot;&quot; :exclude=&quot;&quot; :max=&quot;&quot;&gt;&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>max</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive :max=&quot;10&quot;&gt;</span><br><span class="line">  &lt;component :is=&quot;view&quot;&gt;&lt;/component&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="transition动画组件"><a href="#transition动画组件" class="headerlink" title="transition动画组件"></a>transition动画组件</h4><ul>
<li>Vue 提供了 transition 的封装组件，在下列情形中，可以给任何元素和组件添加进入/离开过渡:<ul>
<li>条件渲染 (使用 v-if)</li>
<li>条件展示 (使用 v-show)</li>
<li>动态组件</li>
<li>组件根节点</li>
<li>自定义 transition 过度效果，你需要对transition组件的name属性自定义。并在css中写入对应的样式</li>
<li>过渡的类名<ul>
<li>在进入/离开的过渡中，会有 6 个 class 切换。</li>
</ul>
</li>
</ul>
</li>
<li>过渡 class<ul>
<li>在进入/离开的过渡中，会有 6 个 class 切换。</li>
<li>v-enter-from：定义进入过渡的开始状态。在元素被插入之前生效，在元素被插入之后的下一帧移除。</li>
<li>v-enter-active：定义进入过渡生效时的状态。在整个进入过渡的阶段中应用，在元素被插入之前生效，在过渡/动画完成之后移除。这个类可以被用来定义进入过渡的过程时间，延迟和曲线函数。</li>
<li>v-enter-to：定义进入过渡的结束状态。在元素被插入之后下一帧生效 (与此同时  v-enter-from 被移除)，在过渡/动画完成之后移除。</li>
<li>v-leave-from：定义离开过渡的开始状态。在离开过渡被触发时立刻生效，下一帧被移除。</li>
<li>v-leave-active：定义离开过渡生效时的状态。在整个离开过渡的阶段中应用，在离开过渡被触发时立刻生效，在过渡/动画完成之后移除。这个类可以被用来定义离开过渡的过程时间，延迟和曲线函数。</li>
<li>v-leave-to：离开过渡的结束状态。在离开过渡被触发之后下一帧生效 (与此同时 v-leave-from 被移除)，在过渡/动画完成之后移除。</li>
</ul>
</li>
<li><p>自定义过渡 class 类名</p>
<ul>
<li>trasnsition props</li>
<li>enter-from-class</li>
<li>enter-active-class</li>
<li>enter-to-class</li>
<li>leave-from-class</li>
<li>leave-active-class</li>
<li>leave-to-class</li>
<li>自定义过度时间 单位毫秒<ul>
<li>你也可以分别指定进入和离开的持续时间：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition :duration=&quot;1000&quot;&gt;...&lt;/transition&gt;</span><br><span class="line">&lt;transition :duration=&quot;&#123; enter: 500, leave: 800 &#125;&quot;&gt;...&lt;/transition&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>通过自定义class 结合css动画库animate css</p>
</li>
<li>安装库 npm install animate.css</li>
<li>引入 import ‘animate.css’</li>
<li>使用方法</li>
<li><p><a href="https://animate.style/" style="color: blue;" target="_blank" rel="noopener">官方文档 </a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition</span><br><span class="line">    leave-active-class=&quot;animate__animated animate__bounceInLeft&quot;</span><br><span class="line">    enter-active-class=&quot;animate__animated animate__bounceInRight&quot;</span><br><span class="line">&gt;</span><br><span class="line">    &lt;div v-if=&quot;flag&quot; class=&quot;box&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>transition 生命周期8个</p>
<ul>
<li>@before-enter=”beforeEnter” //对应enter-from</li>
<li>@enter=”enter”//对应enter-active</li>
<li>@after-enter=”afterEnter”//对应enter-to</li>
<li>@enter-cancelled=”enterCancelled”//显示过度打断</li>
<li>@before-leave=”beforeLeave”//对应leave-from</li>
<li>@leave=”leave”//对应enter-active</li>
<li>@after-leave=”afterLeave”//对应leave-to</li>
<li>@leave-cancelled=”leaveCancelled”//离开过度打断</li>
<li>当只用 JavaScript 过渡的时候，在 enter 和 leave 钩子中必须使用 done 进行回调</li>
<li>结合gsap 动画库使用(npm install gsap -S) <ul>
<li>import gsap from ‘gsap’</li>
<li><a href="https://greensock.com/" style="color: blue;" target="_blank" rel="noopener">GreenSock</a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const beforeEnter = (el: Element) =&gt; &#123;</span><br><span class="line">    console.log(&apos;进入之前from&apos;, el);</span><br><span class="line">&#125;</span><br><span class="line">const Enter = (el: Element,done:Function) =&gt; &#123;</span><br><span class="line">    console.log(&apos;过度曲线&apos;);</span><br><span class="line">    setTimeout(()=&gt;&#123;</span><br><span class="line">       done()</span><br><span class="line">    &#125;,3000)</span><br><span class="line">&#125;</span><br><span class="line">const AfterEnter = (el: Element) =&gt; &#123;</span><br><span class="line">    console.log(&apos;to&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>appear</p>
<ul>
<li>通过这个属性可以设置初始节点过度 就是页面加载完成就开始动画 对应三个状态<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">appear-active-class=&quot;&quot;</span><br><span class="line">appear-from-class=&quot;&quot;</span><br><span class="line">appear-to-class=&quot;&quot;</span><br><span class="line">appear</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="transition-group过度列表"><a href="#transition-group过度列表" class="headerlink" title="transition-group过度列表"></a>transition-group过度列表</h4><ul>
<li>单个节点</li>
<li>多个节点，每次只渲染一个</li>
<li>那么怎么同时渲染整个列表，比如使用 v-for？在这种场景下，我们会使用 <transition-group> 组件。在我们深入例子之前，先了解关于这个组件的几个特点：<ul>
<li>默认情况下，它不会渲染一个包裹元素，但是你可以通过 tag attribute 指定渲染一个元素。</li>
<li>过渡模式不可用，因为我们不再相互切换特有的元素。</li>
<li>内部元素总是需要提供唯一的 key attribute 值。</li>
<li>CSS 过渡的类将会应用在内部的元素中，而不是这个组/容器本身。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition-group&gt;</span><br><span class="line">     &lt;div style=&quot;margin: 10px;&quot; :key=&quot;item&quot; v-for=&quot;item in list&quot;&gt;&#123;&#123; item &#125;&lt;/div&gt;</span><br><span class="line">&lt;/transition-group&gt;</span><br><span class="line">const list = reactive&lt;number[]&gt;([1, 2, 4, 5, 6, 7, 8, 9])</span><br><span class="line">const Push = () =&gt; &#123;</span><br><span class="line">    list.push(123)</span><br><span class="line">&#125;</span><br><span class="line">const Pop = () =&gt; &#123;</span><br><span class="line">    list.pop()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</transition-group></li>
</ul>
<ul>
<li>列表的移动过渡<ul>
<li><transition-group> 组件还有一个特殊之处。除了进入和离开，它还可以为定位的改变添加动画。只需了解新增的 v-move 类就可以使用这个新功能，它会应用在元素改变定位的过程中。像之前的类名一样，它的前缀可以通过 name attribute 来自定义，也可以通过 move-class attribute 手动设置</transition-group></li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;button @click=&quot;shuffle&quot;&gt;Shuffle&lt;/button&gt;</span><br><span class="line">        &lt;transition-group class=&quot;wraps&quot; name=&quot;mmm&quot; tag=&quot;ul&quot;&gt;</span><br><span class="line">            &lt;li class=&quot;cell&quot; v-for=&quot;item in items&quot; :key=&quot;item.id&quot;&gt;&#123;&#123; item.number &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;/transition-group&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">  </span><br><span class="line">&lt;script setup  lang=&apos;ts&apos;&gt;</span><br><span class="line">import _ from &apos;lodash&apos;</span><br><span class="line">import &#123; ref &#125; from &apos;vue&apos;</span><br><span class="line">let items = ref(Array.apply(null, &#123; length: 81 &#125; as number[]).map((_, index) =&gt; &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        id: index,</span><br><span class="line">        number: (index % 9) + 1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;))</span><br><span class="line">const shuffle = () =&gt; &#123;</span><br><span class="line">    items.value = _.shuffle(items.value)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">  </span><br><span class="line">&lt;style scoped lang=&quot;less&quot;&gt;</span><br><span class="line">.wraps &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-wrap: wrap;</span><br><span class="line">    width: calc(25px * 10 + 9px);</span><br><span class="line">    .cell &#123;</span><br><span class="line">        width: 25px;</span><br><span class="line">        height: 25px;</span><br><span class="line">        border: 1px solid #ccc;</span><br><span class="line">        list-style-type: none;</span><br><span class="line">        display: flex;</span><br><span class="line">        justify-content: center;</span><br><span class="line">        align-items: center;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">.mmm-move &#123;</span><br><span class="line">    transition: transform 0.8s ease;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>状态过渡<ul>
<li>Vue 也同样可以给数字 Svg 背景颜色等添加过度动画 今天演示数字变化<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;input step=&quot;20&quot; v-model=&quot;num.current&quot; type=&quot;number&quot; /&gt;</span><br><span class="line">        &lt;div&gt;&#123;&#123; num.tweenedNumber.toFixed(0) &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">    </span><br><span class="line">&lt;script setup lang=&apos;ts&apos;&gt;</span><br><span class="line">import &#123; reactive, watch &#125; from &apos;vue&apos;</span><br><span class="line">import gsap from &apos;gsap&apos;</span><br><span class="line">const num = reactive(&#123;</span><br><span class="line">    tweenedNumber: 0,</span><br><span class="line">    current:0</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line">watch(()=&gt;num.current, (newVal) =&gt; &#123;</span><br><span class="line">    gsap.to(num, &#123;</span><br><span class="line">        duration: 1,</span><br><span class="line">        tweenedNumber: newVal</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">    </span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/03/17/vite-vue3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/03/17/vite-vue3/" itemprop="url">vite+vue3</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-03-17T09:59:13+08:00">
                2022-03-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端框架/" itemprop="url" rel="index">
                    <span itemprop="name">前端框架</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="vite"><a href="#vite" class="headerlink" title="vite"></a>vite</h3><ul>
<li><a href="https://vitejs.cn/guide/why.html#slow-server-start" style="color: blue;" target="_blank" rel="noopener">vite</a></li>
<li><a href="https://blog.csdn.net/qq1195566313/category_11618172.html" style="color: blue;" target="_blank" rel="noopener">more</a><h4 id="首次执行命令-npm-init-vite-latest-一直报错"><a href="#首次执行命令-npm-init-vite-latest-一直报错" class="headerlink" title="首次执行命令(npm init vite@latest)一直报错"></a>首次执行命令(npm init vite@latest)一直报错</h4></li>
<li><p>解决</p>
<ul>
<li>修改源地址位淘宝镜像<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry http://registry.npm.taobao.org/</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>修改源地址为官方源</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npmjs.org/</span><br></pre></td></tr></table></figure>
</li>
<li><p>再使用cnpm</p>
</li>
<li><p>下载淘宝镜像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm  install -g cnpm --registry==http://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>
</li>
<li><p>指定淘宝镜像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set  registry  http://registry.npm.taobao.org/</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="vite的优势"><a href="#vite的优势" class="headerlink" title="vite的优势"></a>vite的优势</h4><ul>
<li>冷服务 默认构建目标浏览器是能在script标签上支持原生ESM和原生ESM动态导入<ul>
<li><a href="https://zhuanlan.zhihu.com/p/400573436" style="color: blue;" target="_blank" rel="noopener">更多ESM</a></li>
</ul>
</li>
<li>HMR模块热替换（hot module replacement）速度快 模块热更新（HMR）</li>
<li>Rollup打包，它使用rollup打包的代码，并且它是预配置的 支持大部分的rollup插件</li>
</ul>
<h4 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h4><ul>
<li>public – 静态文件（不被编译）</li>
<li>src/assets – 静态文件（被编译）</li>
</ul>
<h4 id="diff-算法"><a href="#diff-算法" class="headerlink" title="diff 算法"></a>diff 算法</h4><ul>
<li>有无key 是否覆盖，及跳过（顺、逆、乱）</li>
</ul>
<h4 id="相关Ref"><a href="#相关Ref" class="headerlink" title="相关Ref"></a>相关Ref</h4><ul>
<li>ref<ul>
<li>接受一个内部值并返回一个响应式且可变的 ref 对象。ref 对象仅有一个 .value property，指向该内部值<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;changeHandle&quot;&gt;点击&lt;/button&gt;</span><br><span class="line">    &lt;div&gt;&#123;&#123; mes &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">let mes: string = &quot;初学习vite&quot;</span><br><span class="line">const changeHandle = () =&gt; &#123;</span><br><span class="line">  mes = &quot;change msg&quot;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>以上操作，无法改变mes的值,因为mes并不是响应式的，无法被vue跟踪要改成ref</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;changeHandle&quot;&gt;点击&lt;/button&gt;</span><br><span class="line">    &lt;div&gt;&#123;&#123; mes &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123;ref, Ref&#125; from &apos;vue&apos;</span><br><span class="line">let mes:Ref&lt;string&gt; = ref(&quot;我是message&quot;);</span><br><span class="line"> </span><br><span class="line">const changeHandle = () =&gt; &#123;</span><br><span class="line">  mes.value = &quot;change msg&quot;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">// ------------------------------- ts两种方式 ---------------------------------</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;changeHandle&quot;&gt;点击&lt;/button&gt;</span><br><span class="line">    &lt;div&gt;&#123;&#123; mes &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &apos;vue&apos;</span><br><span class="line">let mes = ref&lt;string | number&gt;(&quot;我是message&quot;)</span><br><span class="line"> </span><br><span class="line">const changeHandle = () =&gt; &#123;</span><br><span class="line">  message.value = &quot;change msg&quot;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>isRef</p>
<ul>
<li>判断是不是一个ref对象<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ref, Ref,isRef &#125; from &apos;vue&apos;</span><br><span class="line">let message: Ref&lt;string | number&gt; = ref(&quot;我是message&quot;)</span><br><span class="line">let notRef:number = 123</span><br><span class="line">const changeMsg = () =&gt; &#123;</span><br><span class="line">  message.value = &quot;change msg&quot;</span><br><span class="line">  console.log(isRef(message)); //true</span><br><span class="line">  console.log(isRef(notRef)); //false</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>shallowRef</p>
<ul>
<li>创建一个跟踪自身 .value 变化的 ref，但不会使其值也变成响应式的</li>
<li>修改其属性是非响应式的这样是不会改变的</li>
</ul>
</li>
<li><p>triggerRef</p>
<ul>
<li>强制更新页面DOM</li>
</ul>
</li>
<li><p>customRef</p>
<ul>
<li>customRef 是个工厂函数要求我们返回一个对象 并且实现 get 和 set </li>
</ul>
</li>
</ul>
<h4 id="reactive"><a href="#reactive" class="headerlink" title="reactive"></a>reactive</h4><ul>
<li>用来绑定复杂的数据类型 例如 对象 数组</li>
<li>不可以绑定普通的数据类型这样是不允许 会给我们报错</li>
<li>如果用ref去绑定对象 或者 数组 等复杂的数据类型,看源码里面其实也是 去调用reactive,使用reactive 去修改值无须.value</li>
<li><p>数组异步赋值问题</p>
<ul>
<li>不会变化<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let person = reactive&lt;number[]&gt;([])</span><br><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line">  person = [1, 2, 3]</span><br><span class="line">  console.log(person);</span><br><span class="line">&#125;,1000)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>解决方案1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import &#123; reactive &#125; from &apos;vue&apos;</span><br><span class="line">let person = reactive&lt;number[]&gt;([])</span><br><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line">  const arr = [1, 2, 3]</span><br><span class="line">  person.push(...arr)</span><br><span class="line">  console.log(person);</span><br><span class="line">&#125;,1000)</span><br></pre></td></tr></table></figure>
</li>
<li><p>解决方案2</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">type Person = &#123;</span><br><span class="line">  list?:Array&lt;number&gt;</span><br><span class="line">&#125;</span><br><span class="line">let person = reactive&lt;Person&gt;(&#123;</span><br><span class="line">  list:[]</span><br><span class="line">&#125;)</span><br><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line">  const arr = [1, 2, 3]</span><br><span class="line">  person.list = arr;</span><br><span class="line">  console.log(person);</span><br><span class="line">&#125;,1000)</span><br></pre></td></tr></table></figure>
</li>
<li><p>readonly</p>
<ul>
<li>拷贝一份proxy对象将其设置为只读</li>
</ul>
</li>
<li>shallowReactive<ul>
<li>只能对浅层的数据 如果是深层的数据只会改变值,不会改变视图</li>
</ul>
</li>
</ul>
<h4 id="to系列"><a href="#to系列" class="headerlink" title="to系列"></a>to系列</h4><ul>
<li>toRef<ul>
<li>原始对象是非响应式的就不会更新视图 数据是会变的</li>
<li>原始对象是响应式的是会更新视图并且改变数据的</li>
</ul>
</li>
<li>toRefs<ul>
<li>批量创建ref对象主要是方便我们解构使用</li>
</ul>
</li>
<li>toRaw<ul>
<li>响应式对象转化为普通对象</li>
</ul>
</li>
</ul>
<h4 id="computed计算属性"><a href="#computed计算属性" class="headerlink" title="computed计算属性"></a>computed计算属性</h4><ul>
<li>computed用法<ul>
<li>计算属性就是当依赖的属性的值发生变化的时候，才会触发他的更改，如果依赖的值，不发生变化的时候，使用的是缓存中的属性值</li>
<li>参数（函数或对象）<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const name = computed(() =&gt; &#123;</span><br><span class="line">  return `$&#123;fistName.value&#125; ----- $&#123;lastName.value&#125;`</span><br><span class="line">&#125;)</span><br><span class="line">const name = computed(&#123;</span><br><span class="line">  get() &#123;</span><br><span class="line">    return `$&#123;fistName.value&#125; ----- $&#123;lastName.value&#125;`</span><br><span class="line">  &#125;,</span><br><span class="line">  set() &#123;</span><br><span class="line">    return `$&#123;fistName.value&#125; ----- $&#123;lastName.value&#125;`</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="watch侦听器"><a href="#watch侦听器" class="headerlink" title="watch侦听器"></a>watch侦听器</h4><ul>
<li>watch 需要侦听特定的数据源，并在单独的回调函数中执行副作用</li>
<li><p>watch参数</p>
<ul>
<li><p>第一个参数监听源(单个数据源、数组、函数)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ref, watch, reactive &#125; from &apos;vue&apos;;</span><br><span class="line">let message = reactive(&#123;</span><br><span class="line">  name: &apos;凤&apos;,</span><br><span class="line">  name2: &apos;凤凤&apos;,</span><br><span class="line">&#125;);</span><br><span class="line">// 只想监听特定的某个属性，可以传入函数</span><br><span class="line">watch(() =&gt; message.name, (newVal, oldVal) =&gt; &#123;</span><br><span class="line">  console.log(&apos;新的&apos;, newVal);</span><br><span class="line">  console.log(&apos;旧的&apos;, oldVal);</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  // deep: true, // reactive类型 是否设置deep 都深度监听</span><br><span class="line">  // immediate: true, // 第一次进入页面是否执行</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>第二个参数回调函数cb（newVal, oldVal）</p>
</li>
<li>第三个参数一个options配置项是一个对象，可不传 undefined<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  immediate: true, // 是否立即调用一次</span><br><span class="line">  deep: true // 是否开启深度监听， 如果是reactive类型，是否设置此属性默认深度监听</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="watchEffect高级侦听器）"><a href="#watchEffect高级侦听器）" class="headerlink" title="watchEffect高级侦听器）"></a>watchEffect高级侦听器）</h4><ul>
<li>立即执行传入的一个函数，同时响应式追踪其依赖，并在其依赖变更时重新运行该函数</li>
<li>如果用到message 就只会监听message 就是用到几个监听几个 而且是非惰性 会默认调用一次</li>
<li>清除副作用<ul>
<li>就是在触发监听之前会调用一个函数可以处理你的逻辑例如防抖</li>
</ul>
</li>
<li><p>停止跟踪 watchEffect 返回一个函数 调用之后将停止更新</p>
</li>
<li><p>更多的配置项</p>
<ul>
<li>副作用刷新时机 flush 一般使用post(可以获取到DOM元素)</li>
<li>更新时机，pre组件更新前执行， sync强制效果始终同步触发， post组件更新后执行</li>
<li>onTrigger  可以帮助我们调试 watchEffect<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &lt;input id=&quot;inp&quot; v-model=&quot;message&quot; type=&quot;text&quot; /&gt;</span><br><span class="line">  &lt;input v-model=&quot;message2&quot; type=&quot;text&quot; /&gt;</span><br><span class="line">  &lt;button @click=&quot;stopWatch&quot;&gt;停止监听&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">import &#123; ref, watch, watchEffect, reactive &#125; from &apos;vue&apos;;</span><br><span class="line">const message = ref&lt;string&gt;(&apos;凤&apos;);</span><br><span class="line">const message2 = ref&lt;string&gt;(&apos;凤凤&apos;);</span><br><span class="line">// 默认会执行一次 </span><br><span class="line">const stop = watchEffect((oninvalidate) =&gt; &#123;</span><br><span class="line">  const inp:HTMLInputElement = document.querySelector(&apos;#inp&apos;) as HTMLInputElement;</span><br><span class="line">  console.log(&apos;message--------&apos;, message.value);</span><br><span class="line">  // console.log(&apos;message2--------&apos;, message2.value);</span><br><span class="line">  console.log(inp, &apos;进入页面&apos;);</span><br><span class="line">  oninvalidate(() =&gt; &#123;</span><br><span class="line">    console.log(&apos;before&apos;);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  flush: &apos;post&apos;,</span><br><span class="line">  onTrigger(e) &#123;</span><br><span class="line">    // dev可以帮助我们调试 watchEffect</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const stopWatch = () =&gt; stop();</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="识组件-amp-Vue3生命周期"><a href="#识组件-amp-Vue3生命周期" class="headerlink" title="识组件&amp;Vue3生命周期"></a>识组件&amp;Vue3生命周期</h4><ul>
<li>每一个.vue 文件都可以充当组件来使用</li>
<li>每一个组件都可以复用</li>
<li><p>父组件使用</p>
<ul>
<li>引入子组件 xxx 然后直接就可以去当标签去使用 （切记组件名称不能与html元素标签名称一样）</li>
<li>vue3使用组件无需注册</li>
</ul>
</li>
<li><p>组件的生命周期</p>
<ul>
<li>是一个组件从创建到销毁的过程成为生命周期</li>
<li>在我们使用Vue3 组合式API 是没有 beforeCreate 和 created 这两个生命周期的</li>
</ul>
</li>
<li>onBeforeMount()<ul>
<li>在组件DOM实际渲染安装之前调用。在这一步中，根元素还不存在</li>
</ul>
</li>
<li>onMounted()<ul>
<li>在组件的第一次渲染后调用，该元素现在可用，允许直接DOM访问</li>
</ul>
</li>
<li>onBeforeUpdate()<ul>
<li>数据更新时调用，发生在虚拟 DOM 打补丁之前</li>
</ul>
</li>
<li>updated()<ul>
<li>DOM更新后，updated的方法即会调用</li>
</ul>
</li>
<li>*nBeforeUnmounted()<ul>
<li>在卸载组件实例之前调用。在这个阶段，实例仍然是完全正常的</li>
</ul>
</li>
<li>onUnmounted()<ul>
<li>卸载组件实例后调用。调用此钩子时，组件实例的所有指令都被解除绑定，所有事件侦听器都被移除，所有子组件实例被卸载</li>
</ul>
</li>
</ul>
<h4 id="实操组件和认识less-和-scoped"><a href="#实操组件和认识less-和-scoped" class="headerlink" title="实操组件和认识less 和 scoped"></a>实操组件和认识less 和 scoped</h4><ul>
<li><p>less</p>
<ul>
<li>Less （Leaner Style Sheets 的缩写） 是一门向后兼容的 CSS 扩展语言。这里呈现的是 Less 的官方文档（中文版），包含了 Less 语言以及利用 JavaScript 开发的用于将 Less 样式转换成 CSS 样式的 Less.js 工具</li>
<li>Less 和 CSS 非常像，很容易学习。而且 Less 仅对 CSS 语言增加了少许方便的扩展，这就是 Less 如此易学的原因之一 <ul>
<li><a href="https://zhuanlan.zhihu.com/p/400573436" style="color: blue;" target="_blank" rel="noopener">官方文档 Less 快速入门 | Less.js 中文文档 - Less 中文网</a></li>
</ul>
</li>
<li>在vite中使用less<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install less less-loader -D // 安装即可</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>在style标签注明即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;less&quot;&gt;</span><br><span class="line"> </span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>scoped</p>
<ul>
<li>实现组件的私有化, 当前style属性只属于当前模块<ul>
<li>在DOM结构中可以发现,vue通过在DOM结构以及css样式上加了唯一标记,达到样式私有化,不污染全局的作用</li>
<li>样式穿透问题学到第三方组件精讲 ::v-deep  &gt;&gt;&gt; /deep/</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="父子组件传参"><a href="#父子组件传参" class="headerlink" title="父子组件传参"></a>父子组件传参</h4><ul>
<li>父组件通过v-bind绑定一个数据，然后子组件通过defineProps接受传过来的值<ul>
<li>传递了一个title 字符串类型是不需要v-bind</li>
<li>传递非字符串类型需要加v-bind  简写 冒号</li>
</ul>
</li>
<li>子组件接受值<ul>
<li>通过defineProps 来接受 defineProps是无须引入的直接使用即可</li>
<li>如果我们使用的TypeScript，可以使用传递字面量类型的纯类型语法做为参数</li>
</ul>
</li>
<li>TS 特有的默认值方式</li>
<li><p>withDefaults是个函数也是无须引入开箱即用接受一个props函数第二个参数是一个对象设置默认值</p>
</li>
<li><p>子组件给父组件传参</p>
<ul>
<li>是通过defineEmits派发一个事件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;menu&quot;&gt;</span><br><span class="line">        &lt;button @click=&quot;clickTap&quot;&gt;派发给父组件&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; reactive &#125; from &apos;vue&apos;</span><br><span class="line">const list = reactive&lt;number[]&gt;([4, 5, 6])</span><br><span class="line"> </span><br><span class="line">const emit = defineEmits([&apos;on-click&apos;])</span><br><span class="line">const clickTap = () =&gt; &#123;</span><br><span class="line">    emit(&apos;on-click&apos;, list)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>在子组件绑定了一个click 事件 然后通过defineEmits 注册了一个自定义事件</p>
<ul>
<li>点击click 触发 emit 去调用我们注册的事件 然后传递参数</li>
<li>父组件接受子组件的事件</li>
</ul>
</li>
<li>组件暴露给父组件内部属性<ul>
<li>通过defineExpose</li>
<li>父组件获取子组件实例通过ref</li>
<li>父组件想要读到子组件的属性可以通过 defineExpose暴露</li>
</ul>
</li>
</ul>
<h4 id="动态组件"><a href="#动态组件" class="headerlink" title="动态组件"></a>动态组件</h4><ul>
<li>让多个组件使用同一个挂载点，并动态切换，这就是动态组件。</li>
<li><p>在挂载点使用component标签，然后使用v-bind:is=”组件”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;component :is=&quot;A&quot;&gt;&lt;/component&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用场景</p>
<ul>
<li>tab切换 居多</li>
</ul>
</li>
<li>注意事项<br>1.在Vue2 的时候is 是通过组件名称切换的 在Vue3 setup 是通过组件实例切换的</li>
</ul>
<p>2.如果你把组件实例放到Reactive Vue会给你一个警告runtime-core.esm-bundler.js:38 [Vue warn]: Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with <code>markRaw</code> or using <code>shallowRef</code> instead of <code>ref</code>.<br>Component that was made reactive: </p>
<ul>
<li><p>这是因为reactive 会进行proxy 代理 而我们组件代理之后毫无用处 节省性能开销 推荐我们使用shallowRef 或者  markRaw 跳过proxy 代理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const tab = reactive&lt;Com[]&gt;([&#123;</span><br><span class="line">    name: &quot;A组件&quot;,</span><br><span class="line">    comName: markRaw(A)</span><br><span class="line">&#125;, &#123;</span><br><span class="line">    name: &quot;B组件&quot;,</span><br><span class="line">    comName: markRaw(B)</span><br><span class="line">&#125;])</span><br></pre></td></tr></table></figure>
</li>
<li><p>?.length的语法</p>
<ul>
<li>某个对象下的某个数组不存在，读取length会报错，处理方式(是否存在，不存在并赋值为空数组) item.children?.length ?? []</li>
<li>null ?? [] 得到[],但是 0 ?? [] 得到 0 false ?? [] 得到false</li>
</ul>
</li>
<li><p>vue2 与 vue3使用方式区别</p>
</li>
<li><component :is="current.comName"></component></li>
<li>vue3中 is 如果是字符串，不会被渲染  setup 与 component之间没有建立媒介关系</li>
<li>改写为vue 2方式没有问题<pre><code>&lt;script lang=&quot;ts&quot;&gt;
export default {
components: {
  A,
}
}
&lt;/script&gt;
</code></pre></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/03/05/for循环和forEach的语法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/03/05/for循环和forEach的语法/" itemprop="url">for循环和forEach的语法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-03-05T15:20:22+08:00">
                2022-03-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="for循环和forEach的语法"><a href="#for循环和forEach的语法" class="headerlink" title="for循环和forEach的语法"></a>for循环和forEach的语法</h3><ul>
<li><a href="https://mp.weixin.qq.com/s/9UR22JFovfJegmhhUPMjdg" style="color: blue;" target="_blank" rel="noopener">To Learn More</a> </li>
</ul>
<h4 id="for循环和forEach的本质区别"><a href="#for循环和forEach的本质区别" class="headerlink" title="for循环和forEach的本质区别"></a>for循环和forEach的本质区别</h4><ul>
<li>forEach 是负责遍历（Array Set Map）可迭代对象的，而 for 循环是一种循环机制，只是能通过它遍历出数组</li>
<li>只要是可迭代对象，调用内部的 Symbol.iterator 都会提供一个迭代器，并根据迭代器返回的next 方法来访问内部，这也是 for…of 的实现原理</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, 2, 3, 4]  // 可迭代对象</span><br><span class="line">let iterator = arr[Symbol.iterator]()  // 调用 Symbol.iterator 后生成了迭代器对象</span><br><span class="line">console.log(iterator.next()); // &#123;value: 1, done: false&#125;  访问迭代器对象的next方法</span><br></pre></td></tr></table></figure>
<h4 id="for循环和forEach的语法区别"><a href="#for循环和forEach的语法区别" class="headerlink" title="for循环和forEach的语法区别"></a>for循环和forEach的语法区别</h4><ul>
<li>forEach 的参数</li>
<li><p>arr.forEach((self,index,arr) =&gt;{},this) // this： 回调函数中this指向</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, 2, 3, 4];</span><br><span class="line">let person = &#123;</span><br><span class="line">    name: &apos;xx&apos;</span><br><span class="line">&#125;;</span><br><span class="line">arr.forEach(function (self, index, arr) &#123;</span><br><span class="line">    console.log(`当前元素为$&#123;self&#125;索引为$&#123;index&#125;,属于数组$&#123;arr&#125;`);</span><br><span class="line">    console.log(this.name+=&apos;美美哒&apos;);</span><br><span class="line">&#125;, person)</span><br></pre></td></tr></table></figure>
</li>
<li><p>arr 实现数组去重</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let arr1 = [1, 2, 1, 3, 1];</span><br><span class="line">let arr2 = [];</span><br><span class="line">arr1.forEach(function (self, index, arr) &#123;</span><br><span class="line">    arr.indexOf(self) === index ? arr2.push(self) : null;</span><br><span class="line">&#125;);</span><br><span class="line">console.log(arr2);   // [1,2,3]</span><br></pre></td></tr></table></figure>
</li>
<li><p>forEach 的中断</p>
</li>
<li><p>js中有break return continue 对函数进行中断或跳出循环的操作(优化数组遍历查找),但forEach属于迭代器，只能按序依次遍历完成，不支持上述的中断行为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, 2, 3, 4],</span><br><span class="line">    i = 0,</span><br><span class="line">    length = arr.length;</span><br><span class="line">for (; i &lt; length; i++) &#123;</span><br><span class="line">    console.log(arr[i]); //1,2</span><br><span class="line">    if (arr[i] === 2) &#123;</span><br><span class="line">        break;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">arr.forEach((self,index) =&gt; &#123;</span><br><span class="line">    console.log(self);</span><br><span class="line">    if (self === 2) &#123;</span><br><span class="line">        break; //报错</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">arr.forEach((self,index) =&gt; &#123;</span><br><span class="line">    console.log(self);</span><br><span class="line">    if (self === 2) &#123;</span><br><span class="line">        continue; //报错</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>forEach 中跳出循环呢？其实是有办法的，借助try/catch</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">    var arr = [1, 2, 3, 4];</span><br><span class="line">    arr.forEach(function (item, index) &#123;</span><br><span class="line">        //跳出条件</span><br><span class="line">        if (item === 3) &#123;</span><br><span class="line">            throw new Error(&quot;LoopTerminates&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        //do something</span><br><span class="line">        console.log(item);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125; catch (e) &#123;</span><br><span class="line">    if (e.message !== &quot;LoopTerminates&quot;) throw e;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>return 并不会报错，但是不会生效</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, 2, 3, 4];</span><br><span class="line">function find(array, num) &#123;</span><br><span class="line">    array.forEach((self, index) =&gt; &#123;</span><br><span class="line">        if (self === num) &#123;</span><br><span class="line">            return index;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">let index = find(arr, 2);// undefined</span><br></pre></td></tr></table></figure>
</li>
<li><p>forEach 删除自身元素，index不可被重置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1,2,3,4]</span><br><span class="line">arr.forEach((item, index) =&gt; &#123;</span><br><span class="line">    console.log(item); // 1 2 3 4</span><br><span class="line">    index++;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>for 循环可以控制循环起点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, 2, 3, 4],</span><br><span class="line">    i = 1,</span><br><span class="line">    length = arr.length;</span><br><span class="line"></span><br><span class="line">for (; i &lt; length; i++) &#123;</span><br><span class="line">    console.log(arr[i]) // 2 3 4</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>数组遍历并删除</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, 2, 1],</span><br><span class="line">    i = 0,</span><br><span class="line">    length = arr.length;</span><br><span class="line"></span><br><span class="line">for (; i &lt; length; i++) &#123;</span><br><span class="line">    // 删除数组中所有的1</span><br><span class="line">    if (arr[i] === 1) &#123;</span><br><span class="line">        arr.splice(i, 1);</span><br><span class="line">        //重置i，否则i会跳一位</span><br><span class="line">        i--;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">console.log(arr); // [2]</span><br><span class="line">//等价于</span><br><span class="line">var arr1 = arr.filter(index =&gt; index !== 1);</span><br><span class="line">console.log(arr1) // [2]</span><br></pre></td></tr></table></figure>
</li>
<li><p>for循环和forEach的性能区别</p>
<ul>
<li>性能比较：for &gt; forEach &gt; map 在chrome 62 和 Node.js v9.1.0环境下：for 循环比 forEach 快1倍，forEach 比 map快20%左右</li>
<li>for循环没有额外的函数调用栈和上下文，所以它的实现最为简单</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/03/03/正则常用表达式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yongfeng.peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog-avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shero.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/03/03/正则常用表达式/" itemprop="url">正则常用表达式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-03-03T15:20:22+08:00">
                2022-03-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="正则常用表达式"><a href="#正则常用表达式" class="headerlink" title="正则常用表达式"></a>正则常用表达式</h3><h4 id="数字价格千分位分割"><a href="#数字价格千分位分割" class="headerlink" title="数字价格千分位分割"></a>数字价格千分位分割</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function numSplit(str) &#123;</span><br><span class="line">  return str.replace(/(?!^)(?=(\d&#123;3&#125;)+$)/g, &apos;,&apos;);  // 123,456,789</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="补充小数千分位支持"><a href="#补充小数千分位支持" class="headerlink" title="补充小数千分位支持"></a>补充小数千分位支持</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const formatNum = (numStr) =&gt; &#123;</span><br><span class="line">  const reg = new RegExp(`(?!^)(?=(\\d&#123;3&#125;)+$&#123;numStr.includes(&apos;.&apos;) ? &apos;\\.&apos; : &apos;$&apos;&#125;)`, &apos;g&apos;)</span><br><span class="line">  return numStr.replace(reg, &apos;,&apos;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="手机号3-4-4分割"><a href="#手机号3-4-4分割" class="headerlink" title="手机号3-4-4分割"></a>手机号3-4-4分割</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function formatMobile(mobile) &#123;</span><br><span class="line">  let mobileReg = /(?=(\d&#123;4&#125;)+$)/g;</span><br><span class="line">  return mobile.replace(mobileReg, &apos;-&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="将字符串首字母转化为大写，剩下为小写"><a href="#将字符串首字母转化为大写，剩下为小写" class="headerlink" title="将字符串首字母转化为大写，剩下为小写"></a>将字符串首字母转化为大写，剩下为小写</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const capitalize = (string) =&gt; &#123;</span><br><span class="line">  const capitalizeRegex = /(?:^|\s+)\w/g</span><br><span class="line">  return string.toLowerCase().replace(capitalizeRegex, (match) =&gt; match.toUpperCase())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="将字符串驼峰化"><a href="#将字符串驼峰化" class="headerlink" title="将字符串驼峰化"></a>将字符串驼峰化</h4><ol>
<li>foo Bar =&gt; fooBar</li>
<li>foo-bar—- =&gt; fooBar</li>
<li>foo_bar__ =&gt; fooBar<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const camelCase = (string) =&gt; &#123;</span><br><span class="line">  const camelCaseRegex = /[-_\s]+(.)?/g</span><br><span class="line">  return string.replace(camelCaseRegex, (match, char) =&gt; &#123;</span><br><span class="line">    return char ? char.toUpperCase() : &apos;&apos;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="实现一个trim函数"><a href="#实现一个trim函数" class="headerlink" title="实现一个trim函数"></a>实现一个trim函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 去除空格法</span><br><span class="line">const trim = (str) =&gt; &#123;</span><br><span class="line">  return str.replace(/^\s*|\s*$/g, &apos;&apos;)    </span><br><span class="line">&#125;</span><br><span class="line">// 提取非空格法</span><br><span class="line">const trim = (str) =&gt; &#123;</span><br><span class="line">  return str.replace(/^\s*(.*?)\s*$/g, &apos;$1&apos;)    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="表单验证常用正则"><a href="#表单验证常用正则" class="headerlink" title="表单验证常用正则"></a>表单验证常用正则</h3><ul>
<li><p>用户名正则</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//用户名正则，4到16位（字母，数字，下划线，减号）</span><br><span class="line">var uPattern = /^[a-zA-Z0-9_-]&#123;4,16&#125;$/;</span><br><span class="line">//输出 true</span><br><span class="line">console.log(uPattern.test(&quot;caibaojian&quot;));</span><br></pre></td></tr></table></figure>
</li>
<li><p>密码强度正则</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//密码强度正则，最少6位，包括至少1个大写字母，1个小写字母，1个数字，1个特殊字符</span><br><span class="line">var pPattern = /^.*(?=.&#123;6,&#125;)(?=.*d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&amp;*? ]).*$/;</span><br><span class="line">//输出 true</span><br><span class="line">console.log(&quot;==&quot;+pPattern.test(&quot;caibaojian#&quot;));</span><br></pre></td></tr></table></figure>
</li>
<li><p>整数正则</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//正整数正则</span><br><span class="line">var posPattern = /^d+$/;</span><br><span class="line">//负整数正则</span><br><span class="line">var negPattern = /^-d+$/;</span><br><span class="line">//整数正则</span><br><span class="line">var intPattern = /^-?d+$/;</span><br><span class="line">//输出 true</span><br><span class="line">console.log(posPattern.test(&quot;42&quot;));</span><br><span class="line">//输出 true</span><br><span class="line">console.log(negPattern.test(&quot;-42&quot;));</span><br><span class="line">//输出 true</span><br><span class="line">console.log(intPattern.test(&quot;-42&quot;));</span><br></pre></td></tr></table></figure>
</li>
<li><p>数字正则(可以是整数也可以是浮点数)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//正数正则</span><br><span class="line">var posPattern = /^d*.?d+$/;</span><br><span class="line">//负数正则</span><br><span class="line">var negPattern = /^-d*.?d+$/;</span><br><span class="line">//数字正则</span><br><span class="line">var numPattern = /^-?d*.?d+$/;</span><br><span class="line">console.log(posPattern.test(&quot;42.2&quot;));</span><br><span class="line">console.log(negPattern.test(&quot;-42.2&quot;));</span><br><span class="line">console.log(numPattern.test(&quot;-42.2&quot;));</span><br></pre></td></tr></table></figure>
</li>
<li><p>Email正则</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var ePattern = /^([A-Za-z0-9_-.])+@([A-Za-z0-9_-.])+.([A-Za-z]&#123;2,4&#125;)$/;</span><br><span class="line">//输出 true</span><br><span class="line">console.log(ePattern.test(&quot;99154507@qq.com&quot;));</span><br></pre></td></tr></table></figure>
</li>
<li><p>手机号正则</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var mPattern = /^1[34578]d&#123;9&#125;$/;</span><br><span class="line">//输出 true</span><br><span class="line">console.log(mPattern.test(&quot;15507621888&quot;));</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/H1lrKM9x1ZaMxwU2r3xaCw" style="color: blue;" target="_blank" rel="noopener">To Learn More</a> </p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/blog-avatar.jpeg" alt="yongfeng.peng">
            
              <p class="site-author-name" itemprop="name">yongfeng.peng</p>
              <p class="site-description motion-element" itemprop="description">(女英</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">64</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yongfeng.peng</span>

  
</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
<!-- 代码块复制功能 -->
<script type="text/javascript" src="/js/src/clipboard.min.js"></script>  
<script type="text/javascript" src="/js/src/clipboard-use.js"></script>
</html>
